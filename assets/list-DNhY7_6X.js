import{f,j as g,o as y,w as a,e as t,d as b,p as m,V as w,m as p,t as C,u as s,E as $,q,Q as k,h as A,G as F,b as R,F as W,H as z}from"./index-Bz3xUFWk.js";import{_}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as N,a as j,b as D,c as T}from"./VCard-DERAAftr.js";import{V as E}from"./VTextarea-C47deSSK.js";import{V as I}from"./VSpacer-CPXMEMtb.js";import{V as B}from"./VDialog-RFgKC-WF.js";import{_ as L}from"./delete-alert-icon-D8wzgUfY.js";import{V as O,a as U}from"./VRow-CxeqdztZ.js";/* empty css              */const G={__name:"create",emits:["add-to-list"],setup(x,{emit:v}){const l=f({id:"",unitCode:"",unitName:"",description:""}),n=v,u=f(!1);function r(){l.value.id=crypto.randomUUID(),k.save(l.value).then(()=>{n("add-to-list",{...l.value}),l.value.id="",l.value.unitCode="",l.value.unitName="",l.value.description="",u.value=!1})}function c(){l.value.id="",l.value.unitCode="",l.value.unitName="",l.value.description="",u.value=!1}return(V,i)=>(y(),g(B,{modelValue:s(u),"onUpdate:modelValue":i[6]||(i[6]=e=>q(u)?u.value=e:null),"max-width":"500"},{activator:a(({props:e})=>[t(m,$(e,{title:"新增",color:"success"}),{default:a(()=>[...i[7]||(i[7]=[p("+新增",-1)])]),_:1},16)]),default:a(({isActive:e})=>[t(N,{class:"review-border"},{default:a(()=>[t(j,{class:"d-flex justify-space-between align-center"},{default:a(()=>[i[9]||(i[9]=b("span",{class:"text-blue"},"新增單位",-1)),t(m,{icon:"",variant:"text",onClick:i[0]||(i[0]=o=>c())},{default:a(()=>[t(w,null,{default:a(()=>[...i[8]||(i[8]=[p("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),t(D,null,{default:a(()=>[t(C,{"hide-details":"auto",modelValue:s(l).unitCode,"onUpdate:modelValue":i[1]||(i[1]=o=>s(l).unitCode=o),density:"compact",label:"角色編號","prepend-inner-icon":"mdi-music-accidental-sharp",variant:"solo",required:"",class:"mb-5"},{label:a(()=>[...i[10]||(i[10]=[p(" 單位編號 ",-1)])]),_:1},8,["modelValue"]),t(C,{"hide-details":"auto",modelValue:s(l).unitName,"onUpdate:modelValue":i[2]||(i[2]=o=>s(l).unitName=o),density:"compact",label:"角色名稱","prepend-inner-icon":"mdi-account",variant:"solo",required:"",class:"mb-5"},{label:a(()=>[...i[11]||(i[11]=[p(" 單位名稱 ",-1)])]),_:1},8,["modelValue"]),t(E,{modelValue:s(l).description,"onUpdate:modelValue":i[3]||(i[3]=o=>s(l).description=o),label:"描述",density:"compact",variant:"solo",required:"",placeholder:"描述"},null,8,["modelValue"])]),_:1}),t(T,null,{default:a(()=>[t(I),t(m,{text:"取消",variant:"outlined",color:"grey-darken-2",onClick:i[4]||(i[4]=o=>c())}),t(m,{text:"確認",variant:"outlined",color:"primary",onClick:i[5]||(i[5]=o=>r())})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},H=_(G,[["__scopeId","data-v-b3d175df"]]),M={__name:"edit",props:{unit:{type:Object,required:!0,default:()=>({id:"",unitCode:"",unitName:"",description:""})}},emits:["edit-unit"],setup(x,{emit:v}){const l=x,n=f({id:"",unitCode:"",unitName:"",description:""});A(()=>{n.value.id=l.unit.id,n.value.unitCode=l.unit.unitCode,n.value.unitName=l.unit.unitName,n.value.description=l.unit.description});const u=f(!1),r=v;function c(){k.update({id:n.value.id},n.value).then(()=>{r("edit-unit",{...n.value}),u.value=!1}).catch(i=>{alert("編輯失敗，請重新整理後再試一次"),u.value=!1})}function V(){n.value.id=l.unit.id,n.value.unitCode=l.unit.unitCode,n.value.unitName=l.unit.unitName,n.value.description=l.unit.description,u.value=!1}return(i,e)=>(y(),g(B,{modelValue:s(u),"onUpdate:modelValue":e[6]||(e[6]=o=>q(u)?u.value=o:null),"max-width":"500"},{activator:a(({props:o})=>[t(m,$(o,{title:"編輯",icon:"mdi-pencil",size:"small",variant:"text"}),null,16)]),default:a(({isActive:o})=>[t(N,{class:"review-border"},{default:a(()=>[t(j,{class:"d-flex justify-space-between align-center"},{default:a(()=>[e[8]||(e[8]=b("span",{class:"text-blue"},"編輯單位",-1)),t(m,{icon:"",variant:"text",onClick:e[0]||(e[0]=d=>V())},{default:a(()=>[t(w,null,{default:a(()=>[...e[7]||(e[7]=[p("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),t(D,null,{default:a(()=>[t(C,{"hide-details":"auto",modelValue:s(n).unitCode,"onUpdate:modelValue":e[1]||(e[1]=d=>s(n).unitCode=d),density:"compact",label:"角色編號","prepend-inner-icon":"mdi-music-accidental-sharp",variant:"solo",required:"",class:"mb-5"},{label:a(()=>[...e[9]||(e[9]=[p(" 單位編號 ",-1)])]),_:1},8,["modelValue"]),t(C,{"hide-details":"auto",modelValue:s(n).unitName,"onUpdate:modelValue":e[2]||(e[2]=d=>s(n).unitName=d),density:"compact",label:"角色名稱","prepend-inner-icon":"mdi-account",variant:"solo",required:"",class:"mb-5"},{label:a(()=>[...e[10]||(e[10]=[p(" 單位名稱 ",-1)])]),_:1},8,["modelValue"]),t(E,{modelValue:s(n).description,"onUpdate:modelValue":e[3]||(e[3]=d=>s(n).description=d),label:"描述",density:"compact",variant:"solo",required:"",placeholder:"描述"},null,8,["modelValue"])]),_:1}),t(T,null,{default:a(()=>[t(I),t(m,{text:"取消",variant:"outlined",color:"grey-darken-2",onClick:e[4]||(e[4]=d=>V())}),t(m,{text:"確認",variant:"outlined",color:"primary",onClick:e[5]||(e[5]=d=>c())})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},P=_(M,[["__scopeId","data-v-2b0fe447"]]),Q={__name:"delete",props:{unit:{type:Object,required:!0,default:()=>({id:"",unitCode:"",name:"",info:""})}},emits:["delete-unit"],setup(x,{emit:v}){const l=x,n=v,u=f({id:"",unitCode:"",name:"",info:""});A(()=>{u.value.id=l.unit.id});const r=f(!1);function c(){k.delete({id:u.value.id}).then(()=>{u.value.id="",n("delete-unit",u.value.id),r.value=!1}).catch(i=>{alert("刪除失敗，請重新整理後再試一次"),r.value=!1})}function V(){r.value=!1}return(i,e)=>(y(),g(B,{modelValue:s(r),"onUpdate:modelValue":e[3]||(e[3]=o=>q(r)?r.value=o:null),"max-width":"500"},{activator:a(({props:o})=>[t(m,$(o,{title:"刪除",icon:"mdi-trash-can",size:"small",variant:"text"}),null,16)]),default:a(({isActive:o})=>[t(N,null,{default:a(()=>[t(j,{class:"d-flex justify-space-between align-center"},{default:a(()=>[e[5]||(e[5]=b("span",{class:"text-blue"},null,-1)),t(m,{icon:"",variant:"text",onClick:e[0]||(e[0]=d=>V())},{default:a(()=>[t(w,null,{default:a(()=>[...e[4]||(e[4]=[p("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),t(D,null,{default:a(()=>[...e[6]||(e[6]=[b("div",{class:"delete-info"},[b("img",{src:L,alt:"Delete Alert Icon",class:"delete-alert"}),b("span",null,[p("是否確認"),b("span",{class:"text-red"},"刪除"),p("?")])],-1)])]),_:1}),t(T,{class:"d-flex justify-center mb-5"},{default:a(()=>[t(m,{text:"取消",variant:"outlined",color:"grey-darken-2",onClick:e[1]||(e[1]=d=>V())}),t(I,{style:{flex:"0.25"}}),t(m,{text:"確認",variant:"outlined",color:"primary",onClick:e[2]||(e[2]=d=>c())})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},S=_(Q,[["__scopeId","data-v-4572d8fb"]]),ae={__name:"list",setup(x){const v=f([]);A(()=>{i()});const l=f(""),n=F(()=>v.value.filter(e=>!l.value||e.unitCode&&e.unitCode.includes(l.value)||e.name&&e.name.includes(l.value)||e.info&&e.info.includes(l.value))),u=f([{title:"單位編號",key:"unitCode"},{title:"單位名稱",key:"unitName"},{title:"描述",key:"description"},{title:"編輯",key:"edit",sortable:!1},{title:"刪除",key:"delete",sortable:!1}]);function r(){i()}function c(){i()}function V(){i()}function i(){k.get().then(e=>{v.value=e.data})}return(e,o)=>(y(),R(W,null,[t(O,{class:"mt-1"},{default:a(()=>[t(U,{cols:"4"},{default:a(()=>[t(C,{label:"搜尋",modelValue:l.value,"onUpdate:modelValue":o[0]||(o[0]=d=>l.value=d),density:"compact",variant:"outlined"},null,8,["modelValue"])]),_:1}),t(U,{cols:"4"}),t(U,{cols:"4",class:"d-flex justify-end"},{default:a(()=>[t(H,{onAddToList:r})]),_:1})]),_:1}),t(N,{class:"rounded-lg elevation-3"},{default:a(()=>[t(z,{headers:u.value,items:n.value,density:"comfortable",class:"cyan-header"},{"item.edit":a(({item:d})=>[t(P,{unit:d,onEditUnit:c},null,8,["unit"])]),"item.delete":a(({item:d})=>[t(S,{unit:d,onDeleteUnit:V},null,8,["unit"])]),_:1},8,["headers","items"])]),_:1})],64))}};export{ae as default};
//# sourceMappingURL=list-DNhY7_6X.js.map
