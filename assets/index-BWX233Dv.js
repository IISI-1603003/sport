import{e as m,f as w,h as c,j as B,w as n,k,r as q,o as C,b as a,d as l,l as f,V as g,m as i,u as s,v,a as A,n as D,p as x}from"./index-mfJgyZhT.js";import{a as N}from"./auth-DIYsy4iY.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as $}from"./VForm-BhPK0WJQ.js";const G={class:"d-flex align-center ga-3"},M={class:"d-flex align-center ga-3"},h={class:"d-flex align-center ga-3"},S=["src"],T={class:"or-container"},j={__name:"index",setup(z){const{signIn:y}=N(),d=m(!1),e=m({username:"1144",p:"1qaz!QAZ",captchaGuid:"",captchaCode:"12"}),p=m();w(async()=>{u()});const u=async()=>{let{data:r}=await c.captcha();e.value.captchaGuid=r.captchaGuid,p.value=`data:image/png;base64,${r.captchaImage}`},I=async()=>{d.value||(d.value=!0,c.signIn(e.value,{headers:{code:captcha.value.code}}).then(r=>{y(r.data)}).catch(()=>{alert("系統異常，請稍後再試。"),u()}).finally(()=>{d.value=!1}))},b=()=>{c.signInByAD(e.value).then(r=>{y(r.data)}).catch(()=>{alert("系統異常，請稍後再試。"),u()}).finally(()=>{d.value=!1})};return(r,t)=>{const V=q("router-link");return C(),B($,{onSubmit:k(I,["prevent"])},{default:n(()=>[t[14]||(t[14]=a("h2",{class:"text-center"},"登入",-1)),a("div",G,[l(g,null,{default:n(()=>[...t[6]||(t[6]=[i("mdi-account",-1)])]),_:1}),f(a("input",{type:"text",class:"input",required:"","onUpdate:modelValue":t[0]||(t[0]=o=>s(e).username=o)},null,512),[[v,s(e).username]])]),a("div",M,[l(g,null,{default:n(()=>[...t[7]||(t[7]=[i("mdi-lock",-1)])]),_:1}),f(a("input",{type:"password",class:"input",required:"","onUpdate:modelValue":t[1]||(t[1]=o=>s(e).p=o)},null,512),[[v,s(e).p]])]),l(V,{to:"/sign-in/forget",class:"float-right text-decoration-none"},{default:n(()=>[...t[8]||(t[8]=[i(" 忘記密碼 ",-1)])]),_:1}),t[15]||(t[15]=a("br",null,null,-1)),a("div",h,[f(a("input",{id:"captcha",ref:"captchaRef",type:"text","onUpdate:modelValue":t[2]||(t[2]=o=>s(e).captchaCode=o),onInput:t[3]||(t[3]=o=>s(e).captchaCode=s(e).captchaCode.toUpperCase()),placeholder:"輸入驗證碼",class:"input input-bordered flex-grow-1",required:""},null,544),[[v,s(e).captchaCode]]),s(p)?(C(),A("img",{key:0,src:s(p),alt:"captcha",class:"ga-3",style:{"max-width":"150px"}},null,8,S)):D("",!0),l(g,{onClick:t[4]||(t[4]=k(o=>u(),["prevent"]))},{default:n(()=>[...t[9]||(t[9]=[i("mdi-refresh",-1)])]),_:1})]),l(x,{type:"submit",variant:"flat",color:"primary",block:"",class:"mt-5",loading:s(d)},{default:n(()=>[...t[10]||(t[10]=[i(" 登入 ",-1)])]),_:1},8,["loading"]),t[16]||(t[16]=a("div",{class:"or"},"或",-1)),a("div",T,[l(x,{color:"secondary",class:"or-item my-1"},{default:n(()=>[l(V,{to:"/sign-in/register",class:"text-decoration-none"},{default:n(()=>[...t[11]||(t[11]=[i(" 一般帳號註冊 ",-1)])]),_:1})]),_:1}),t[13]||(t[13]=a("div",{class:"ml-3"},null,-1)),l(x,{color:"success",class:"or-item my-1",onClick:t[5]||(t[5]=o=>b())},{default:n(()=>[...t[12]||(t[12]=[i(" AD帳號登入 ",-1)])]),_:1})])]),_:1})}}},Z=U(j,[["__scopeId","data-v-d2df8024"]]);export{Z as default};
