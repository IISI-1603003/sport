import{R as B,d as m,e as R,f as V,h as U,w as s,i as b,r as N,o as k,a as e,b as n,j as f,V as g,k as l,u as a,v,c as _,l as j,m as x}from"./index-LxXqDpAZ.js";import{a as q}from"./auth-S0SX_rcK.js";import{a as A}from"./functions-D4rvsJVY.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as E}from"./VForm-miy7jIfj.js";const M={class:"d-flex align-center ga-3"},S={class:"d-flex align-center ga-3"},T={class:"d-flex align-center ga-3"},$=["src"],z={class:"or-container"},F={__name:"index",setup(G){const{signIn:w}=q(),{executeRecaptcha:C}=B.useReCaptcha(),u=m(!1),r=m({username:"iisi-admin",p:"jju at e zv 456%TG"}),c=m(),i=m({guid:null,code:"1"});R(async()=>{y()});const y=async()=>{let{data:p}=await V.captcha(),t=btoa(new Uint8Array(p).reduce((d,o)=>d+String.fromCharCode(o),""));c.value=`data:image/png;base64,${t}`},I=async()=>{if(u.value)return;u.value=!0;const p=await C("signIn");V.signIn(r.value,{headers:{token:p,code:i.value.code}}).then(t=>{w(t.data)}).catch(A).finally(()=>{u.value=!1})};return(p,t)=>{const d=N("router-link");return k(),U(E,{onSubmit:b(I,["prevent"])},{default:s(()=>[t[13]||(t[13]=e("h2",{class:"text-center"},"登入",-1)),e("div",M,[n(g,null,{default:s(()=>[...t[5]||(t[5]=[l("mdi-account",-1)])]),_:1}),f(e("input",{type:"text",class:"input",required:"","onUpdate:modelValue":t[0]||(t[0]=o=>a(r).username=o)},null,512),[[v,a(r).username]])]),e("div",S,[n(g,null,{default:s(()=>[...t[6]||(t[6]=[l("mdi-lock",-1)])]),_:1}),f(e("input",{type:"password",class:"input",required:"","onUpdate:modelValue":t[1]||(t[1]=o=>a(r).p=o)},null,512),[[v,a(r).p]])]),n(d,{to:"/sign-in/forget",class:"float-right text-decoration-none"},{default:s(()=>[...t[7]||(t[7]=[l(" 忘記密碼 ",-1)])]),_:1}),t[14]||(t[14]=e("br",null,null,-1)),e("div",T,[f(e("input",{id:"captcha",ref:"captchaRef",type:"text","onUpdate:modelValue":t[2]||(t[2]=o=>a(i).code=o),onInput:t[3]||(t[3]=o=>a(i).code=a(i).code.toUpperCase()),placeholder:"輸入驗證碼",class:"input input-bordered flex-grow-1",required:""},null,544),[[v,a(i).code]]),a(c)?(k(),_("img",{key:0,src:a(c),alt:"captcha",class:"ga-3",style:{"max-width":"150px"}},null,8,$)):j("",!0),n(g,{onClick:t[4]||(t[4]=b(o=>y(),["prevent"]))},{default:s(()=>[...t[8]||(t[8]=[l("mdi-refresh",-1)])]),_:1})]),n(x,{type:"submit",variant:"flat",color:"primary",block:"",class:"mt-5",loading:a(u)},{default:s(()=>[...t[9]||(t[9]=[l(" 登入 ",-1)])]),_:1},8,["loading"]),t[15]||(t[15]=e("div",{class:"or"},"或",-1)),e("div",z,[n(x,{color:"secondary",class:"or-item my-1"},{default:s(()=>[n(d,{to:"/sign-in/register",class:"text-decoration-none"},{default:s(()=>[...t[10]||(t[10]=[l(" 一般帳號註冊 ",-1)])]),_:1})]),_:1}),t[12]||(t[12]=e("div",{class:"ml-3"},null,-1)),n(x,{color:"success",class:"or-item my-1"},{default:s(()=>[n(d,{to:"/sign-in/registerAD",class:"text-decoration-none"},{default:s(()=>[...t[11]||(t[11]=[l(" AD帳號註冊 ",-1)])]),_:1})]),_:1})])]),_:1})}}},O=D(F,[["__scopeId","data-v-cb525c87"]]);export{O as default};
