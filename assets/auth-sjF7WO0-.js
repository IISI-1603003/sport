import{j as l,l as u}from"./index-B7bTOmey.js";function S(){let o=null;const n=u(),i=e=>{localStorage.setItem("token",e.token),localStorage.setItem("token.time",new Date),n.push("/home/index")},c=()=>{o&&clearTimeout(o),localStorage.clear(),n.push("/sign-in")},s=()=>{var e=new Date(localStorage.getItem("token.time"));e&&(o=setTimeout(()=>{l.refresh().then(t=>{localStorage.setItem("token",t.data),localStorage.setItem("token.time",new Date),s()})},6e5-(new Date-e)))};return{signIn:i,signOut:c,refreshToken:s,switchSystem:e=>{l.switch({id:e}).then(t=>{localStorage.setItem("token",t.data),location.reload()})},user:()=>{var e=localStorage.getItem("token"),t=e.split(".")[1],r=t.replace(/-/g,"+").replace(/_/g,"/"),a=JSON.parse(window.atob(r)),t=e.split(".")[1],r=t.replace(/-/g,"+").replace(/_/g,"/"),a=JSON.parse(decodeURIComponent(atob(r).split("").map(function(m){return"%"+("00"+m.charCodeAt(0).toString(16)).slice(-2)}).join("")));return{nickname:a.nickname,username:a["http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name"],role:a["http://schemas.microsoft.com/ws/2008/06/identity/claims/role"]}}}}export{S as a};
