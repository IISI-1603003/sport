import{e as m,f as w,h as y,j as I,w as o,k as V,r as B,o as k,b as e,d as n,l as f,V as g,m as r,u as a,v,a as N,n as U,p as x}from"./index-C1z4PiDl.js";import{a as _}from"./auth-BbiJwDbP.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as D}from"./VForm-D0ZBKNoC.js";const G={class:"d-flex align-center ga-3"},M={class:"d-flex align-center ga-3"},$={class:"d-flex align-center ga-3"},h=["src"],A={class:"or-container"},S={__name:"index",setup(T){const{signIn:C}=_(),d=m(!1),s=m({username:"1144",p:"",captchaGuid:"",captchaCode:""}),u=m();w(async()=>{p()});const p=async()=>{let{data:i}=await y.captcha();s.value.captchaGuid=i.captchaGuid,u.value=`data:image/png;base64,${i.captchaImage}`},b=async()=>{d.value||(d.value=!0,y.signIn(s.value,{headers:{code:captcha.value.code}}).then(i=>{C(i.data)}).catch(()=>{alert("系統異常，請稍後再試。"),p()}).finally(()=>{d.value=!1}))};return(i,t)=>{const c=B("router-link");return k(),I(D,{onSubmit:V(b,["prevent"])},{default:o(()=>[t[13]||(t[13]=e("h2",{class:"text-center"},"登入",-1)),e("div",G,[n(g,null,{default:o(()=>[...t[5]||(t[5]=[r("mdi-account",-1)])]),_:1}),f(e("input",{type:"text",class:"input",required:"","onUpdate:modelValue":t[0]||(t[0]=l=>a(s).username=l)},null,512),[[v,a(s).username]])]),e("div",M,[n(g,null,{default:o(()=>[...t[6]||(t[6]=[r("mdi-lock",-1)])]),_:1}),f(e("input",{type:"password",class:"input",required:"","onUpdate:modelValue":t[1]||(t[1]=l=>a(s).p=l)},null,512),[[v,a(s).p]])]),n(c,{to:"/sign-in/forget",class:"float-right text-decoration-none"},{default:o(()=>[...t[7]||(t[7]=[r(" 忘記密碼 ",-1)])]),_:1}),t[14]||(t[14]=e("br",null,null,-1)),e("div",$,[f(e("input",{id:"captcha",ref:"captchaRef",type:"text","onUpdate:modelValue":t[2]||(t[2]=l=>a(s).captchaCode=l),onInput:t[3]||(t[3]=l=>a(s).captchaCode=a(s).captchaCode.toUpperCase()),placeholder:"輸入驗證碼",class:"input input-bordered flex-grow-1",required:""},null,544),[[v,a(s).captchaCode]]),a(u)?(k(),N("img",{key:0,src:a(u),alt:"captcha",class:"ga-3",style:{"max-width":"150px"}},null,8,h)):U("",!0),n(g,{onClick:t[4]||(t[4]=V(l=>p(),["prevent"]))},{default:o(()=>[...t[8]||(t[8]=[r("mdi-refresh",-1)])]),_:1})]),n(x,{type:"submit",variant:"flat",color:"primary",block:"",class:"mt-5",loading:a(d)},{default:o(()=>[...t[9]||(t[9]=[r(" 登入 ",-1)])]),_:1},8,["loading"]),t[15]||(t[15]=e("div",{class:"or"},"或",-1)),e("div",A,[n(x,{color:"secondary",class:"or-item my-1"},{default:o(()=>[n(c,{to:"/sign-in/register",class:"text-decoration-none"},{default:o(()=>[...t[10]||(t[10]=[r(" 一般帳號註冊 ",-1)])]),_:1})]),_:1}),t[12]||(t[12]=e("div",{class:"ml-3"},null,-1)),n(x,{color:"success",class:"or-item my-1"},{default:o(()=>[n(c,{to:"/sign-in/registerAD",class:"text-decoration-none"},{default:o(()=>[...t[11]||(t[11]=[r(" AD帳號註冊 ",-1)])]),_:1})]),_:1})])]),_:1})}}},z=q(S,[["__scopeId","data-v-86e8f63f"]]);export{z as default};
