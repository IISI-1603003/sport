{"version":3,"file":"tiredContainer-w82VHq1O.js","sources":["../../src/views/dashboard/physiology/components/indicatorBlock.vue","../../src/views/dashboard/physiology/components/tiredContainer.vue"],"sourcesContent":["<template>\r\n  <div class=\"big-number-bar-block\">\r\n    <div class=\"big-number\" :style=\"{ background: `linear-gradient(180deg, ${color}aa 0%, ${color} 100%)` }\">\r\n      <h4>{{ title }}</h4>\r\n      <h5>\r\n        {{ latestValue }}\r\n      </h5>\r\n    </div>\r\n    <div class=\"bars\">\r\n      <div class=\"bar-item\">\r\n        <span class=\"bar-value\" :style=\"{ color: bgColor }\">{{ latestValue }}</span>\r\n        <div class=\"bar\" :style=\"{ height: barHeights.latest + 'px', backgroundColor: '#3D8F9E' }\"></div>\r\n        <span class=\"q-number\">最新</span>\r\n      </div>\r\n      <div class=\"bar-item\">\r\n        <span class=\"bar-value\" :style=\"{ color: color }\">{{ quartiles.q2.toFixed(1) }}</span>\r\n        <div class=\"bar\" :style=\"{ height: barHeights.q2 + 'px', backgroundColor: color, opacity: 0.8 }\"></div>\r\n        <span class=\"q-number\">Q2</span>\r\n      </div>\r\n      <div class=\"bar-item\">\r\n        <span class=\"bar-value\" :style=\"{ color: color }\">{{ quartiles.q3.toFixed(1) }}</span>\r\n        <div class=\"bar\" :style=\"{ height: barHeights.q3 + 'px', backgroundColor: color, opacity: 0.8 }\"></div>\r\n        <span class=\"q-number\">Q3</span>\r\n      </div>\r\n      <div class=\"bar-item\">\r\n        <span class=\"bar-value\" :style=\"{ color: color }\">{{ quartiles.q4.toFixed(1) }}</span>\r\n        <div class=\"bar\" :style=\"{ height: barHeights.q4 + 'px', backgroundColor: color, opacity: 0.8 }\"></div>\r\n        <span class=\"q-number\">Q4</span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nconst props = defineProps({\r\n  title: String,\r\n  data: Array,\r\n  color: String,\r\n  bgColor: String,\r\n  baseline: {\r\n    type: Number,\r\n    default: 0\r\n  }\r\n})\r\nconst latestValue = computed(() => {\r\n  if (props.data.length > 0)\r\n    return props.data[props.data.length - 1]\r\n  return 0\r\n})\r\n\r\nconst quartiles = computed(() => {\r\n  if (props.data.length === 0) return { q2: 0, q3: 0, q4: 0 }\r\n\r\n  const sorted = [...props.data].sort((a, b) => a - b)\r\n  const len = sorted.length\r\n\r\n  const q2Index = Math.floor(len * 0.5)\r\n  const q3Index = Math.floor(len * 0.75)\r\n\r\n  return {\r\n    q2: sorted[q2Index] || 0,\r\n    q3: sorted[q3Index] || 0,\r\n    q4: sorted[len - 1] || 0\r\n  }\r\n})\r\n\r\nconst barHeights = computed(() => {\r\n  const values = [latestValue.value, quartiles.value.q2, quartiles.value.q3, quartiles.value.q4]\r\n  const maxValue = Math.max(...values)\r\n  const minValue = props.baseline || Math.min(...values.filter(v => v > 0))\r\n  const range = maxValue - minValue\r\n  const maxHeight = 100\r\n\r\n  if (range === 0) {\r\n    return { latest: maxHeight, q2: maxHeight, q3: maxHeight, q4: maxHeight }\r\n  }\r\n\r\n  return {\r\n    latest: ((latestValue.value - minValue) / range) * maxHeight,\r\n    q2: ((quartiles.value.q2 - minValue) / range) * maxHeight,\r\n    q3: ((quartiles.value.q3 - minValue) / range) * maxHeight,\r\n    q4: ((quartiles.value.q4 - minValue) / range) * maxHeight\r\n  }\r\n})\r\n</script>\r\n","<template>\r\n    <p v-show=\"showWarning\" class=\"text-warning text-body-2 ml-1\">Q2~Q4測驗次數不足8次，僅供參考</p>\r\n    <div class=\"indicator-blocks\">\r\n      <indicatorBlock \r\n        title=\"血紅蛋白(Hb)\" \r\n        :data=\"hbData\" \r\n        :baseline=\"hbBaseline\"\r\n        color=\"#ff6b9d\"\r\n      />\r\n      <indicatorBlock \r\n        title=\"肌酸激酶(CK)\" \r\n        :data=\"ckData\"\r\n        :baseline=\"ckBaseline\"\r\n        color=\"#a855f7\"\r\n      />\r\n      <indicatorBlock \r\n        title=\"血中尿素氮(BUN)\" \r\n        :data=\"bunData\"\r\n        :baseline=\"bunBaseline\"\r\n        color=\"#3b82f6\"\r\n      />\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport indicatorBlock from './indicatorBlock.vue'\r\n\r\nconst responseTired = inject('responseTired')\r\n\r\nconst showWarning = computed(() => {\r\n  return responseTired.value.length < 8\r\n})\r\n\r\nconst hbData = computed(() => {\r\n  return responseTired.value.map(d => d.hb)\r\n})\r\n\r\nconst hbBaseline = computed(() => {\r\n  const values = hbData.value.filter(v => v != null)\r\n  if (values.length === 0) return 0\r\n  const min = Math.min(...values)\r\n  return Math.floor(min * 0.9) // 最小值的 90%\r\n})\r\n\r\nconst ckData = computed(() => {\r\n  return responseTired.value.map(d => d.ck)\r\n})\r\n\r\nconst ckBaseline = computed(() => {\r\n  const values = ckData.value.filter(v => v != null)\r\n  if (values.length === 0) return 0\r\n  const min = Math.min(...values)\r\n  return Math.floor(min * 0.9)\r\n})\r\n\r\nconst bunData = computed(() => {\r\n  return responseTired.value.map(d => d.bun)\r\n})\r\n\r\nconst bunBaseline = computed(() => {\r\n  const values = bunData.value.filter(v => v != null)\r\n  if (values.length === 0) return 0\r\n  const min = Math.min(...values)\r\n  return Math.floor(min * 0.9)\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.indicator-blocks {\r\n  display: flex;\r\n  gap: 4px;\r\n  justify-content: space-around;\r\n  margin-bottom: 36px;\r\n}\r\n</style>\r\n"],"names":["props","__props","latestValue","computed","quartiles","sorted","a","b","len","q2Index","q3Index","barHeights","values","maxValue","minValue","v","range","maxHeight","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_normalizeStyle","_unref","_hoisted_2","_hoisted_3","_cache","_hoisted_4","_hoisted_5","_hoisted_6","responseTired","inject","showWarning","hbData","d","hbBaseline","min","ckData","ckBaseline","bunData","bunBaseline","_createVNode","indicatorBlock"],"mappings":"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"}