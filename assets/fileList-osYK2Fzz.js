import{J as De,K as we,L as Fe,M as Te,N as oe,z as D,O as X,f as h,P as Ie,Q as xe,E as Be,S as Se,e as n,y as G,d as T,F as _,T as Pe,U as _e,V as Re,h as ze,b as j,w as o,u as y,n as L,o as b,j as U,x as J,m as g,s as Ae,t as x,_ as Ee}from"./index-DpGNt5hz.js";import{_ as $e}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as Z,a as P}from"./VRow-B4U4oohL.js";import{V as Me}from"./VDialog-BZsxHTut.js";import{b as ee,V as Ne,a as je,c as Le}from"./VCard--Nq_kkEf.js";import{V as Ue,a as te}from"./VBreadcrumbs-Dy6k1bag.js";import{u as Oe,V as le}from"./index-309Juuoi.js";import{u as Ye,b as ae,c as ne,m as He,d as Ge,e as Je,V as Ke}from"./VTextField-4xziC6WH.js";import{V as F}from"./VBtn-BZiUtPCt.js";import{V as Qe}from"./VDataTable-ijuuF-K0.js";import{a as ie}from"./VSelect--AdMTAnE.js";import{V as qe}from"./VCheckbox-CMyCipUd.js";import{f as We}from"./forwardRefs-C-p-xPEC.js";import{V as Xe}from"./VSpacer-_60UwJ_9.js";/* empty css              */import"./VOverlay-Dvz7xzcU.js";import"./scopeId-7Q84Te7R.js";import"./index-9b9l0r-k.js";import"./VAvatar-CQ5nYGH2.js";import"./VList-9JfJBPQA.js";function Ze(){function e(p){return[...p.dataTransfer?.items??[]].filter(r=>r.kind==="file").map(r=>r.webkitGetAsEntry()).filter(Boolean).length>0||[...p.dataTransfer?.files??[]].length>0}async function c(p){const d=[],r=[...p.dataTransfer?.items??[]].filter(u=>u.kind==="file").map(u=>u.webkitGetAsEntry()).filter(Boolean);if(r.length)for(const u of r){const s=await se(u,re(".",u));d.push(...s.map(f=>f.file))}else d.push(...p.dataTransfer?.files??[]);return d}return{handleDrop:c,hasFilesOrFolders:e}}function se(e){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return new Promise((p,d)=>{e.isFile?e.file(u=>p([{file:u,path:c}]),d):e.isDirectory&&e.createReader().readEntries(async u=>{const s=[];for(const f of u)s.push(...await se(f,re(c,f)));p(s)})})}function re(e,c){return c.isDirectory?`${e}/${c.name}`:e}const et=we({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(Number(e))},...Ge({prependIcon:"$file"}),modelValue:{type:[Array,Object],default:e=>e.multiple?[]:null,validator:e=>oe(e).every(c=>c!=null&&typeof c=="object")},...He({clearable:!0})},"VFileInput"),tt=De()({name:"VFileInput",inheritAttrs:!1,props:et(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,c){let{attrs:p,emit:d,slots:r}=c;const{t:u}=Fe(),s=Te(e,"modelValue",e.modelValue,l=>oe(l),l=>!e.multiple&&Array.isArray(l)?l[0]:l),{isFocused:f,focus:m,blur:B}=Ye(e),R=D(()=>typeof e.showSize!="boolean"?e.showSize:void 0),z=D(()=>(s.value??[]).reduce((l,k)=>{let{size:w=0}=k;return l+w},0)),A=D(()=>X(z.value,R.value)),S=D(()=>(s.value??[]).map(l=>{const{name:k="",size:w=0}=l;return e.showSize?`${k} (${X(w,R.value)})`:k})),O=D(()=>{const l=s.value?.length??0;return e.showSize?u(e.counterSizeString,l,A.value):u(e.counterString,l)}),E=h(),$=h(),v=h(),Y=Ie(()=>f.value||e.active),M=D(()=>["plain","underlined"].includes(e.variant)),I=xe(!1),{handleDrop:N,hasFilesOrFolders:a}=Ze();function t(){v.value!==document.activeElement&&v.value?.focus(),f.value||m()}function i(l){v.value?.click()}function V(l){d("mousedown:control",l)}function K(l){v.value?.click(),d("click:control",l)}function ue(l){l.stopPropagation(),t(),_e(()=>{s.value=[],Re(e["onClick:clear"],l)})}function de(l){l.preventDefault(),l.stopImmediatePropagation(),I.value=!0}function ce(l){l.preventDefault(),I.value=!1}async function fe(l){if(l.preventDefault(),l.stopImmediatePropagation(),I.value=!1,!v.value||!a(l))return;const k=new DataTransfer;for(const w of await N(l))k.items.add(w);v.value.files=k.files,v.value.dispatchEvent(new Event("change",{bubbles:!0}))}return Be(s,l=>{(!Array.isArray(l)||!l.length)&&v.value&&(v.value.value="")}),Oe(()=>{const l=!!(r.counter||e.counter),k=!!(l||r.details),[w,me]=Se(p),{modelValue:it,...pe}=ae.filterProps(e),ve={...ne.filterProps(e),"onClick:clear":ue};return n(ae,G({ref:E,modelValue:e.multiple?s.value:s.value[0],class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-file-input--dragging":I.value,"v-file-input--hide":e.hideInput,"v-input--plain-underlined":M.value},e.class],style:e.style,"onClick:prepend":i},w,pe,{centerAffix:!M.value,focused:f.value}),{...r,default:H=>{let{id:ye,isDisabled:Q,isDirty:q,isReadonly:W,isValid:ge,hasDetails:Ve}=H;return n(ne,G({ref:$,prependIcon:e.prependIcon,onMousedown:V,onClick:K,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},ve,{id:ye.value,active:Y.value||q.value,dirty:q.value||e.dirty,disabled:Q.value,focused:f.value,details:Ve.value,error:ge.value===!1,onDragover:de,onDrop:fe}),{...r,default:ke=>{let{props:{class:he,...Ce}}=ke;return T(_,null,[T("input",G({ref:v,type:"file",readonly:W.value,disabled:Q.value,multiple:e.multiple,name:e.name,onClick:C=>{C.stopPropagation(),W.value&&C.preventDefault(),t()},onChange:C=>{if(!C.target)return;const be=C.target;s.value=[...be.files??[]]},onDragleave:ce,onFocus:t,onBlur:B},Ce,me),null),T("div",{class:Pe(he)},[!!s.value?.length&&!e.hideInput&&(r.selection?r.selection({fileNames:S.value,totalBytes:z.value,totalBytesReadable:A.value}):e.chips?S.value.map(C=>n(ie,{key:C,size:"small",text:C},null)):S.value.join(", "))])])}})},details:k?H=>T(_,null,[r.details?.(H),l&&T(_,null,[T("span",null,null),n(Je,{active:!!s.value?.length,value:O.value,disabled:e.disabled},r.counter)])]):void 0})}),We({},E,$,v)}}),lt={class:"d-flex align-center"},at=["onClick"],nt={key:1},ot={__name:"fileList",setup(e){const c=[{id:1,name:"BASE_CD(資訊處)",type:"folder",updateTime:"2025-09-30 12:23"},{id:2,name:"BU(實務處)",type:"folder",updateTime:"2025-10-01 08:45"},{id:3,name:"ED(企發處)",type:"folder",updateTime:"2025-10-02 14:30"}],p={1:[{id:11,name:"生電組成.csv",type:"csv",status:"待處理",updateTime:"2025-09-30 12:23"},{id:12,name:"醫男監任.csv",type:"csv",status:"處理中",updateTime:"2025-10-01 08:45"},{id:13,name:"度為畫表.csv",type:"csv",status:"異常資料",updateTime:"2025-10-02 14:30"},{id:14,name:"訓練量分析.csv",type:"csv",status:"已處理",updateTime:"2025-10-03 09:15"},{id:15,name:"心率學異.csv",type:"csv",status:"已處理",updateTime:"2025-10-04 13:00"},{id:16,name:"運動日誌.csv",type:"csv",status:"已處理",updateTime:"2025-10-05 11:45"},{id:17,name:"身體狀態評估.csv",type:"csv",status:"已處理",updateTime:"2025-10-06 16:10"},{id:18,name:"營養攝取記錄.csv",type:"csv",status:"已處理",updateTime:"2025-10-07 10:30"}]},d=h(c),r=h(!1),u=h(""),s=h(!1),f=h([]),m=h([]),B=h([]),R=D(()=>{const a=[{title:"序號",key:"id",sortable:!0,width:"120px"},{title:"檔案",key:"name",sortable:!0}];return m.value.length>0&&a.push({title:"處理狀態",key:"status",sortable:!0,width:"120px"}),a.push({title:"異動時間",key:"updateTime",sortable:!0,width:"200px"},{title:"編輯",key:"edit",sortable:!1,width:"80px",align:"center"},{title:"刪除",key:"delete",sortable:!1,width:"80px",align:"center"}),a}),z=D(()=>{let a=d.value;return u.value&&(a=a.filter(t=>t.name.toLowerCase().includes(u.value.toLowerCase()))),a}),A=a=>({folder:"mdi-folder",csv:"mdi-file-delimited",image:"mdi-file-image",document:"mdi-file-document",video:"mdi-file-video",audio:"mdi-file-music",archive:"mdi-file-archive"})[a]||"mdi-file",S=a=>({待處理:"orange",處理中:"blue",已處理:"green",異常資料:"red"})[a]||"grey",O=a=>{m.value.push(a.name),p[a.id]?d.value=p[a.id]:d.value=[]},E=()=>{m.value=[],d.value=c},$=a=>{m.value=m.value.slice(0,a+1)},v=()=>{m.value.length>0&&(m.value.pop(),m.value.length===0&&(d.value=c))},Y=a=>{console.log("編輯檔案:",a)},M=async a=>{try{d.value=d.value.filter(t=>t.id!==a.id),console.log("刪除檔案:",a)}catch(t){console.error("刪除檔案失敗:",t)}},I=async()=>{if(!(!f.value||f.value.length===0))try{s.value=!1,f.value=[],N()}catch(a){console.error("上傳檔案失敗:",a)}},N=async()=>{r.value=!0;try{console.log("載入檔案清單")}catch(a){console.error("載入檔案清單失敗:",a)}finally{r.value=!1}};return ze(()=>{N()}),(a,t)=>(b(),j(_,null,[n(Z,null,{default:o(()=>[n(P,{cols:"12"},{default:o(()=>[n(ee,null,{default:o(()=>[y(m).length>0?(b(),U(Ue,{key:0,class:"pa-0 mb-4"},{default:o(()=>[n(te,{onClick:E},{default:o(()=>[n(le,null,{default:o(()=>[...t[6]||(t[6]=[g("mdi-home",-1)])]),_:1}),t[7]||(t[7]=g(" 根目錄 ",-1))]),_:1}),(b(!0),j(_,null,Ae(y(m),(i,V)=>(b(),U(te,{key:V,onClick:K=>$(V),disabled:V===y(m).length-1},{default:o(()=>[g(x(i),1)]),_:2},1032,["onClick","disabled"]))),128))]),_:1})):J("",!0),n(Z,null,{default:o(()=>[n(P,{cols:"12",md:"6"},{default:o(()=>[n(Ke,{modelValue:y(u),"onUpdate:modelValue":t[0]||(t[0]=i=>L(u)?u.value=i:null),"prepend-inner-icon":"mdi-magnify",label:"搜尋",variant:"outlined",density:"compact","append-inner-icon":"mdi-magnify"},null,8,["modelValue"])]),_:1}),n(P,{cols:"12",md:"2"},{default:o(()=>[n(F,{color:"primary",variant:"outlined"},{default:o(()=>[...t[8]||(t[8]=[g("搜尋",-1)])]),_:1})]),_:1}),y(m).length>0?(b(),U(P,{key:0,cols:"12",md:"2"},{default:o(()=>[n(F,{color:"secondary",variant:"outlined",onClick:v},{default:o(()=>[...t[9]||(t[9]=[g(" 返回上層 ",-1)])]),_:1})]),_:1})):J("",!0),n(P,{cols:"12",md:y(m).length>0?2:4,class:"d-flex justify-end"},{default:o(()=>[n(F,{color:"success","prepend-icon":"mdi-plus",onClick:t[1]||(t[1]=i=>s.value=!0)},{default:o(()=>[...t[10]||(t[10]=[g(" 新增 ",-1)])]),_:1})]),_:1},8,["md"])]),_:1}),n(Qe,{headers:y(R),items:y(z),loading:y(r),"item-key":"id",class:"rounded-lg elevation-1",style:{border:"1px solid rgba(0, 0, 0, 0.12)"}},{"item.selected":o(({item:i})=>[i.type!=="folder"?(b(),U(qe,{key:0,modelValue:y(B),"onUpdate:modelValue":t[2]||(t[2]=V=>L(B)?B.value=V:null),value:i.id,"hide-details":""},null,8,["modelValue","value"])):J("",!0)]),"item.name":o(({item:i})=>[T("div",lt,[n(le,{class:"me-2",color:"primary"},{default:o(()=>[g(x(A(i.type)),1)]),_:2},1024),i.type==="folder"?(b(),j("span",{key:0,class:"text-primary cursor-pointer",onClick:V=>O(i)},x(i.name),9,at)):(b(),j("span",nt,x(i.name),1))])]),"item.status":o(({item:i})=>[n(ie,{color:S(i.status),size:"small",variant:"flat"},{default:o(()=>[g(x(i.status),1)]),_:2},1032,["color"])]),"item.updateTime":o(({item:i})=>[g(x(("dayjs"in a?a.dayjs:y(Ee))(i.updateTime).format("YYYY-MM-DD HH:mm")),1)]),"item.edit":o(({item:i})=>[n(F,{icon:"mdi-pencil",size:"small",variant:"text",color:"primary",onClick:V=>Y(i)},null,8,["onClick"])]),"item.delete":o(({item:i})=>[n(F,{icon:"mdi-delete",size:"small",variant:"text",color:"error",onClick:V=>M(i)},null,8,["onClick"])]),_:1},8,["headers","items","loading"])]),_:1})]),_:1})]),_:1}),n(Me,{modelValue:y(s),"onUpdate:modelValue":t[5]||(t[5]=i=>L(s)?s.value=i:null),"max-width":"500px"},{default:o(()=>[n(Ne,null,{default:o(()=>[n(je,null,{default:o(()=>[...t[11]||(t[11]=[g("上傳檔案",-1)])]),_:1}),n(ee,null,{default:o(()=>[n(tt,{modelValue:y(f),"onUpdate:modelValue":t[3]||(t[3]=i=>L(f)?f.value=i:null),label:"選擇檔案",multiple:"",variant:"outlined","prepend-icon":"mdi-paperclip"},null,8,["modelValue"])]),_:1}),n(Le,null,{default:o(()=>[n(Xe),n(F,{text:"",onClick:t[4]||(t[4]=i=>s.value=!1)},{default:o(()=>[...t[12]||(t[12]=[g("取消",-1)])]),_:1}),n(F,{color:"primary",onClick:I},{default:o(()=>[...t[13]||(t[13]=[g("上傳",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},It=$e(ot,[["__scopeId","data-v-f562f64d"]]);export{It as default};
