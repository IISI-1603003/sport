import{i as J,S as K}from"./index-BHis0WDM.js";import{P as W,C as j,_ as Q}from"./noData-v2r9YJOc.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{J as D,G as v,b,o as u,d as t,z as _,u as f,F as N,y as z,ay as B,e as i,n as I,w as g,m as x,V as L,az as X,a6 as Z,f as w,M as A,h as tt,P as et,aA as lt,j as V,q as E,D as st,aB as nt,p as at,aC as ot,aD as rt,L as S}from"./index-D5t5jYde.js";import{R as it}from"./radarChart-Du88OXtQ.js";import{a as U,b as q,V as G}from"./VCard-BKJyQOUW.js";import{V as T}from"./VAlert-CWeyQpWv.js";import{V as dt}from"./VDialog-C_CscYl0.js";import{V as ct,a as R}from"./VRow-kfv7cwZP.js";import"./VSnackbar-Rdmky861.js";import"./layout-CIUhZj6z.js";/* empty css              */const ut={class:"header-section pb-3"},gt={class:"skill-name"},pt={class:"average-score"},ft={class:"indicators-grid"},mt={class:"indicator-name"},ht={class:"indicator-score"},bt={__name:"skillBlock",props:{skillName:{type:String,required:!0}},emits:["indicator-click"],setup(y,{emit:a}){const d=D("latestDatas"),o=y,e=v(()=>{if(Object.keys(d.value).length>0||d.value.date){const l=W[o.skillName],s={...l,indicators:{}};for(const p in l.indicators)s.indicators[p]=d.value[p];return s}return{bgColor:"red",btnColor:"red",indicators:{xxx:0},name:"基礎"}}),m=v(()=>{if(!e.value||!e.value.indicators||Object.keys(e.value.indicators).length===0)return-20;const l=Object.values(e.value.indicators).filter(p=>p>0);return l.reduce((p,r)=>p+r,0)/l.length});return(l,s)=>(u(),b("div",{class:"skill-container",style:B("background:"+f(e).bgColor),elevation:"2"},[t("div",ut,[t("div",gt,_(y.skillName),1),t("div",pt,_(f(m).toFixed(1)),1)]),t("div",ft,[(u(!0),b(N,null,z(f(e).indicators,(p,r)=>(u(),b("div",{key:r,class:"indicator-btn",style:B("background:"+f(e).btnColor)},[t("div",mt,_(r),1),t("div",ht,_(p),1)],4))),128))])],4))}},O=P(bt,[["__scopeId","data-v-4f9e88fc"]]),yt={class:"d-flex ga-2"},vt={class:"right-up"},_t={__name:"indicatorContainer",setup(y){const a=D("latestDatas");return v(()=>!a.datas||a.datas.length===0?!1:a.datas.some(d=>d.自動化!==void 0||d.腦波圖)),(d,o)=>(u(),b("div",yt,[t("div",vt,"最近測得日期"+_(f(a).date),1),i(O,{"skill-name":"基礎"}),i(O,{"skill-name":"身心"}),i(O,{"skill-name":"認知"})]))}},wt={key:0,class:"brain-images"},xt={class:"brain-image-header"},kt={class:"brain-image-date"},Dt={key:0,class:"brain-image-score"},Vt={class:"brain-image-container"},$t={class:"d-flex align-center justify-center fill-height"},Ct={key:0,class:"no-brain-data"},St={__name:"brainImages",props:{response:{type:Object,default:()=>({userid:"",datas:[]})},selectedDates:{type:Array,default:()=>[]}},setup(y){const a=y,d=v(()=>a.response?.datas?a.response.datas.filter(l=>{const s=l.腦波圖&&l.腦波圖.trim()!=="",p=a.selectedDates.length===0||a.selectedDates.includes(l.date);return s&&p}).map(l=>({date:l.date,imagePath:l.腦波圖,score:l.indicators?.自動化||null})).sort((l,s)=>new Date(s.date)-new Date(l.date)):[]),o=v(()=>d.value.length>0),e=m=>{console.warn("腦波圖片載入失敗:",m.target.src),m.target.style.display="none"};return(m,l)=>f(o)?(u(),b("div",wt,[i(G,{class:"brain-images-card",elevation:"2"},{default:g(()=>[i(U,{class:"brain-images-title"},{default:g(()=>[i(L,{class:"mr-2",color:"purple"},{default:g(()=>[...l[0]||(l[0]=[x("mdi-brain",-1)])]),_:1}),l[1]||(l[1]=x(" 腦波測量結果 ",-1))]),_:1}),i(q,{class:"brain-images-content"},{default:g(()=>[(u(!0),b(N,null,z(f(d),s=>(u(),b("div",{key:s.date,class:"brain-image-item"},[t("div",xt,[t("span",kt,_(s.date),1),s.score?(u(),b("span",Dt," 分數: "+_(s.score),1)):I("",!0)]),t("div",Vt,[i(X,{src:s.imagePath,alt:`腦波圖 - ${s.date}`,class:"brain-image","aspect-ratio":16/9,cover:"",onError:e},{placeholder:g(()=>[t("div",$t,[i(Z,{color:"purple",indeterminate:""})])]),_:1},8,["src","alt"])])]))),128)),f(d).length===0?(u(),b("div",Ct,[i(L,{size:"48",color:"grey-lighten-1"},{default:g(()=>[...l[2]||(l[2]=[x("mdi-image-off",-1)])]),_:1}),l[3]||(l[3]=t("p",{class:"text-grey-lighten-1 mt-2"},"目前沒有腦波圖片資料",-1))])):I("",!0)]),_:1})]),_:1})])):I("",!0)}},It=P(St,[["__scopeId","data-v-bfc65f6f"]]),Lt={class:"mt-8"},Nt={__name:"trendChart",setup(y){const a=D("responsePsychology"),d=w(null);let o=null;const e=v(()=>a.value&&a.value.length>0),m=()=>!a.value||a.value.length===0?[]:Object.keys(a.value[0]).filter(r=>r!=="date"),l=()=>{if(!a.value||a.value.length===0)return[];const r=m(),c=[...a.value].sort((n,h)=>new Date(n.date)-new Date(h.date));return r.map((n,h)=>{const $=c.map(C=>[C.date,C[n]||0]),k=j[h%j.length];return{name:n,type:"line",data:$,smooth:!0,symbol:"circle",symbolSize:6,lineStyle:{width:2,color:k},itemStyle:{color:k}}})},s=()=>{d.value&&(o=J(d.value),p())},p=()=>{if(!o){console.log("Chart instance not initialized");return}if(!e.value){console.log("No Data"),o.clear(),o.setOption({title:{text:"No Data",left:"center",top:"middle",textStyle:{color:"#999",fontSize:20}}});return}const r=l(),c=m(),n={tooltip:{trigger:"axis",formatter:function(h){if(!h||h.length===0)return"";let k=`<strong>${h[0].axisValue}</strong><br/>`;return h.forEach(C=>{const{seriesName:M,value:F,color:H}=C,Y=F[1];k+=`<span style="display: inline-block; width: 10px; height: 10px; background-color: ${H}; border-radius: 50%; margin-right: 5px;"></span>${M}: <strong>${Y}</strong><br/>`}),k}},legend:{data:c,top:0,right:20},grid:{left:20,right:20,bottom:40,top:66},xAxis:{type:"category",boundaryGap:!1,axisLine:{lineStyle:{color:"#999"}},axisLabel:{color:"#666"},splitLine:{show:!0,lineStyle:{color:"#e5e5e5",type:"dashed"}}},yAxis:{type:"value",min:0,max:5,interval:1,axisLine:{show:!1},axisLabel:{color:"#666",fontSize:16},splitLine:{lineStyle:{color:"#e5e5e5",type:"dashed"}}},series:r};o.setOption(n,!0)};return A(a.value,()=>{o&&e.value&&p()},{deep:!0}),tt(()=>{et(()=>{s()});const r=()=>{o&&o.resize()};window.addEventListener("resize",r),lt(()=>{o&&(o.dispose(),o=null),window.removeEventListener("resize",r)})}),(r,c)=>(u(),b("div",Lt,[c[0]||(c[0]=t("h3",null,"各向度趨勢分析",-1)),t("div",{ref_key:"chartContainer",ref:d,class:"chart-container"},null,512)]))}},Ot=P(Nt,[["__scopeId","data-v-96906b32"]]),Bt={class:"mt-8 position-relative"},Pt={key:0,class:"text-body-1 mb-2"},zt={key:1,class:"text-body-1 mb-2"},jt={class:"pl-6"},Tt={__name:"recommendationPanel",setup(y){const a=D("responsePsychology"),d=D("allDates"),o=w(""),e=v(()=>{if(!o.value||!a.value)return null;const l=a.value.find(r=>r.date===o.value);if(!l)return null;const s=Object.entries(l).filter(([r])=>r!=="date"&&r!=="自動化").map(([,r])=>r);return s.length===0?null:s.reduce((r,c)=>r+c,0)/s.length}),m=v(()=>e.value===null?[]:e.value<3.6?["請檢視你的微目標(Process Goals)，專注於「今天能做到的事」，而非最終結果，能有效建立信心和掌控感。","練習傾聽身體的聲音與放鬆技巧，不僅是看見，還要感覺、聽見成功的技術動作，強化肌肉與心靈的連結。","運用有力量的自我對話，例如：「我只有現在」、「Nice」，在突發狀況下，中斷負面思維的循環。建立例行動作幫助自己從比賽結果轉向任務執行過程。"]:["充滿意義的生活，繼續保持自信跟積極的投入，也要記得休息與心理恢復唷！","已具備良好的情緒調節能力，賽前調整很有一套唷！","頭腦清楚，戰術明確，專注於致勝關鍵的行動！"]);return A(d,l=>{l.length>0&&(o.value=l[0])},{immediate:!0}),(l,s)=>(u(),b("div",Bt,[s[4]||(s[4]=t("h3",null,"心理指標建議",-1)),i(st,{modelValue:f(o),"onUpdate:modelValue":s[0]||(s[0]=p=>E(o)?o.value=p:null),items:f(d),label:"選擇查看日期",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-calendar","max-width":"180",class:"right-up","hide-details":"",style:{top:"-1px"}},null,8,["modelValue","items"]),f(o)&&f(e)!==null?(u(),V(T,{key:0,prominent:"",class:"mt-6",style:B({backgroundColor:f(e)<3.6?"rgba(255, 235, 59, .3)":"rgba(76, 175, 80, .6)"})},{default:g(()=>[f(e)<3.6?(u(),b("p",Pt,[...s[1]||(s[1]=[t("strong",null,"建議改善方向：",-1)])])):(u(),b("p",zt,[...s[2]||(s[2]=[t("strong",null,"保持優秀表現：",-1)])])),t("ul",jt,[(u(!0),b(N,null,z(f(m),(p,r)=>(u(),b("li",{key:r,class:"mb-2"},_(p),1))),128))])]),_:1},8,["style"])):(u(),V(T,{key:1,type:"info",variant:"outlined",class:"text-center"},{default:g(()=>[...s[3]||(s[3]=[x(" 請選擇日期以查看建議資訊 ",-1)])]),_:1}))]))}},Rt={__name:"desc",props:{modelValue:{type:Boolean,default:!1},modelModifiers:{}},emits:["update:modelValue"],setup(y){const a=nt(y,"modelValue"),d=()=>{a.value=!1};return(o,e)=>(u(),V(dt,{modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=m=>a.value=m),"max-width":"1200"},{default:g(()=>[i(G,null,{default:g(()=>[i(U,{class:"d-flex justify-space-between align-center bg-grey-lighten-3"},{default:g(()=>[e[1]||(e[1]=t("span",null,"運動心理技能說明",-1)),i(at,{icon:"mdi-close",variant:"text",onClick:d})]),_:1}),i(q,{class:"pa-2"},{default:g(()=>[i(ot,{density:"comfortable"},{default:g(()=>[...e[2]||(e[2]=[t("tbody",null,[t("tr",{class:"bg-yellow-lighten-2"},[t("td",{colspan:"3",class:"pa-3 text-center font-weight-bold"},"基礎心理技能")]),t("tr",{class:"bg-yellow-lighten-4"},[t("td",{class:"text-center font-weight-bold",style:{width:"15%"}},"技能名稱"),t("td",{class:"text-center font-weight-bold",style:{width:"30%"}},"定義"),t("td",{class:"text-left font-weight-bold",style:{width:"55%"}},"內容")]),t("tr",null,[t("td",{class:"bg-yellow-lighten-4 text-center font-weight-bold",rowspan:"2"},"目標設定"),t("td",{class:"text-center",rowspan:"2"},"建立可以提供方向和動機的各種目標"),t("td",null,"1.我設定目標來幫助每天的表現")]),t("tr",null,[t("td",null,"2.我們的目標使我更有努力動力")]),t("tr",null,[t("td",{class:"bg-yellow-lighten-4 text-center font-weight-bold",rowspan:"2"},"自信心"),t("td",{class:"text-center",rowspan:"2"},"對於完成目標的把握程度"),t("td",null,"3.我相信我擁有可以達到個人目標的能力")]),t("tr",null,[t("td",null,"4.我對於自己的表現很有自信")]),t("tr",null,[t("td",{class:"bg-yellow-lighten-4 text-center font-weight-bold",rowspan:"2"},"承諾"),t("td",{class:"text-center",rowspan:"2"},"對於目標的渴望和強度"),t("td",null,"5.我願意嘗試其他各種的休閒活動來幫助運動目標")]),t("tr",null,[t("td",null,"6.當我在訓練中遇到困難時，我會盡努力改變表現")]),t("tr",{class:"bg-orange-lighten-2"},[t("td",{colspan:"3",class:"pa-3 text-center font-weight-bold"},"涉及控制身體覺醒的心理技巧")]),t("tr",{class:"bg-orange-lighten-4"},[t("td",{class:"text-center font-weight-bold",style:{width:"15%"}},"技能名稱"),t("td",{class:"text-center font-weight-bold",style:{width:"30%"}},"定義"),t("td",{class:"text-left font-weight-bold",style:{width:"55%"}},"內容")]),t("tr",null,[t("td",{class:"bg-orange-lighten-4 text-center font-weight-bold",rowspan:"2"},"壓力反應"),t("td",{class:"text-center",rowspan:"2"},"對身體所承受需求的生理反應"),t("td",null,"7.我覺得在比賽中，觀眾多會讓我感到緊張")]),t("tr",null,[t("td",null,"8.我在練習時的比賽表現比正式比賽時還要好")]),t("tr",null,[t("td",{class:"bg-orange-lighten-4 text-center font-weight-bold",rowspan:"2"},"害怕控制"),t("td",{class:"text-center",rowspan:"2"},"具備應對害怕或擔憂情境的能力"),t("td",null,"9.我怕輸")]),t("tr",null,[t("td",null,"10.我對運動事項的恐懼讓我覺得訓練是艱難的")]),t("tr",null,[t("td",{class:"bg-orange-lighten-4 text-center font-weight-bold",rowspan:"3"},"放鬆"),t("td",{class:"text-center",rowspan:"3"},"身體放鬆、降低肌肉緊繃、心率和焦慮的過程，幫助控制注意力"),t("td",null,"11.我覺得放鬆是容易的")]),t("tr",null,[t("td",null,"12.在比賽的關鍵時刻我可以有效的放鬆")]),t("tr",null,[t("td",null,"13.我可以在比賽中太過於放鬆時增加我的衝勁")]),t("tr",null,[t("td",{class:"bg-orange-lighten-4 text-center font-weight-bold"},"活化/激發"),t("td",{class:"text-center"},"在需要高度感知的情況下，能使身體和心理感官提升的過程"),t("td",null,"14.我可以輕易的激發自己到達我最佳表現所需的理想水準")]),t("tr",{class:"bg-purple-lighten-2"},[t("td",{colspan:"3",class:"pa-3 text-center font-weight-bold"},"認知技能")]),t("tr",{class:"bg-purple-lighten-4"},[t("td",{class:"text-center font-weight-bold",style:{width:"15%"}},"技能名稱"),t("td",{class:"text-center font-weight-bold",style:{width:"30%"}},"定義"),t("td",{class:"text-left font-weight-bold",style:{width:"55%"}},"內容")]),t("tr",null,[t("td",{class:"bg-purple-lighten-4 text-center font-weight-bold",rowspan:"2"},"專注"),t("td",{class:"text-center",rowspan:"2"},"個人將注意力引導和保持在特定線索上的能力"),t("td",null,"15.我在日常訓練當中會失去專注力")]),t("tr",null,[t("td",null,"16.要我到一個有效的策略，讓我在比賽中維持專注是困難的")]),t("tr",null,[t("td",{class:"bg-purple-lighten-4 text-center font-weight-bold",rowspan:"2"},"再專注"),t("td",{class:"text-center",rowspan:"2"},"是在突如其來的分心情況下，將注意力重新集中到任務上的能力"),t("td",null,"17.在訓練或比賽當中，我老是想著失誤")]),t("tr",null,[t("td",null,"18.當我比賽時，一個失誤經常導致更多的失誤")]),t("tr",null,[t("td",{class:"bg-purple-lighten-4 text-center font-weight-bold",rowspan:"2"},"意象"),t("td",{class:"text-center",rowspan:"2"},"運用影像和感官體驗不同情境的能力"),t("td",null,"19.我覺得要改變我腦海裡的影像是容易的")]),t("tr",null,[t("td",null,"20.我可以在腦海影像當中感覺到動作")]),t("tr",null,[t("td",{class:"bg-purple-lighten-4 text-center font-weight-bold",rowspan:"2"},"心智練習"),t("td",{class:"text-center",rowspan:"2"},"在不做實際動作的情況下，在腦中進行技術、比賽、戰術排練的能力"),t("td",null,"21.我會針對比賽的關鍵情境作心智/意象練習")]),t("tr",null,[t("td",null,"22.我用我最佳表現時的狀態在心中反覆演練")]),t("tr",null,[t("td",{class:"bg-purple-lighten-4 text-center font-weight-bold",rowspan:"2"},"競賽計畫"),t("td",{class:"text-center",rowspan:"2"},"反思和發展計劃的過程，這些計劃將在比賽前、比賽中和比賽後引導思想、情感和行為"),t("td",null,"23.我規劃一些習慣動作在比賽中執行")]),t("tr",null,[t("td",null,"24.我有準備提示小字眼(cue cord)這種計劃，讓我能夠在比賽中提醒自己")])],-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},At={key:0,class:"flex pa-4"},Et={class:"box bg-white"},Ut={class:"box bg-white"},te={__name:"no1",setup(y){const a=w(""),d=w([]),o=w(""),e=w([]),m=w(!1),l=v(()=>e.value.length===0?{}:[...e.value].sort((n,h)=>new Date(h.date)-new Date(n.date))[0]||{}),s=v(()=>{if(e.value.length===0)return null;const c=e.value.find(n=>n.腦波圖);return c?{date:c.date,score:c.自動化||null,imagePath:c.腦波圖}:null}),p=async c=>{try{const n=await rt.getPsychologyIndicator(a.value,c);n.data?e.value=n.data:(console.error("API 回傳資料格式錯誤:",n),e.value=[])}catch(n){console.error("獲取數據失敗:",n),e.value=[]}},r=async c=>{const n=c.queryString;a.value=c.selectedUserId,await p(n),e.value.length>0?(o.value="",d.value=e.value.map(h=>h.date).sort((h,$)=>new Date($)-new Date(h))):o.value=`${c.selectedUserName}在所選日期範圍內${c.sDate}~${c.eDate}無資料。`};return S("latestDatas",l),S("allDates",d),S("responsePsychology",e),S("brainData",s),(c,n)=>(u(),b(N,null,[i(K,{onSearch:r},{icon:g(()=>[i(L,null,{default:g(()=>[...n[2]||(n[2]=[x("mdi-mother-heart",-1)])]),_:1})]),title:g(()=>[n[4]||(n[4]=x(" 心理監控",-1)),i(L,{class:"text-h6",onClick:n[0]||(n[0]=h=>m.value=!0),style:{cursor:"pointer"}},{default:g(()=>[...n[3]||(n[3]=[x("mdi-alert-circle-outline",-1)])]),_:1})]),dashboardTypes:g(()=>[...n[5]||(n[5]=[t("select",{class:"select"},[t("option",null,"疲勞監控與身體組成分析")],-1)])]),_:1}),f(e)?.length>0?(u(),b("section",At,[i(ct,null,{default:g(()=>[i(R,{cols:"6"},{default:g(()=>[t("div",Et,[n[6]||(n[6]=t("h3",null,"關鍵指標分數",-1)),i(_t),i(Ot)])]),_:1}),i(R,{cols:"6"},{default:g(()=>[t("div",Ut,[i(it),f(s)?(u(),V(It,{key:0})):I("",!0),i(Tt)])]),_:1})]),_:1})])):(u(),V(Q,{key:1,message:f(o)},null,8,["message"])),i(Rt,{modelValue:f(m),"onUpdate:modelValue":n[1]||(n[1]=h=>E(m)?m.value=h:null)},null,8,["modelValue"])],64))}};export{te as default};
