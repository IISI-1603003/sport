import{C as m,c as g,o as x,a as t,t as y,k as _,u as i,aR as f,G as B,l as I,b as p,d as q,e as $,ac as S,K as D,j as M,a1 as N,w as h,bd as H,n as U,aZ as A,V as F,I as K}from"./index-LxXqDpAZ.js";import{i as Q,S as R}from"./index-IKijMvwc.js";import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V,a as w}from"./VRow-jUgFmOIp.js";import{V as O}from"./VAlert-4ehXHZuE.js";/* empty css              */const j={class:"indicator-block"},L={class:"unit"},P={class:"bars"},T={class:"bar-item"},Z={class:"bar-item"},z={class:"bar-item"},E={class:"bar-item"},G={__name:"indicatorBlock",props:{title:String,data:Array,color:String,baseline:{type:Number,default:0}},setup(u){const s=u,b=m(()=>s.data.length===0?0:s.data[s.data.length-1]),n=m(()=>{if(s.data.length===0)return{q2:0,q3:0,q4:0};const o=[...s.data].sort((a,d)=>a-d),l=o.length,r=Math.floor(l*.5),e=Math.floor(l*.75);return{q2:o[r]||0,q3:o[e]||0,q4:o[l-1]||0}}),c=m(()=>{const o=[b.value,n.value.q2,n.value.q3,n.value.q4],l=Math.max(...o),r=s.baseline||Math.min(...o.filter(d=>d>0)),e=l-r,a=100;return e===0?{latest:a,q2:a,q3:a,q4:a}:{latest:(b.value-r)/e*a,q2:(n.value.q2-r)/e*a,q3:(n.value.q3-r)/e*a,q4:(n.value.q4-r)/e*a}});return(o,l)=>(x(),g("div",j,[t("div",{class:"big-number",style:f({background:`linear-gradient(180deg, ${u.color}aa 0%, ${u.color} 100%)`})},[t("h4",null,y(u.title),1),t("h5",null,[_(y(i(b).toFixed(1))+" ",1),t("span",L,y(o.unit),1)])],4),t("div",P,[t("div",T,[t("span",{class:"bar-value",style:f({color:u.color})},y(i(b).toFixed(1)),5),t("div",{class:"bar",style:f({height:i(c).latest+"px",backgroundColor:u.color})},null,4),l[0]||(l[0]=t("span",{class:"x"},"最新",-1))]),t("div",Z,[t("span",{class:"bar-value",style:f({color:u.color})},y(i(n).q2.toFixed(1)),5),t("div",{class:"bar",style:f({height:i(c).q2+"px",backgroundColor:u.color,opacity:.8})},null,4),l[1]||(l[1]=t("span",{class:"x"},"Q2",-1))]),t("div",z,[t("span",{class:"bar-value",style:f({color:u.color})},y(i(n).q3.toFixed(1)),5),t("div",{class:"bar",style:f({height:i(c).q3+"px",backgroundColor:u.color,opacity:.8})},null,4),l[2]||(l[2]=t("span",{class:"x"},"Q3",-1))]),t("div",E,[t("span",{class:"bar-value",style:f({color:u.color})},y(i(n).q4.toFixed(1)),5),t("div",{class:"bar",style:f({height:i(c).q4+"px",backgroundColor:u.color,opacity:.8})},null,4),l[3]||(l[3]=t("span",{class:"x"},"Q4",-1))])])]))}},k=C(G,[["__scopeId","data-v-708f0aa3"]]),W={class:"box bg-white"},J={key:0,class:"text-warning text-body-2 ml-1"},X={class:"indicator-blocks"},Y={__name:"hcbContainer",setup(u){const s=B("responseData"),b=m(()=>s.value.length<8),n=m(()=>s.value.map(a=>a.hb)),c=m(()=>{const a=n.value.filter(v=>v!=null);if(a.length===0)return 0;const d=Math.min(...a);return Math.floor(d*.9)}),o=m(()=>s.value.map(a=>a.ck)),l=m(()=>{const a=o.value.filter(v=>v!=null);if(a.length===0)return 0;const d=Math.min(...a);return Math.floor(d*.9)}),r=m(()=>s.value.map(a=>a.bun)),e=m(()=>{const a=r.value.filter(v=>v!=null);if(a.length===0)return 0;const d=Math.min(...a);return Math.floor(d*.9)});return(a,d)=>(x(),g("div",W,[d[0]||(d[0]=t("h2",null,"疲勞監控",-1)),i(b)?(x(),g("p",J,"Q2~Q4測驗次數不足8次，僅供參考")):I("",!0),t("div",X,[p(k,{title:"血紅蛋白(Hb)",data:i(n),baseline:i(c),color:"#ff6b9d"},null,8,["data","baseline"]),p(k,{title:"肌酸激酶(CK)",data:i(o),baseline:i(l),color:"#a855f7"},null,8,["data","baseline"]),p(k,{title:"血中尿素氮(BUN)",data:i(r),baseline:i(e),color:"#3b82f6"},null,8,["data","baseline"])])]))}},tt=C(Y,[["__scopeId","data-v-794bf867"]]),et={class:"box bg-white mt-4"},at={__name:"hcbChart",setup(u){const s=B("responseData"),b=q(null);let n=null;const c=m(()=>s.value&&s.value.length>0),o=m(()=>{if(!c.value)return null;const r=s.value.map(v=>v.date),e=s.value.map(v=>v.hb),a=s.value.map(v=>v.bun),d=s.value.map(v=>v.ck);return{tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{data:["Hb","BUN","CK"],top:0},grid:{left:"3%",right:"4%",bottom:"10%",containLabel:!0},xAxis:{type:"category",data:r,axisLabel:{rotate:45}},yAxis:[{type:"value",name:"Hb/BUN",position:"left"},{type:"value",name:"CK",position:"right"}],dataZoom:[{type:"inside",start:0,end:100},{type:"slider",start:0,end:100}],series:[{name:"Hb",type:"line",data:e,smooth:!0,itemStyle:{color:"#ff6b9d"},lineStyle:{color:"#ff6b9d"}},{name:"BUN",type:"line",data:a,smooth:!0,itemStyle:{color:"#3b82f6"},lineStyle:{color:"#3b82f6"}},{name:"CK",type:"bar",data:d,yAxisIndex:1,itemStyle:{color:"#a855f7"}}]}}),l=()=>{!b.value||!c.value||(n&&n.dispose(),n=Q(b.value),n.setOption(o.value))};return $(async()=>{await S(),l()}),D(o,()=>{n&&o.value?n.setOption(o.value):l()}),D(()=>s.value,async()=>{await S(),l()},{deep:!0}),(r,e)=>(x(),g("div",et,[e[0]||(e[0]=t("h3",null,"歷次檢測",-1)),M(t("div",{ref_key:"chartRef",ref:b,style:{width:"100%",height:"400px"}},null,512),[[N,c.value]])]))}},st={key:0,class:"pa-4"},lt={key:1,class:"pa-4"},nt={__name:"no1",setup(u){const s=q("user123"),b=q("2025-01-01"),n=q("2025-12-31"),c=q([]);K("responseData",c);const o=async()=>{try{const r=`sDate=${b.value}&eDate=${n.value}`,e=await H.getIndicators(s.value,r);c.value=e.data||[]}catch(r){console.error("獲取數據失敗:",r),c.value=[]}},l=()=>{o()};return D(s,()=>{o()}),$(()=>{o()}),(r,e)=>(x(),g("div",null,[p(R,{onSearch:l},{icon:h(()=>[p(F,null,{default:h(()=>[...e[1]||(e[1]=[_("mdi-heart-pulse",-1)])]),_:1})]),title:h(()=>[...e[2]||(e[2]=[_(" 生理監控 ",-1)])]),default:h(()=>[e[4]||(e[4]=t("select",null,[t("option",null,"疲勞監控與身體組成分析")],-1)),e[5]||(e[5]=t("select",null,[t("option",null,"網球隊")],-1)),M(t("select",{"onUpdate:modelValue":e[0]||(e[0]=a=>U(s)?s.value=a:null)},[...e[3]||(e[3]=[t("option",{value:"user123"},"測試用戶1 (user123)",-1),t("option",{value:"user456"},"測試用戶2 (user456)",-1)])],512),[[A,i(s)]])]),_:1}),i(c).length>0?(x(),g("section",st,[p(V,null,{default:h(()=>[p(w,{cols:"6"},{default:h(()=>[p(tt),p(at)]),_:1})]),_:1}),p(V,null,{default:h(()=>[p(w,{cols:"6"})]),_:1})])):(x(),g("section",lt,[p(O,{type:"info"},{default:h(()=>[...e[6]||(e[6]=[_("暫無數據",-1)])]),_:1})]))]))}},vt=C(nt,[["__scopeId","data-v-c80a73ff"]]);export{vt as default};
