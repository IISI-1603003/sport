import{I as $,c as g,o as c,a as t,x as u,u as p,d as h,E as w,e as L,j as N,bw as R,n as U,F as B,t as M,bx as z,O as T,L as E,ax as O,l as q,k as F,v as H,b as _,h as j,w as y,aA as W,V as K,K as C}from"./index-Dfwmr34z.js";import{i as Z,S as G}from"./index-CdZNqDWi.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{C as S,_ as J}from"./noData-BlCceoAc.js";import{V as Q,a as A}from"./VRow-BxR3TJ0q.js";import"./VSnackbar-Byw-mOFw.js";import"./layout-BY2do3K7.js";import"./VCard-BqK8UscN.js";/* empty css              */const X={class:"box bg-white"},Y={class:"card-container"},P={class:"big-number-card"},tt={class:"big-number-card"},et={__name:"bigNumberContainer",setup(k){const i=$("平均流汗率"),e=$("建議補充食鹽量");return(l,o)=>(c(),g("div",X,[o[3]||(o[3]=t("h2",null,"建議飲水量",-1)),t("div",Y,[t("div",P,[o[0]||(o[0]=t("h4",null,"流汗率(ml/min)",-1)),t("h5",null,u(p(i)||"0.0"),1)]),t("div",tt,[o[1]||(o[1]=t("h4",null,"建議補充食鹽量(g/L)",-1)),t("h5",null,u(p(e)||"0.0"),1)]),o[2]||(o[2]=t("div",{class:"big-number-card"},[t("h4",null,"每日飲水量"),t("h5",null,"2540")],-1))])]))}},nt=D(et,[["__scopeId","data-v-82afde06"]]),at={class:"box bg-white"},st={class:"input-group"},lt=["value"],ot={class:"mt-4"},rt={class:"bar-labels-top"},dt={__name:"trainBar",emits:["update:duration"],setup(k,{emit:i}){const e=i;let l=h(60);const o=$("平均每小時建議飲水量"),f=w(()=>{const s=[];for(let d=30;d<=480;d+=30)s.push(d);return s}),r=w(()=>l.value/60*o.value),n=()=>{e("update:duration",l.value)};return L(()=>{e("update:duration",l.value)}),(s,d)=>(c(),g("div",at,[t("div",st,[d[1]||(d[1]=t("label",null,"訓練時間:",-1)),N(t("select",{"onUpdate:modelValue":d[0]||(d[0]=b=>U(l)?l.value=b:l=b),onChange:n},[(c(!0),g(B,null,M(p(f),b=>(c(),g("option",{key:b,value:b},u(b)+" 分鐘 ",9,lt))),128))],544),[[R,p(l)]])]),d[4]||(d[4]=t("h5",null,"建議飲水標準(ml)",-1)),t("div",ot,[t("div",rt,[d[2]||(d[2]=t("span",null,"0",-1)),t("span",null,"　"+u((p(r)*.4).toFixed(0)),1),t("span",null,"　"+u((p(r)*.8).toFixed(0)),1),t("span",null,u(p(r)?.toFixed(0)),1)]),d[3]||(d[3]=z('<div class="progress-bar" data-v-cf1c4220><div class="segment red" data-v-cf1c4220></div><div class="segment yellow" data-v-cf1c4220></div><div class="segment green" data-v-cf1c4220></div></div><div class="bar-labels-bottom" data-v-cf1c4220><span data-v-cf1c4220>0%</span><span data-v-cf1c4220>　40%</span><span data-v-cf1c4220>　80%</span><span data-v-cf1c4220>100%</span></div>',2))])]))}},ut=D(dt,[["__scopeId","data-v-cf1c4220"]]),it={key:0},pt={__name:"waterChart",setup(k){const i=$("response"),e=h(null);let l=null;const o=()=>{l?.resize()},f=()=>{if(!e.value||!i.value?.datas?.length)return;l||(l=Z(e.value));const r=i.value.datas,n=r.map(x=>x.date),s=r.map(x=>x.飲水量),d=r.map(x=>{const V=x.訓練時間/60,v=x.每小時建議飲水量||0,a=x.飲水量||1;return Number((V*v/a*100).toFixed(2))}),b={color:S,tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{data:["飲水量","喝水達成率"],top:"top",left:"center"},xAxis:{type:"category",data:n,axisLabel:{rotate:45}},yAxis:[{type:"value",name:"飲水量 (ml)",position:"left"},{type:"value",name:"喝水達成率 (%)",position:"right"}],series:[{name:"飲水量",type:"bar",yAxisIndex:0,data:s,itemStyle:{color:S[0]},label:{show:!0,position:"top"}},{name:"喝水達成率",type:"line",yAxisIndex:1,data:d,itemStyle:{color:S[1]},lineStyle:{width:2},label:{show:!0,position:"top",color:S[1]}}],dataZoom:[{type:"slider",start:0,end:100},{type:"inside",start:0,end:100}],grid:{left:"2%",right:"2%",bottom:"35%"}};l.setOption(b)};return L(()=>{T(()=>{f()}),window.addEventListener("resize",o)}),E(()=>i.value,()=>{T(()=>{f()})},{deep:!0}),O(()=>{l?.dispose(),window.removeEventListener("resize",o)}),(r,n)=>(c(),g("div",{ref_key:"chartContainer",ref:e,style:{height:"300px","min-width":"600px"}},[p(i)?.datas?.length?q("",!0):(c(),g("p",it,"暫無數據"))],512))}},vt={class:"1box 1bg-white"},ct={class:"table-container"},mt={key:0},gt={key:1,class:"no-data"},ft={__name:"waterTable",setup(k){const i=$("response"),e=$("可容許脫水率"),l=()=>{(e.value<0||e.value>100)&&(e.value=Math.max(0,Math.min(100,e.value)))},o=w(()=>i.value?.datas?.length?[...i.value.datas].sort((r,n)=>new Date(n.date)-new Date(r.date)):[]),f=r=>r.流汗率*r.訓練時間-r.訓練前體重*1e3*e.value/100;return(r,n)=>(c(),g("div",vt,[t("div",ct,[p(i)?.datas?.length?(c(),g("table",mt,[t("thead",null,[t("tr",null,[n[2]||(n[2]=t("th",null,"測量日期",-1)),n[3]||(n[3]=t("th",null,"訓練前體重(g)",-1)),n[4]||(n[4]=t("th",null,"訓練後體重(g)",-1)),n[5]||(n[5]=t("th",null,"脫水率",-1)),n[6]||(n[6]=t("th",null,"飲水量(ml)",-1)),n[7]||(n[7]=t("th",null,"排尿量(ml)",-1)),n[8]||(n[8]=t("th",null,"總流失量(ml)",-1)),n[9]||(n[9]=t("th",null,"訓練時間(min)",-1)),n[10]||(n[10]=t("th",null,"流汗率(ml/min)",-1)),t("th",null,[n[1]||(n[1]=F("可容許脫水率 ",-1)),N(t("input",{type:"number",class:"dehydration-input","onUpdate:modelValue":n[0]||(n[0]=s=>U(e)?e.value=s:null),min:"0",max:"100",step:"0.1",onBlur:l},null,544),[[H,p(e),void 0,{number:!0}]])]),n[11]||(n[11]=t("th",null,"每小時建議飲水量(ml)",-1))])]),t("tbody",null,[(c(!0),g(B,null,M(p(o),s=>(c(),g("tr",{key:s.date},[t("td",null,u(s.date),1),t("td",null,u(s.訓練前體重*1e3),1),t("td",null,u(s.訓練後體重*1e3),1),t("td",null,u(s.脫水率)+"%",1),t("td",null,u(s.飲水量),1),t("td",null,u(s.排尿量),1),t("td",null,u(s.總流失量),1),t("td",null,u(s.訓練時間),1),t("td",null,u(s.流汗率.toFixed(2)),1),t("td",null,u(p(e)),1),t("td",null,u(f(s).toFixed(2)),1)]))),128))])])):(c(),g("p",gt,"暫無數據"))])]))}},bt=D(ft,[["__scopeId","data-v-8b6a902f"]]),xt={key:0,class:"pa-4"},_t={class:"box bg-white mt-4"},Ft={__name:"water",setup(k){const i=h(""),e=h(null),l=h(2),o=h(60),f=h("a"),r=h(""),n=async v=>{try{const a=v.queryString+`&itemCode=${encodeURIComponent(f.value)}`;i.value=v.selectedUserId;const m=await W.getNutritionIndicatorWater(i.value,a);m.data?.datas?.length&&(m.data.datas=m.data.datas.map(I=>({...I,每小時建議飲水量:I.流汗率*I.訓練時間-I.訓練前體重*1e3*l.value/100}))),e.value=m.data,e.value.datas.length==0&&(r.value=`${v.selectedUserName}在所選日期範圍內${v.sDate}~${v.eDate}無資料。`)}catch(a){console.error("API 調用失敗:",a)}},s=v=>{o.value=v},d=w(()=>e.value?.datas?.length?(e.value.datas.reduce((a,m)=>a+m.流汗率,0)/e.value.datas.length).toFixed(1):0),b=w(()=>e.value?.datas?.length?e.value.datas.reduce((a,m)=>a+m.總流失量/m.訓練時間,0)/e.value.datas.length/1e3*o.value:0),x=w(()=>e.value?.datas?.length?(e.value.datas.reduce((a,m)=>a+m.每小時建議飲水量,0)/e.value.datas.length).toFixed(0):0),V=w(()=>!e.value?.局部的汗鈉濃度||!b.value?0:((.57*e.value.局部的汗鈉濃度+11.05)*b.value*22.99*.00254).toFixed(1));return C("response",e),C("平均流汗率",d),C("建議補充食鹽量",V),C("可容許脫水率",l),C("平均每小時建議飲水量",x),(v,a)=>(c(),g(B,null,[_(G,{onSearch:n},{icon:y(()=>[_(K,null,{default:y(()=>[...a[1]||(a[1]=[F("mdi-water",-1)])]),_:1})]),title:y(()=>[...a[2]||(a[2]=[F(" 營養水分監控 ",-1)])]),dashboardTypes:y(()=>[...a[3]||(a[3]=[t("select",{class:"select"},[t("option",null,"疲勞監控與身體組成分析")],-1)])]),more:y(()=>[N(t("select",{"onUpdate:modelValue":a[0]||(a[0]=m=>U(f)?f.value=m:null),class:"select",title:"訓練類型"},[...a[4]||(a[4]=[t("option",{value:"a"},"專項體能",-1),t("option",{value:"b"},"一般體能",-1),t("option",{value:"c"},"重量訓練",-1),t("option",{value:"d"},"自助練習",-1)])],512),[[R,p(f)]])]),_:1}),p(e)?.datas?.length?(c(),g("section",xt,[_(Q,null,{default:y(()=>[_(A,{cols:"12",md:"7"},{default:y(()=>[_(nt)]),_:1}),_(A,{cols:"12",md:"5"},{default:y(()=>[_(ut,{"onUpdate:duration":s})]),_:1})]),_:1}),t("div",_t,[a[5]||(a[5]=t("h2",{class:"mb-4 w-75"},"每日飲水量趨勢",-1)),t("div",null,[_(pt),_(bt)])])])):(c(),j(J,{key:1,message:p(r)},null,8,["message"]))],64))}};export{Ft as default};
