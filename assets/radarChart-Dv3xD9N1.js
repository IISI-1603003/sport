import{i as B}from"./index-VhC7DcMB.js";import{P as A,C as b}from"./noData-DELPtDEJ.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{K as v,e as w,H as f,N as K,f as M,Q as P,aR as $,a as G,o as H,d as y,b as j,w as g,p as _,m as z,u as F,q as U,C as Y,F as q}from"./index-C1z4PiDl.js";const Q={__name:"radarChart",setup(W){const m=v("allDates"),o=v("responsePsychology"),h=v("hasBrainData"),i={INDICATOR:"indicator",SKILL:"skill"},l=w(i.INDICATOR),S=f(()=>{var t=["基礎","身心","認知"];return h.value&&t.push("腦波"),t}),C=f(()=>{var t=["目標設定","自信心","承諾","意象","心理練習","再專注","專注","比賽計畫","活化","放鬆","恐懼控制","壓力反應"];return h.value&&t.push("自動化"),t}),R=f(()=>o?.value&&o?.value.length>0&&m.value.length>0),x=w(null);let a=null;const L=f(()=>l.value===i.SKILL?S.value.map(t=>({name:t,max:5})):C.value.map(t=>({name:t,max:5}))),N=()=>!o.value||o.value.length===0?(console.log("no responsePsychology"),[]):[...m.value].sort((e,r)=>new Date(e)-new Date(r)).map((e,r)=>{const c=o.value.find(n=>n.date===e);if(!c)return null;let u=[];l.value===i.SKILL?u=S.value.map(n=>{const p=A[n],d=Object.keys(p.indicators);if(d.length===0)return 0;const k=d.reduce((V,T)=>V+(c[T]||0),0);return Math.round(k/d.length*100)/100}):u=C.value.map(n=>c[n]||0);const s=b[r%b.length];return{name:e,value:u,itemStyle:{color:s},lineStyle:{color:s,width:2},areaStyle:{color:s,opacity:.15},symbol:"circle",symbolSize:6}}).filter(e=>e!==null),D=()=>{if(!a){console.log("Chart instance not initialized");return}if(!R.value){console.log("No Data"),a.clear(),a.setOption({title:{text:"沒有資料",left:"center",top:"middle",textStyle:{color:"#999",fontSize:20}}});return}const t={tooltip:{trigger:"item",backgroundColor:"rgba(50, 50, 50, 0.9)",borderColor:"#ccc",borderWidth:1,textStyle:{color:"#fff",fontSize:12},formatter:function(e){const{name:r,value:c,color:u}=e;let s=`<div style="margin-bottom: 8px;"><strong style="color: ${u};">${r}</strong></div>`;return L.value.forEach((n,p)=>{const d=c[p];s+=`<div style="margin: 2px 0;">${n.name}: <strong>${d}</strong></div>`}),s}},legend:{data:m.value,top:10,textStyle:{fontSize:14},itemGap:20,selectedMode:"multiple"},radar:{indicator:L.value,center:["50%","55%"],radius:"70%",axisName:{fontSize:12,color:"#666"},splitLine:{lineStyle:{color:"#e0e0e0"}},axisLine:{lineStyle:{color:"#ccc"}},splitArea:{show:!0,areaStyle:{color:["rgba(250,250,250,0.1)","rgba(200,200,200,0.1)"]}}},series:[{type:"radar",data:N(),symbol:"circle",symbolSize:6,lineStyle:{width:2}}]};a.setOption(t,!0)},O=()=>{a=B(x.value),D()};K([()=>o?.value,m,l],()=>{a&&o.value&&D()},{deep:!0});const I=()=>{a&&a.resize()};return M(()=>{P(()=>{O()}),window.addEventListener("resize",I)}),$(()=>{a&&(a.dispose(),a=null),window.removeEventListener("resize",I)}),(t,e)=>(H(),G(q,null,[y(Y,{modelValue:F(l),"onUpdate:modelValue":e[0]||(e[0]=r=>U(l)?l.value=r:null),mandatory:"",color:"primary",border:""},{default:g(()=>[y(_,{value:i.INDICATOR,size:"small"},{default:g(()=>[...e[1]||(e[1]=[z(" 向度 ",-1)])]),_:1},8,["value"]),y(_,{value:i.SKILL,size:"small"},{default:g(()=>[...e[2]||(e[2]=[z(" 技能 ",-1)])]),_:1},8,["value"])]),_:1},8,["modelValue"]),j("div",{ref_key:"chartContainer",ref:x,class:"chart-container"},null,512)],64))}},te=E(Q,[["__scopeId","data-v-9887fe64"]]);export{te as R};
