import{R as C,f as p,h as R,i as V,j as B,w as a,k,r as U,o as _,d as e,e as n,l as c,V as f,m as l,u as s,v as g,n as v}from"./index-DsLPX3BI.js";import{a as q}from"./auth-DiOr9vnD.js";import{a as D}from"./functions-D4rvsJVY.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as N}from"./VForm-DeEXvWx8.js";const $={class:"d-flex align-center ga-3"},A={class:"d-flex align-center ga-3"},E={class:"d-flex align-center ga-3"},S=["src"],T={class:"or-container"},j={__name:"index",setup(F){const{signIn:I}=q(),{executeRecaptcha:w}=C.useReCaptcha(),u=p(!1),r=p({username:"iisi-admin",p:""}),x=p(),i=p({guid:null,code:null});R(async()=>{y()});const y=async()=>{let{data:d}=await V.getCaptchaImage();i.value.guid=d.captchaGuid,x.value=`data:image/png;base64,${d.captchaImage}`},b=async()=>{if(u.value)return;u.value=!0;const d=await w("signIn");V.signIn(r.value,{headers:{token:d}}).then(t=>{I(t.data)}).catch(D).finally(()=>{u.value=!1})};return(d,t)=>{const m=U("router-link");return _(),B(N,{onSubmit:k(b,["prevent"])},{default:a(()=>[t[13]||(t[13]=e("h2",{class:"text-center"},"登入",-1)),e("div",$,[n(f,null,{default:a(()=>[...t[5]||(t[5]=[l("mdi-account",-1)])]),_:1}),c(e("input",{type:"text",class:"input",required:"","onUpdate:modelValue":t[0]||(t[0]=o=>s(r).username=o)},null,512),[[g,s(r).username]])]),e("div",A,[n(f,null,{default:a(()=>[...t[6]||(t[6]=[l("mdi-lock",-1)])]),_:1}),c(e("input",{type:"password",class:"input",required:"","onUpdate:modelValue":t[1]||(t[1]=o=>s(r).p=o)},null,512),[[g,s(r).p]])]),n(m,{to:"/sign-in/forget",class:"float-right text-decoration-none"},{default:a(()=>[...t[7]||(t[7]=[l(" 忘記密碼 ",-1)])]),_:1}),t[14]||(t[14]=e("br",null,null,-1)),e("div",E,[c(e("input",{id:"captcha",ref:"captchaRef",type:"text","onUpdate:modelValue":t[2]||(t[2]=o=>s(i).code=o),onInput:t[3]||(t[3]=o=>s(i).code=s(i).code.toUpperCase()),placeholder:"輸入驗證碼",class:"input input-bordered flex-grow-1",required:""},null,544),[[g,s(i).code]]),e("img",{src:s(x),alt:"captcha",class:"ga-3"},null,8,S),n(f,{onClick:t[4]||(t[4]=k(o=>y(),["prevent"]))},{default:a(()=>[...t[8]||(t[8]=[l("mdi-refresh",-1)])]),_:1})]),n(v,{type:"submit",variant:"flat",color:"primary",block:"",class:"mt-5",loading:s(u)},{default:a(()=>[...t[9]||(t[9]=[l(" 登入 ",-1)])]),_:1},8,["loading"]),t[15]||(t[15]=e("div",{class:"or"},"或",-1)),e("div",T,[n(v,{color:"secondary",class:"or-item my-1"},{default:a(()=>[n(m,{to:"/sign-in/register",class:"text-decoration-none"},{default:a(()=>[...t[10]||(t[10]=[l(" 一般帳號註冊 ",-1)])]),_:1})]),_:1}),t[12]||(t[12]=e("div",{class:"ml-3"},null,-1)),n(v,{color:"success",class:"or-item my-1"},{default:a(()=>[n(m,{to:"/sign-in/registerAD",class:"text-decoration-none"},{default:a(()=>[...t[11]||(t[11]=[l(" AD帳號註冊 ",-1)])]),_:1})]),_:1})])]),_:1})}}},K=M(j,[["__scopeId","data-v-8098a0e8"]]);export{K as default};
