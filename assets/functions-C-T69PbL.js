import{f as l,h as _,B as g,b as f,o as v}from"./index-Bz3xUFWk.js";const j={__name:"functions",emits:["change"],setup(k,{expose:d,emit:p}){const u=p,o=l([]),i=l(),m=()=>{$(i.value).jstree("close_all"),$(i.value).jstree("deselect_all")},h=a=>o.value=a,r=a=>{let s=[],t=[],e=[],c=[];a.forEach(n=>{switch(n.type){case"menu":s.push(n.id);break;case"page":t.push(n.id);break;case"operation":e.push(n.id);break;case"api":c.push(n.id);break}}),u("change",{menus:s,pages:t,operations:e,apis:c})};return _(()=>{g.functions().then(a=>{$(i.value).jstree({plugins:["types","checkbox"],core:{data:a.data,themes:{name:"default"}},sort:function(s,t){let e={menu:1,page:2,api:3};return e[this.get_type(s)]>e[this.get_type(t)]?1:-1},types:{"#":{valid_children:["menu"]},menu:{valid_children:["menu","page"],icon:"mdi mdi-folder text-warning"},page:{valid_children:["page","operation","api"],icon:"mdi mdi-file text-primary"},operation:{valid_children:["api"],icon:"mdi mdi-cog text-success"},api:{valid_children:[],icon:"mdi mdi-link text-red"}}}).on("ready.jstree",(s,t)=>{let e=t.instance.get_checked(!0);r(e);let c=$(i.value).jstree(!0);o.value.forEach(n=>{c.select_node(n)})}).on("select_node.jstree deselect_node.jstree",(s,t)=>{let e=t.instance.get_checked(!0);r(e)})})}),d({deselectAll:m,selection:h}),(a,s)=>(v(),f("div",{ref_key:"root",ref:i},null,512))}};export{j as _};
