import{K as $,H as w,a as c,o as p,b as t,z as u,u as i,e as h,f as A,l as I,bM as L,q as U,F as B,y as R,bN as z,Q as T,N as q,aR as H,n as E,m as F,v as O,d as _,j,w as y,aU as W,V as K,M as C}from"./index-mfJgyZhT.js";import{i as Q,S as Z,_ as G}from"./noData-evY8XkKz.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{C as V}from"./helperConst-DwQEMs-4.js";import{V as J,a as M}from"./VRow-Ds-4XX6a.js";import"./VSnackbar-CYkhAcvC.js";import"./layout-DtmpDlug.js";import"./VCard-C1ZeJHUw.js";/* empty css              */const X={class:"box bg-white"},Y={class:"card-container"},P={class:"big-number-card"},tt={class:"big-number-card"},et={class:"big-number-card"},nt={__name:"bigNumberContainer",setup(N){const r=$("response"),e=$("平均流汗率"),o=$("建議補充食鹽量"),f=w(()=>!r||!r.value||!r.value.datas||r.value.datas.length===0?0:(r.value.datas[0].訓練前體重*30).toFixed(0));return(m,s)=>(p(),c("div",X,[s[3]||(s[3]=t("h2",null,"建議飲水量",-1)),t("div",Y,[t("div",P,[s[0]||(s[0]=t("h4",null,"流汗率(ml/min)",-1)),t("h5",null,u(i(e)||"0.0"),1)]),t("div",tt,[s[1]||(s[1]=t("h4",null,"建議補充食鹽量(g/L)",-1)),t("h5",null,u(i(o)||"0.0"),1)]),t("div",et,[s[2]||(s[2]=t("h4",null,"每日飲水量",-1)),t("h5",null,u(i(f)),1)])])]))}},st=D(nt,[["__scopeId","data-v-2deb0198"]]),at={class:"box bg-white"},lt={class:"input-group"},ot=["value"],rt={class:"mt-4"},dt={class:"bar-labels-top"},ut={__name:"trainBar",emits:["update:duration"],setup(N,{emit:r}){const e=r;let o=h(60);const f=$("平均每小時建議飲水量"),m=w(()=>{const l=[];for(let d=30;d<=480;d+=30)l.push(d);return l}),s=w(()=>o.value/60*f.value),n=()=>{e("update:duration",o.value)};return A(()=>{e("update:duration",o.value)}),(l,d)=>(p(),c("div",at,[t("div",lt,[d[1]||(d[1]=t("label",null,"訓練時間:",-1)),I(t("select",{"onUpdate:modelValue":d[0]||(d[0]=b=>U(o)?o.value=b:o=b),onChange:n},[(p(!0),c(B,null,R(i(m),b=>(p(),c("option",{key:b,value:b},u(b)+" 分鐘 ",9,ot))),128))],544),[[L,i(o)]])]),d[4]||(d[4]=t("h5",null,"建議飲水標準(ml)",-1)),t("div",rt,[t("div",dt,[d[2]||(d[2]=t("span",null,"0",-1)),t("span",null,"　"+u((i(s)*.4).toFixed(0)),1),t("span",null,"　"+u((i(s)*.8).toFixed(0)),1),t("span",null,u(i(s)?.toFixed(0)),1)]),d[3]||(d[3]=z('<div class="progress-bar" data-v-cf1c4220><div class="segment red" data-v-cf1c4220></div><div class="segment yellow" data-v-cf1c4220></div><div class="segment green" data-v-cf1c4220></div></div><div class="bar-labels-bottom" data-v-cf1c4220><span data-v-cf1c4220>0%</span><span data-v-cf1c4220>　40%</span><span data-v-cf1c4220>　80%</span><span data-v-cf1c4220>100%</span></div>',2))])]))}},it=D(ut,[["__scopeId","data-v-cf1c4220"]]),pt={key:0},vt={__name:"waterChart",setup(N){const r=$("response"),e=h(null);let o=null;const f=()=>{o?.resize()},m=()=>{if(!e.value||!r.value?.datas?.length)return;o||(o=Q(e.value));const s=r.value.datas,n=s.map(x=>x.date),l=s.map(x=>x.飲水量),d=s.map(x=>{const k=x.訓練時間/60;return Number((k*x.飲水量/x.每小時建議飲水量*100).toFixed(2))}),b={color:V,tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{data:["飲水量","喝水達成率"],top:"top",left:"center"},xAxis:{type:"category",data:n,axisLabel:{rotate:45}},yAxis:[{type:"value",name:"飲水量 (ml)",position:"left"},{type:"value",name:"喝水達成率 (%)",position:"right"}],series:[{name:"飲水量",type:"bar",yAxisIndex:0,data:l,itemStyle:{color:V[0]},label:{show:!0,position:"top"}},{name:"喝水達成率",type:"line",yAxisIndex:1,data:d,itemStyle:{color:V[1]},lineStyle:{width:2},label:{show:!0,position:"top",color:V[1]}}],dataZoom:[{type:"slider",start:0,end:100},{type:"inside",start:0,end:100}],grid:{left:"2%",right:"2%",bottom:"35%"}};o.setOption(b)};return A(()=>{T(()=>{m()}),window.addEventListener("resize",f)}),q(()=>r.value,()=>{T(()=>{m()})},{deep:!0}),H(()=>{o?.dispose(),window.removeEventListener("resize",f)}),(s,n)=>(p(),c("div",{ref_key:"chartContainer",ref:e,style:{height:"300px","min-width":"600px"}},[i(r)?.datas?.length?E("",!0):(p(),c("p",pt,"暫無數據"))],512))}},ct={class:"1box 1bg-white"},mt={class:"table-container"},gt={key:0},ft={key:1,class:"no-data"},bt={__name:"waterTable",setup(N){const r=$("response"),e=$("可容許脫水率"),o=()=>{(e.value<0||e.value>100)&&(e.value=Math.max(0,Math.min(100,e.value)))},f=w(()=>r.value?.datas?.length?[...r.value.datas].sort((s,n)=>new Date(n.date)-new Date(s.date)):[]),m=s=>s.流汗率*s.訓練時間-s.訓練前體重*1e3*e.value/100;return(s,n)=>(p(),c("div",ct,[t("div",mt,[i(r)?.datas?.length?(p(),c("table",gt,[t("thead",null,[t("tr",null,[n[2]||(n[2]=t("th",null,"測量日期",-1)),n[3]||(n[3]=t("th",null,"訓練前體重(g)",-1)),n[4]||(n[4]=t("th",null,"訓練後體重(g)",-1)),n[5]||(n[5]=t("th",null,"脫水率",-1)),n[6]||(n[6]=t("th",null,"飲水量(ml)",-1)),n[7]||(n[7]=t("th",null,"排尿量(ml)",-1)),n[8]||(n[8]=t("th",null,"總流失量(ml)",-1)),n[9]||(n[9]=t("th",null,"訓練時間(min)",-1)),n[10]||(n[10]=t("th",null,"流汗率(ml/min)",-1)),t("th",null,[n[1]||(n[1]=F("可容許脫水率 ",-1)),I(t("input",{type:"number",class:"dehydration-input","onUpdate:modelValue":n[0]||(n[0]=l=>U(e)?e.value=l:null),min:"0",max:"100",step:"0.1",onBlur:o},null,544),[[O,i(e),void 0,{number:!0}]])]),n[11]||(n[11]=t("th",null,"每小時建議飲水量(ml)",-1))])]),t("tbody",null,[(p(!0),c(B,null,R(i(f),l=>(p(),c("tr",{key:l.date},[t("td",null,u(l.date),1),t("td",null,u(l.訓練前體重*1e3),1),t("td",null,u(l.訓練後體重*1e3),1),t("td",null,u(l.脫水率)+"%",1),t("td",null,u(l.飲水量),1),t("td",null,u(l.排尿量),1),t("td",null,u(l.總流失量),1),t("td",null,u(l.訓練時間),1),t("td",null,u(l.流汗率.toFixed(2)),1),t("td",null,u(i(e)),1),t("td",null,u(m(l).toFixed(2)),1)]))),128))])])):(p(),c("p",ft,"暫無數據"))])]))}},xt=D(bt,[["__scopeId","data-v-8b6a902f"]]),_t={key:0,class:"pa-4"},yt={class:"box bg-white mt-4"},It={__name:"water",setup(N){const r=h(""),e=h(null),o=h(2),f=h(60),m=h("a"),s=h(""),n=async g=>{try{const a=g.queryString+`&itemCode=${encodeURIComponent(m.value)}`;r.value=g.selectedUserId;const v=await W.getNutritionIndicatorWater(r.value,a);v.data?.datas?.length&&(v.data.datas=v.data.datas.map(S=>({...S,每小時建議飲水量:S.流汗率*S.訓練時間-S.訓練前體重*1e3*o.value/100}))),e.value=v.data,e.value.datas.length==0&&(s.value=`${g.selectedUserName}在所選日期範圍內${g.sDate}~${g.eDate}無資料。`)}catch(a){console.error("API 調用失敗:",a)}},l=g=>{f.value=g},d=w(()=>e.value?.datas?.length?(e.value.datas.reduce((a,v)=>a+v.流汗率,0)/e.value.datas.length).toFixed(1):0),b=w(()=>e.value?.datas?.length?e.value.datas.reduce((a,v)=>a+v.總流失量/v.訓練時間,0)/e.value.datas.length/1e3*f.value:0),x=w(()=>e.value?.datas?.length?(e.value.datas.reduce((a,v)=>a+v.每小時建議飲水量,0)/e.value.datas.length).toFixed(0):0),k=w(()=>!e.value?.局部的汗鈉濃度||!b.value?0:((.57*e.value.局部的汗鈉濃度+11.05)*b.value*22.99*.00254).toFixed(1));return C("response",e),C("平均流汗率",d),C("建議補充食鹽量",k),C("可容許脫水率",o),C("平均每小時建議飲水量",x),(g,a)=>(p(),c(B,null,[_(Z,{onSearch:n},{icon:y(()=>[_(K,null,{default:y(()=>[...a[1]||(a[1]=[F("mdi-water",-1)])]),_:1})]),title:y(()=>[...a[2]||(a[2]=[F(" 營養水分監控 ",-1)])]),dashboardTypes:y(()=>[...a[3]||(a[3]=[t("select",{class:"select"},[t("option",null,"水份及鈉含量建議")],-1)])]),more:y(()=>[I(t("select",{"onUpdate:modelValue":a[0]||(a[0]=v=>U(m)?m.value=v:null),class:"select",title:"訓練類型"},[...a[4]||(a[4]=[t("option",{value:"a"},"專項體能",-1),t("option",{value:"b"},"一般體能",-1),t("option",{value:"c"},"重量訓練",-1),t("option",{value:"d"},"自助練習",-1)])],512),[[L,i(m)]])]),_:1}),i(e)?.datas?.length?(p(),c("section",_t,[_(J,null,{default:y(()=>[_(M,{cols:"12",md:"7"},{default:y(()=>[_(st)]),_:1}),_(M,{cols:"12",md:"5"},{default:y(()=>[_(it,{"onUpdate:duration":l})]),_:1})]),_:1}),t("div",yt,[a[5]||(a[5]=t("h2",{class:"mb-4 w-75"},"每日飲水量趨勢",-1)),t("div",null,[_(vt),_(xt)])])])):(p(),j(G,{key:1,message:i(s)},null,8,["message"]))],64))}};export{It as default};
