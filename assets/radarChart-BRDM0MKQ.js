import{i as T}from"./index-Cuq32rWJ.js";import{P as V,C as L}from"./noData-KfHPR97s.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{H as x,d as D,D as _,K,e as M,N as B,az as P,c as $,o as G,b as p,a as H,w as v,m as b,k as w,u as j,n as F,A as U,F as Y}from"./index-BxuKpZ1b.js";const W={__name:"radarChart",setup(q){const m=x("allDates"),r=x("responsePsychology"),i={INDICATOR:"indicator",SKILL:"skill"},y=["基礎","身心","認知","腦波"],g=["目標設定","自信心","承諾","意象","心理練習","再專注","專注","比賽計畫","活化","放鬆","恐懼控制","壓力反應","自動化"],l=D(i.INDICATOR),z=_(()=>r?.value&&r?.value.length>0&&m.value.length>0),S=D(null);let t=null;const h=_(()=>l.value===i.SKILL?y.map(a=>({name:a,max:5})):g.filter(a=>a!=="自動化").map(a=>({name:a,max:5}))),R=()=>!r.value||r.value.length===0?(console.log("no responsePsychology"),[]):[...m.value].sort((e,n)=>new Date(e)-new Date(n)).map((e,n)=>{const c=r.value.find(o=>o.date===e);if(!c)return null;let u=[];l.value===i.SKILL?u=y.map(o=>{const f=V[o],d=Object.keys(f.indicators);if(d.length===0)return 0;const N=d.reduce((k,A)=>k+(c[A]||0),0);return Math.round(N/d.length*100)/100}):u=g.filter(o=>o!=="自動化").map(o=>c[o]||0);const s=L[n%L.length];return{name:e,value:u,itemStyle:{color:s},lineStyle:{color:s,width:2},areaStyle:{color:s,opacity:.15},symbol:"circle",symbolSize:6}}).filter(e=>e!==null),C=()=>{if(!t){console.log("Chart instance not initialized");return}if(!z.value){console.log("No Data"),t.clear(),t.setOption({title:{text:"沒有資料",left:"center",top:"middle",textStyle:{color:"#999",fontSize:20}}});return}const a={tooltip:{trigger:"item",backgroundColor:"rgba(50, 50, 50, 0.9)",borderColor:"#ccc",borderWidth:1,textStyle:{color:"#fff",fontSize:12},formatter:function(e){const{name:n,value:c,color:u}=e;let s=`<div style="margin-bottom: 8px;"><strong style="color: ${u};">${n}</strong></div>`;return h.value.forEach((o,f)=>{const d=c[f];s+=`<div style="margin: 2px 0;">${o.name}: <strong>${d}</strong></div>`}),s}},legend:{data:m.value,top:10,textStyle:{fontSize:14},itemGap:20,selectedMode:"multiple"},radar:{indicator:h.value,center:["50%","55%"],radius:"70%",axisName:{fontSize:12,color:"#666"},splitLine:{lineStyle:{color:"#e0e0e0"}},axisLine:{lineStyle:{color:"#ccc"}},splitArea:{show:!0,areaStyle:{color:["rgba(250,250,250,0.1)","rgba(200,200,200,0.1)"]}}},series:[{type:"radar",data:R(),symbol:"circle",symbolSize:6,lineStyle:{width:2}}]};t.setOption(a,!0)},O=()=>{t=T(S.value),C()};K([()=>r?.value,m,l],()=>{t&&r.value&&C()},{deep:!0});const I=()=>{t&&t.resize()};return M(()=>{B(()=>{O()}),window.addEventListener("resize",I)}),P(()=>{t&&(t.dispose(),t=null),window.removeEventListener("resize",I)}),(a,e)=>(G(),$(Y,null,[p(U,{modelValue:j(l),"onUpdate:modelValue":e[0]||(e[0]=n=>F(l)?l.value=n:null),mandatory:"",color:"primary",border:""},{default:v(()=>[p(b,{value:i.INDICATOR,size:"small"},{default:v(()=>[...e[1]||(e[1]=[w(" 向度 ",-1)])]),_:1},8,["value"]),p(b,{value:i.SKILL,size:"small"},{default:v(()=>[...e[2]||(e[2]=[w(" 技能 ",-1)])]),_:1},8,["value"])]),_:1},8,["modelValue"]),H("div",{ref_key:"chartContainer",ref:S,class:"chart-container"},null,512)],64))}},ee=E(W,[["__scopeId","data-v-6e3b25a3"]]);export{ee as R};
