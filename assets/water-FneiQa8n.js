import{J as $,b as f,o as c,d as t,z as u,u as p,f as h,G as w,h as L,l as F,bz as z,q as N,F as T,y as M,bA as R,P as B,M as q,aA as E,n as H,m as D,v as O,e as y,j,w as _,aD as W,V as G,L as k}from"./index-Bz3xUFWk.js";import{i as J,S as Z}from"./index-BS7Z0Srq.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{C as S,_ as K}from"./noData-Cmpbj3lj.js";import{V as Q,a as A}from"./VRow-CxeqdztZ.js";import"./VSnackbar-Bny0SPdD.js";import"./layout-BMN21tNx.js";import"./VCard-DERAAftr.js";/* empty css              */const X={class:"box bg-white"},Y={class:"card-container"},P={class:"big-number-card"},tt={class:"big-number-card"},et={__name:"bigNumberContainer",setup(C){const i=$("平均流汗率"),e=$("建議補充食鹽量");return(l,o)=>(c(),f("div",X,[o[3]||(o[3]=t("h2",null,"建議飲水量",-1)),t("div",Y,[t("div",P,[o[0]||(o[0]=t("h4",null,"流汗率(ml/min)",-1)),t("h5",null,u(p(i)||"0.0"),1)]),t("div",tt,[o[1]||(o[1]=t("h4",null,"建議補充食鹽量(g/L)",-1)),t("h5",null,u(p(e)||"0.0"),1)]),o[2]||(o[2]=t("div",{class:"big-number-card"},[t("h4",null,"每日飲水量"),t("h5",null,"2540")],-1))])]))}},nt=U(et,[["__scopeId","data-v-82afde06"]]),at={class:"box bg-white"},st={class:"input-group"},lt=["value"],ot={class:"mt-4"},rt={class:"bar-labels-top"},dt={__name:"trainBar",emits:["update:duration"],setup(C,{emit:i}){const e=i;let l=h(60);const o=$("平均每小時建議飲水量"),g=w(()=>{const s=[];for(let d=30;d<=480;d+=30)s.push(d);return s}),r=w(()=>l.value/60*o.value),n=()=>{e("update:duration",l.value)};return L(()=>{e("update:duration",l.value)}),(s,d)=>(c(),f("div",at,[t("div",st,[d[1]||(d[1]=t("label",null,"訓練時間:",-1)),F(t("select",{"onUpdate:modelValue":d[0]||(d[0]=b=>N(l)?l.value=b:l=b),onChange:n},[(c(!0),f(T,null,M(p(g),b=>(c(),f("option",{key:b,value:b},u(b)+" 分鐘 ",9,lt))),128))],544),[[z,p(l)]])]),d[4]||(d[4]=t("h5",null,"建議飲水標準(ml)",-1)),t("div",ot,[t("div",rt,[d[2]||(d[2]=t("span",null,"0",-1)),t("span",null,"　"+u((p(r)*.4).toFixed(0)),1),t("span",null,"　"+u((p(r)*.8).toFixed(0)),1),t("span",null,u(p(r)?.toFixed(0)),1)]),d[3]||(d[3]=R('<div class="progress-bar" data-v-cf1c4220><div class="segment red" data-v-cf1c4220></div><div class="segment yellow" data-v-cf1c4220></div><div class="segment green" data-v-cf1c4220></div></div><div class="bar-labels-bottom" data-v-cf1c4220><span data-v-cf1c4220>0%</span><span data-v-cf1c4220>　40%</span><span data-v-cf1c4220>　80%</span><span data-v-cf1c4220>100%</span></div>',2))])]))}},ut=U(dt,[["__scopeId","data-v-cf1c4220"]]),it={key:0},pt={__name:"waterChart",setup(C){const i=$("response"),e=h(null);let l=null;const o=()=>{l?.resize()},g=()=>{if(!e.value||!i.value?.datas?.length)return;l||(l=J(e.value));const r=i.value.datas,n=r.map(x=>x.date),s=r.map(x=>x.飲水量),d=r.map(x=>{const V=x.訓練時間/60,v=x.每小時建議飲水量||0,a=x.飲水量||1;return Number((V*v/a*100).toFixed(2))}),b={color:S,tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{data:["飲水量","喝水達成率"],top:"top",left:"center"},xAxis:{type:"category",data:n,axisLabel:{rotate:45}},yAxis:[{type:"value",name:"飲水量 (ml)",position:"left"},{type:"value",name:"喝水達成率 (%)",position:"right"}],series:[{name:"飲水量",type:"bar",yAxisIndex:0,data:s,itemStyle:{color:S[0]},label:{show:!0,position:"top"}},{name:"喝水達成率",type:"line",yAxisIndex:1,data:d,itemStyle:{color:S[1]},lineStyle:{width:2},label:{show:!0,position:"top",color:S[1]}}],dataZoom:[{type:"slider",start:0,end:100},{type:"inside",start:0,end:100}],grid:{left:"2%",right:"2%",bottom:"35%"}};l.setOption(b)};return L(()=>{B(()=>{g()}),window.addEventListener("resize",o)}),q(()=>i.value,()=>{B(()=>{g()})},{deep:!0}),E(()=>{l?.dispose(),window.removeEventListener("resize",o)}),(r,n)=>(c(),f("div",{ref_key:"chartContainer",ref:e,style:{height:"300px","min-width":"600px"}},[p(i)?.datas?.length?H("",!0):(c(),f("p",it,"暫無數據"))],512))}},vt={class:"1box 1bg-white"},ct={class:"table-container"},mt={key:0},ft={key:1,class:"no-data"},gt={__name:"waterTable",setup(C){const i=$("response"),e=$("可容許脫水率"),l=()=>{(e.value<0||e.value>100)&&(e.value=Math.max(0,Math.min(100,e.value)))},o=w(()=>i.value?.datas?.length?[...i.value.datas].sort((r,n)=>new Date(n.date)-new Date(r.date)):[]),g=r=>r.流汗率*r.訓練時間-r.訓練前體重*e.value/100;return(r,n)=>(c(),f("div",vt,[t("div",ct,[p(i)?.datas?.length?(c(),f("table",mt,[t("thead",null,[t("tr",null,[n[2]||(n[2]=t("th",null,"測量日期",-1)),n[3]||(n[3]=t("th",null,"訓練前體重(g)",-1)),n[4]||(n[4]=t("th",null,"訓練後體重(g)",-1)),n[5]||(n[5]=t("th",null,"脫水率",-1)),n[6]||(n[6]=t("th",null,"飲水量(ml)",-1)),n[7]||(n[7]=t("th",null,"排尿量(ml)",-1)),n[8]||(n[8]=t("th",null,"總流失量(ml)",-1)),n[9]||(n[9]=t("th",null,"訓練時間(min)",-1)),n[10]||(n[10]=t("th",null,"流汗率(ml/min)",-1)),t("th",null,[n[1]||(n[1]=D("可容許脫水率 ",-1)),F(t("input",{type:"number",class:"dehydration-input","onUpdate:modelValue":n[0]||(n[0]=s=>N(e)?e.value=s:null),min:"0",max:"100",step:"0.1",onBlur:l},null,544),[[O,p(e),void 0,{number:!0}]])]),n[11]||(n[11]=t("th",null,"每小時建議飲水量(ml)",-1))])]),t("tbody",null,[(c(!0),f(T,null,M(p(o),s=>(c(),f("tr",{key:s.date},[t("td",null,u(s.date),1),t("td",null,u(s.訓練前體重),1),t("td",null,u(s.訓練後體重),1),t("td",null,u(s.脫水率)+"%",1),t("td",null,u(s.飲水量),1),t("td",null,u(s.排尿量),1),t("td",null,u(s.總流失量),1),t("td",null,u(s.訓練時間),1),t("td",null,u(s.流汗率.toFixed(2)),1),t("td",null,u(p(e)),1),t("td",null,u(g(s).toFixed(2)),1)]))),128))])])):(c(),f("p",ft,"暫無數據"))])]))}},bt=U(gt,[["__scopeId","data-v-4dcbf04f"]]),xt={key:0,class:"pa-4"},yt={class:"box bg-white mt-4"},Dt={__name:"water",setup(C){const i=h(""),e=h(null),l=h(2),o=h(60),g=h("a"),r=h(""),n=async v=>{try{const a=v.queryString+`&trainType=${encodeURIComponent(g.value)}`;i.value=v.selectedUserId;const m=await W.getNutritionIndicatorWater(i.value,a);m.data?.datas?.length&&(m.data.datas=m.data.datas.map(I=>({...I,每小時建議飲水量:I.流汗率*I.訓練時間-I.訓練前體重*l.value/100}))),e.value=m.data,console.log(1),e.value.datas.length==0&&(r.value=`${v.selectedUserName}在所選日期範圍內${v.sDate}~${v.eDate}無資料。`)}catch(a){console.error("API 調用失敗:",a)}},s=v=>{o.value=v},d=w(()=>e.value?.datas?.length?(e.value.datas.reduce((a,m)=>a+m.流汗率,0)/e.value.datas.length).toFixed(1):0),b=w(()=>e.value?.datas?.length?e.value.datas.reduce((a,m)=>a+m.總流失量/m.訓練時間,0)/e.value.datas.length/1e3*o.value:0),x=w(()=>e.value?.datas?.length?(e.value.datas.reduce((a,m)=>a+m.每小時建議飲水量,0)/e.value.datas.length).toFixed(0):0),V=w(()=>!e.value?.局部的汗鈉濃度||!b.value?0:((.57*e.value.局部的汗鈉濃度+11.05)*b.value*22.99*.00254).toFixed(1));return k("response",e),k("平均流汗率",d),k("建議補充食鹽量",V),k("可容許脫水率",l),k("平均每小時建議飲水量",x),(v,a)=>(c(),f(T,null,[y(Z,{onSearch:n,limitDays:31},{icon:_(()=>[y(G,null,{default:_(()=>[...a[1]||(a[1]=[D("mdi-water",-1)])]),_:1})]),title:_(()=>[...a[2]||(a[2]=[D(" 營養水分監控 ",-1)])]),dashboardTypes:_(()=>[...a[3]||(a[3]=[t("select",{class:"select"},[t("option",null,"疲勞監控與身體組成分析")],-1)])]),more:_(()=>[F(t("select",{"onUpdate:modelValue":a[0]||(a[0]=m=>N(g)?g.value=m:null),class:"select",title:"訓練類型"},[...a[4]||(a[4]=[t("option",{value:"a"},"專項體能",-1),t("option",{value:"b"},"一般體能",-1),t("option",{value:"c"},"重量訓練",-1),t("option",{value:"d"},"自助練習",-1)])],512),[[z,p(g)]])]),_:1}),p(e)?.datas?.length?(c(),f("section",xt,[y(Q,null,{default:_(()=>[y(A,{cols:"12",md:"7"},{default:_(()=>[y(nt)]),_:1}),y(A,{cols:"12",md:"5"},{default:_(()=>[y(ut,{"onUpdate:duration":s})]),_:1})]),_:1}),t("div",yt,[a[5]||(a[5]=t("h2",{class:"mb-4 w-75"},"每日飲水量趨勢",-1)),t("div",null,[y(pt),y(bt)])])])):(c(),j(K,{key:1,message:p(r)},null,8,["message"]))],64))}};export{Dt as default};
