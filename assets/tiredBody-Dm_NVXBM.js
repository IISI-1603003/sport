import{u as $,b as q,c as z,i as N,S as E}from"./index-CdZNqDWi.js";import{_ as C,t as M}from"./tiredContainer-BlrZwXys.js";import{I as T,d as f,E as b,e as V,O as k,L as A,c as _,o as p,a as m,F as B,b as d,u as o,ax as Z,t as j,w as h,k as I,x as W,m as Y,h as S,aA as D,V as G,K as L}from"./index-Dfwmr34z.js";import{C as g,_ as R}from"./noData-BlCceoAc.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as J,a as H}from"./VRow-BxR3TJ0q.js";import"./VSnackbar-Byw-mOFw.js";import"./layout-BY2do3K7.js";import"./VCard-BqK8UscN.js";/* empty css              */$(q);$(z);const P={__name:"tiredChart",setup(O){const l=T("responseTired"),n=f(null);let t=null;const c=b(()=>l.value&&l.value.length>0),s=b(()=>{if(!c.value)return null;const a=l.value.map(u=>u.date),v=l.value.map(u=>u.hb),r=l.value.map(u=>u.bun),y=l.value.map(u=>u.ck);return{tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{data:["Hb","BUN","CK"],top:0},grid:{left:"3%",right:"4%",bottom:"10%",containLabel:!0},xAxis:{type:"category",data:a,axisLabel:{rotate:45}},yAxis:[{type:"value",name:"Hb/BUN",position:"left"},{type:"value",name:"CK",position:"right"}],dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100}],series:[{name:"Hb",type:"line",data:v,smooth:!0,itemStyle:{color:"#ff6b9d"},lineStyle:{color:"#ff6b9d"}},{name:"BUN",type:"line",data:r,smooth:!0,itemStyle:{color:"#3b82f6"},lineStyle:{color:"#3b82f6"}},{name:"CK",type:"bar",data:y,yAxisIndex:1,itemStyle:{color:"#a855f7"}}]}}),e=()=>{t&&(t.clear(),t.setOption({title:{text:"暫無資料",left:"center",top:"middle",textStyle:{color:"#888",fontSize:22}},graphic:[{type:"text",left:"center",top:"55%",style:{text:"請選擇條件後查詢",fill:"#aaa",font:"16px sans-serif"}}]}))},i=()=>{n.value&&(t&&t.dispose(),t=N(n.value),c.value&&s.value?t.setOption(s.value):e())};return V(async()=>{await k(),i()}),A(s,()=>{t&&s.value&&c.value?t.setOption(s.value):e()}),A(()=>l.value,async()=>{await k(),i()},{deep:!0}),(a,v)=>(p(),_(B,null,[v[0]||(v[0]=m("h3",null,"歷次檢測",-1)),m("div",{ref_key:"chartRef",ref:n,style:{width:"100%",height:"400px"}},null,512)],64))}},Q={class:"body-indicators"},X={__name:"bodyContainer",setup(O){const l=T("responseBody",f([])),n=b(()=>l.value.map(e=>e.體重).filter(e=>e!=null)),t=b(()=>l.value.map(e=>e.體脂率).filter(e=>e!=null)),c=b(()=>l.value.map(e=>e.水份重).filter(e=>e!=null)),s=b(()=>l.value.map(e=>e.去脂重).filter(e=>e!=null));return(e,i)=>(p(),_("div",Q,[d(C,{title:"體重",data:o(n),color:("CHART_COLORS"in e?e.CHART_COLORS:o(g))[0]},null,8,["data","color"]),d(C,{title:"體脂率",data:o(t),color:("CHART_COLORS"in e?e.CHART_COLORS:o(g))[1]},null,8,["data","color"]),d(C,{title:"總水份",data:o(c),color:("CHART_COLORS"in e?e.CHART_COLORS:o(g))[2]},null,8,["data","color"]),d(C,{title:"去脂重",data:o(s),color:("CHART_COLORS"in e?e.CHART_COLORS:o(g))[3]},null,8,["data","color"])]))}},ee=U(X,[["__scopeId","data-v-8d29ee8d"]]),te={class:"indicator-buttons"},ae={__name:"bodyChart",setup(O){const l=T("responseBody",f([])),n=f(null);let t=null;const c=[{key:"體重",label:"體重"},{key:"體脂率",label:"體脂率"},{key:"肌肉量",label:"肌肉量"},{key:"脂肪重",label:"脂肪重"},{key:"水份比例",label:"水份比例"},{key:"水份重",label:"水份重"}],s=f(["體重","體脂率"]),e=b(()=>l.value.map(r=>({...r,水份比例:r.體重&&r.水份重?((1-(r.體重-r.水份重)/r.體重)*100).toFixed(1):0}))),i=r=>{const y=s.value.indexOf(r);y>-1?s.value.splice(y,1):s.value.length<2&&s.value.push(r)},a=()=>{if(!n.value||e.value.length===0)return;t&&t.dispose(),t=N(n.value);const r=e.value.map(x=>x.date),y=s.value.map((x,w)=>{const F=e.value.map(K=>parseFloat(K[x])||0);return{name:x,type:"line",yAxisIndex:v(x),data:F,lineStyle:{color:g[w%g.length]},itemStyle:{color:g[w%g.length]}}}),u={tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{data:s.value,top:0},grid:{left:"3%",right:"4%",bottom:"10%",containLabel:!0},xAxis:{type:"category",data:r,axisLabel:{rotate:45}},yAxis:[{type:"value",name:"重量 (kg)",position:"left"},{type:"value",name:"比例 (%)",position:"right"}],dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100}],series:y};t.setOption(u)},v=r=>["體脂率","水份比例"].includes(r)?1:0;return A([s,e],()=>{k(()=>{a()})},{deep:!0}),V(()=>{k(()=>{a()})}),Z(()=>{t&&t.dispose()}),(r,y)=>(p(),_("div",null,[y[0]||(y[0]=m("h3",null,"組成變化追蹤",-1)),m("div",te,[(p(),_(B,null,j(c,u=>d(Y,{key:u.key,color:o(s).includes(u.key)?"primary":"default",variant:o(s).includes(u.key)?"flat":"outlined",size:"small",onClick:x=>i(u.key),class:"ma-1"},{default:h(()=>[I(W(u.label),1)]),_:2},1032,["color","variant","onClick"])),64))]),m("div",{ref_key:"chartContainer",ref:n,class:"chart-container"},null,512)]))}},se=U(ae,[["__scopeId","data-v-f2fbe42d"]]),le={key:0,class:"pa-4"},oe={key:0,class:"box bg-white"},ne={key:0,class:"box bg-white"},he={__name:"tiredBody",setup(O){const l=f(""),n=f({}),t=f({}),c=f("");L("responseTired",n),L("responseBody",t);const s=async i=>{try{const a=await D.getPhysiologyIndicatorTired(l.value,i);n.value=a.data||{};const v=await D.getPhysiologyIndicatorBody(l.value,i);t.value=v.data||{}}catch(a){console.error("獲取數據失敗:",a),n.value={},t.value={}}},e=async i=>{const a=i.queryString;l.value=i.selectedUserId,await s(a),n.value?.length===0||t.value?.length===0?c.value=`${i.selectedUserName}在所選日期範圍內${i.sDate}~${i.eDate}無資料。`:c.value=""};return(i,a)=>(p(),_(B,null,[d(E,{onSearch:e},{icon:h(()=>[d(G,null,{default:h(()=>[...a[0]||(a[0]=[I("mdi-heart-pulse",-1)])]),_:1})]),title:h(()=>[...a[1]||(a[1]=[I(" 生理監控 ",-1)])]),dashboardTypes:h(()=>[...a[2]||(a[2]=[m("select",{class:"select"},[m("option",null,"疲勞監控與身體組成分析")],-1)])]),_:1}),o(n)?.length>0&&o(t)?.length>0?(p(),_("section",le,[d(J,null,{default:h(()=>[d(H,{cols:"6"},{default:h(()=>[o(n).length>0?(p(),_("div",oe,[a[3]||(a[3]=m("h2",null,"疲勞監控",-1)),d(M),d(P)])):(p(),S(R,{key:1,message:o(c)},null,8,["message"]))]),_:1}),d(H,{cols:"6"},{default:h(()=>[o(t).length>0?(p(),_("div",ne,[a[4]||(a[4]=m("h2",null,"身體組成監控 ",-1)),d(ee),d(se)])):(p(),S(R,{key:1,message:o(c)},null,8,["message"]))]),_:1})]),_:1})])):(p(),S(R,{key:1,message:o(c)},null,8,["message"]))],64))}};export{he as default};
