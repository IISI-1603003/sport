import{R as y,d as m,e as P,w as o,k as U,u as s,f as b,l as R,r as B,o as w,a as t,c as C,m as q,b as r,h as p,i as n,v as f,t as E,j as N}from"./index-B7bTOmey.js";import{a as D}from"./functions-D4rvsJVY.js";import{V as M}from"./VForm-tUorSMjw.js";import{V as v}from"./index-BjZX4BuM.js";import{V as S}from"./forwardRefs-D3e6vwef.js";import"./form-z10U6FAi.js";const T={class:"d-flex align-center ga-3"},_={class:"d-flex align-center ga-3"},j={class:"d-flex align-center ga-3"},F={class:"d-flex align-center ga-3"},I={key:0,class:"error mb-2"},O={__name:"register",setup(z){const g=R(),{executeRecaptcha:V}=y.useReCaptcha(),u=m(!1),c=m(!0),i=m(""),a=m({name:"",email:"",password:"",confirmPassword:""}),x=async()=>{if(i.value="",!u.value){if(!a.value.name||!a.value.email||!a.value.password||!a.value.confirmPassword){i.value="請完整填寫所有欄位";return}if(a.value.password!==a.value.confirmPassword){i.value="兩次密碼不一致";return}u.value=!0;try{const d=await V("signUp");await N.signUp({name:a.value.name,email:a.value.email,password:a.value.password,confirmPassword:a.value.confirmPassword},{headers:{token:d}}),alert("註冊成功，請使用帳號登入"),g.push("/sign-in")}catch(d){D(d)}finally{u.value=!1}}};return(d,e)=>{const k=B("router-link");return w(),P(M,{onSubmit:b(x,["prevent"]),modelValue:s(c),"onUpdate:modelValue":e[4]||(e[4]=l=>U(c)?c.value=l:null)},{default:o(()=>[e[11]||(e[11]=t("h2",{class:"text-center"},"註冊",-1)),t("div",T,[r(v,null,{default:o(()=>[...e[5]||(e[5]=[n("mdi-account",-1)])]),_:1}),p(t("input",{type:"text",class:"input",placeholder:"姓名","onUpdate:modelValue":e[0]||(e[0]=l=>s(a).name=l),required:""},null,512),[[f,s(a).name]])]),t("div",_,[r(v,null,{default:o(()=>[...e[6]||(e[6]=[n("mdi-email",-1)])]),_:1}),p(t("input",{type:"email",class:"input",placeholder:"Email","onUpdate:modelValue":e[1]||(e[1]=l=>s(a).email=l),required:""},null,512),[[f,s(a).email]])]),t("div",j,[r(v,null,{default:o(()=>[...e[7]||(e[7]=[n("mdi-lock",-1)])]),_:1}),p(t("input",{type:"password",class:"input",placeholder:"密碼","onUpdate:modelValue":e[2]||(e[2]=l=>s(a).password=l),required:""},null,512),[[f,s(a).password]])]),t("div",F,[r(v,null,{default:o(()=>[...e[8]||(e[8]=[n("mdi-lock-check",-1)])]),_:1}),p(t("input",{type:"password",class:"input",placeholder:"確認密碼","onUpdate:modelValue":e[3]||(e[3]=l=>s(a).confirmPassword=l),required:""},null,512),[[f,s(a).confirmPassword]])]),s(i)?(w(),C("div",I,E(s(i)),1)):q("",!0),r(S,{type:"submit",variant:"flat",color:"primary",block:"",class:"mt-5",loading:s(u)},{default:o(()=>[...e[9]||(e[9]=[n(" 註冊 ",-1)])]),_:1},8,["loading"]),e[12]||(e[12]=t("div",{class:"or"},"或",-1)),r(k,{to:"/sign-in",class:"text-decoration-none"},{default:o(()=>[...e[10]||(e[10]=[n("返回登入",-1)])]),_:1})]),_:1},8,["modelValue"])}}};export{O as default};
