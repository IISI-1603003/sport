import{R as x,f as l,h as k,w as i,m as w,u as t,i as y,n as b,r as R,o as f,d as n,b as B,p as C,e as d,j as E,k as p,v as _,t as N,l as P}from"./index-D8ynjZEt.js";import{a as h}from"./functions-D4rvsJVY.js";import{V as D}from"./VForm-BbdFW037.js";import{V as M}from"./index-ClLQunCb.js";import{V as S}from"./forwardRefs-BzISydDA.js";import"./form-KsHXAIqj.js";const T={class:"d-flex align-center ga-3"},U={key:0,class:"error mb-2"},H={__name:"forget",setup(j){const c=b(),{executeRecaptcha:v}=x.useReCaptcha(),a=l(!1),u=l(!0),o=l(""),r=l({email:""}),V=async()=>{if(o.value="",!a.value){if(!r.value.email){o.value="請輸入 Email";return}a.value=!0;try{const s=await v("forgetPassword");await P.forgetPassword(r.value.email,{headers:{token:s}}),alert("已寄送重設連結，如未收到請檢查垃圾信件匣"),c.push("sing-in")}catch(s){h(s)}finally{a.value=!1}}};return(s,e)=>{const g=R("router-link");return f(),k(D,{onSubmit:y(V,["prevent"]),modelValue:t(u),"onUpdate:modelValue":e[1]||(e[1]=m=>w(u)?u.value=m:null)},{default:i(()=>[e[5]||(e[5]=n("h2",{class:"text-center"},"忘記密碼",-1)),n("div",T,[d(M,null,{default:i(()=>[...e[2]||(e[2]=[p("mdi-email",-1)])]),_:1}),E(n("input",{type:"email",class:"input",placeholder:"Email","onUpdate:modelValue":e[0]||(e[0]=m=>t(r).email=m),required:""},null,512),[[_,t(r).email]])]),t(o)?(f(),B("div",U,N(t(o)),1)):C("",!0),d(S,{type:"submit",variant:"flat",color:"primary",block:"",class:"mt-5",loading:t(a)},{default:i(()=>[...e[3]||(e[3]=[p(" 發送 ",-1)])]),_:1},8,["loading"]),e[6]||(e[6]=n("div",{class:"or"},"或",-1)),d(g,{to:"/sign-in",class:"text-decoration-none"},{default:i(()=>[...e[4]||(e[4]=[p(" 返回登入 ",-1)])]),_:1})]),_:1},8,["modelValue"])}}};export{H as default};
