import{f as v,j as g,o as y,w as a,e as t,d as b,m as p,u as d,y as $,n as w,h as T,a as z,z as E,b as N,F as O,t as R}from"./index-YoOYIYhl.js";import{_ as W,s as S}from"./delete-alert-icon-C4WYVWpg.js";import{_}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as k,a as j,b as A,c as D}from"./VCard-BoE4UQs3.js";import{V as r}from"./VBtn-BoYJvvf3.js";import{V as q}from"./index-C7nfzMpl.js";import{V as C}from"./VTextField-Ct49Ao8i.js";import{V as F}from"./VTextarea-DARSTU50.js";import{V as I}from"./VSpacer-DddgVSoQ.js";import{V as B}from"./VDialog-BSkNhZq1.js";import{V as L,a as U}from"./VRow-D6SN89O4.js";import{V as M,a as P}from"./VToolbar-CKl0cmyP.js";import{V as G}from"./VDataTable-BQRgH7nk.js";import"./VAvatar-DEknT8tg.js";import"./index-BfXC6dQ1.js";import"./forwardRefs-B9O2pm3w.js";/* empty css              */import"./VOverlay-DPnezZc_.js";import"./scopeId-DMVw-0Yq.js";import"./VSelect-DiAXwcwV.js";import"./VList-C4kwG3hb.js";const H={__name:"create",emits:["add-to-list"],setup(x,{emit:u}){const n=v({id:"",unitCode:"",name:"",info:""}),o=u,s=v(!1);function m(){n.value.id=crypto.randomUUID(),o("add-to-list",{...n.value}),s.value=!1}function V(){n.value.unitCode="",n.value.name="",n.value.info="",s.value=!1}return(c,l)=>(y(),g(B,{modelValue:d(s),"onUpdate:modelValue":l[6]||(l[6]=e=>w(s)?s.value=e:null),"max-width":"500"},{activator:a(({props:e})=>[t(r,$(e,{title:"新增",color:"success"}),{default:a(()=>[...l[7]||(l[7]=[p("+新增",-1)])]),_:1},16)]),default:a(({isActive:e})=>[t(k,{class:"review-border"},{default:a(()=>[t(j,{class:"d-flex justify-space-between align-center"},{default:a(()=>[l[9]||(l[9]=b("span",{class:"text-blue"},"新增單位",-1)),t(r,{icon:"",variant:"text",onClick:l[0]||(l[0]=i=>V())},{default:a(()=>[t(q,null,{default:a(()=>[...l[8]||(l[8]=[p("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),t(A,null,{default:a(()=>[t(C,{"hide-details":"auto",modelValue:d(n).unitCode,"onUpdate:modelValue":l[1]||(l[1]=i=>d(n).unitCode=i),density:"compact",label:"角色編號","prepend-inner-icon":"mdi-music-accidental-sharp",variant:"solo",required:"",class:"mb-5"},{label:a(()=>[...l[10]||(l[10]=[p(" 單位編號 ",-1)])]),_:1},8,["modelValue"]),t(C,{"hide-details":"auto",modelValue:d(n).name,"onUpdate:modelValue":l[2]||(l[2]=i=>d(n).name=i),density:"compact",label:"角色名稱","prepend-inner-icon":"mdi-account",variant:"solo",required:"",class:"mb-5"},{label:a(()=>[...l[11]||(l[11]=[p(" 單位名稱 ",-1)])]),_:1},8,["modelValue"]),t(F,{modelValue:d(n).info,"onUpdate:modelValue":l[3]||(l[3]=i=>d(n).info=i),label:"描述",density:"compact",variant:"solo",required:"",placeholder:"描述"},null,8,["modelValue"])]),_:1}),t(D,null,{default:a(()=>[t(I),t(r,{text:"取消",variant:"outlined",color:"grey-darken-2",onClick:l[4]||(l[4]=i=>V())}),t(r,{text:"確認",variant:"outlined",color:"primary",onClick:l[5]||(l[5]=i=>m())})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},J=_(H,[["__scopeId","data-v-60a51ef1"]]),K={__name:"edit",props:{unit:{type:Object,required:!0,default:()=>({id:"",unitCode:"",name:"",info:""})}},emits:["edit-unit"],setup(x,{emit:u}){const n=x,o=v({id:"",unitCode:"",name:"",info:""});T(()=>{o.value.id=n.unit.id,o.value.unitCode=n.unit.unitCode,o.value.name=n.unit.name,o.value.info=n.unit.info});const s=v(!1),m=u;function V(){m("edit-unit",{...o.value}),s.value=!1}function c(){o.value.id=n.unit.id,o.value.unitCode=n.unit.unitCode,o.value.name=n.unit.name,o.value.info=n.unit.info,s.value=!1}return(l,e)=>(y(),g(B,{modelValue:d(s),"onUpdate:modelValue":e[6]||(e[6]=i=>w(s)?s.value=i:null),"max-width":"500"},{activator:a(({props:i})=>[t(r,$(i,{title:"編輯",icon:"mdi-pencil",size:"small",variant:"text"}),null,16)]),default:a(({isActive:i})=>[t(k,{class:"review-border"},{default:a(()=>[t(j,{class:"d-flex justify-space-between align-center"},{default:a(()=>[e[8]||(e[8]=b("span",{class:"text-blue"},"編輯單位",-1)),t(r,{icon:"",variant:"text",onClick:e[0]||(e[0]=f=>c())},{default:a(()=>[t(q,null,{default:a(()=>[...e[7]||(e[7]=[p("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),t(A,null,{default:a(()=>[t(C,{"hide-details":"auto",modelValue:d(o).unitCode,"onUpdate:modelValue":e[1]||(e[1]=f=>d(o).unitCode=f),density:"compact",label:"角色編號","prepend-inner-icon":"mdi-music-accidental-sharp",variant:"solo",required:"",class:"mb-5"},{label:a(()=>[...e[9]||(e[9]=[p(" 單位編號 ",-1)])]),_:1},8,["modelValue"]),t(C,{"hide-details":"auto",modelValue:d(o).name,"onUpdate:modelValue":e[2]||(e[2]=f=>d(o).name=f),density:"compact",label:"角色名稱","prepend-inner-icon":"mdi-account",variant:"solo",required:"",class:"mb-5"},{label:a(()=>[...e[10]||(e[10]=[p(" 單位名稱 ",-1)])]),_:1},8,["modelValue"]),t(F,{modelValue:d(o).info,"onUpdate:modelValue":e[3]||(e[3]=f=>d(o).info=f),label:"描述",density:"compact",variant:"solo",required:"",placeholder:"描述"},null,8,["modelValue"])]),_:1}),t(D,null,{default:a(()=>[t(I),t(r,{text:"取消",variant:"outlined",color:"grey-darken-2",onClick:e[4]||(e[4]=f=>c())}),t(r,{text:"確認",variant:"outlined",color:"primary",onClick:e[5]||(e[5]=f=>V())})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},Q=_(K,[["__scopeId","data-v-afbe70a4"]]),X={__name:"delete",props:{unit:{type:Object,required:!0,default:()=>({id:"",unitCode:"",name:"",info:""})}},emits:["delete-unit"],setup(x,{emit:u}){const n=x,o=u,s=v({id:"",unitCode:"",name:"",info:""});T(()=>{s.value.id=n.unit.id});const m=v(!1);function V(){o("delete-unit",n.unit.id),m.value=!1}function c(){m.value=!1}return(l,e)=>(y(),g(B,{modelValue:d(m),"onUpdate:modelValue":e[3]||(e[3]=i=>w(m)?m.value=i:null),"max-width":"500"},{activator:a(({props:i})=>[t(r,$(i,{title:"刪除",icon:"mdi-trash-can",size:"small",variant:"text"}),null,16)]),default:a(({isActive:i})=>[t(k,null,{default:a(()=>[t(j,{class:"d-flex justify-space-between align-center"},{default:a(()=>[e[5]||(e[5]=b("span",{class:"text-blue"},null,-1)),t(r,{icon:"",variant:"text",onClick:e[0]||(e[0]=f=>c())},{default:a(()=>[t(q,null,{default:a(()=>[...e[4]||(e[4]=[p("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),t(A,null,{default:a(()=>[...e[6]||(e[6]=[b("div",{class:"delete-info"},[b("img",{src:W,alt:"Delete Alert Icon",class:"delete-alert"}),b("span",null,[p("是否確認"),b("span",{class:"text-red"},"刪除"),p("?")])],-1)])]),_:1}),t(D,{class:"d-flex justify-center mb-5"},{default:a(()=>[t(r,{text:"取消",variant:"outlined",color:"grey-darken-2",onClick:e[1]||(e[1]=f=>c())}),t(I,{style:{flex:"0.25"}}),t(r,{text:"確認",variant:"outlined",color:"primary",onClick:e[2]||(e[2]=f=>V())})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},Y=_(X,[["__scopeId","data-v-a4402e1e"]]),Ce={__name:"list",setup(x){const u=v([]);T(()=>{z.get("api/unit").then(l=>{u.value=l.data,console.log(u.value),S("unit",u.value,60)})});const n=v(""),o=E(()=>u.value.filter(l=>!n.value||l.unitCode&&l.unitCode.includes(n.value)||l.name&&l.name.includes(n.value)||l.info&&l.info.includes(n.value))),s=v([{title:"單位編號",key:"unitCode"},{title:"單位名稱",key:"name"},{title:"描述",key:"info"},{title:"編輯",key:"edit",sortable:!1},{title:"刪除",key:"delete",sortable:!1}]);function m(l){u.value.push(l)}function V(l){const e=u.value.findIndex(i=>i.id===l.id);e!==-1&&(u.value[e]={...l})}function c(l){u.value=u.value.filter(e=>e.id!==l)}return(l,e)=>(y(),N(O,null,[t(L,{class:"mt-1"},{default:a(()=>[t(U,{cols:"4"},{default:a(()=>[t(C,{label:"搜尋",modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=i=>n.value=i),density:"compact",variant:"outlined"},null,8,["modelValue"])]),_:1}),t(U,{cols:"4"}),t(U,{cols:"4",class:"d-flex justify-end"},{default:a(()=>[t(J,{onAddToList:m})]),_:1})]),_:1}),t(k,null,{default:a(()=>[t(M,null,{default:a(()=>[t(P,null,{default:a(()=>[p(R(l.$root.subTitle),1)]),_:1})]),_:1}),t(G,{headers:s.value,items:o.value,density:"comfortable"},{"item.edit":a(({item:i})=>[t(Q,{unit:i,onEditUnit:V},null,8,["unit"])]),"item.delete":a(({item:i})=>[t(Y,{unit:i,onDeleteUnit:c},null,8,["unit"])]),_:1},8,["headers","items"])]),_:1})],64))}};export{Ce as default};
