import{d as f,h as g,o as y,w as a,b as t,a as b,m,V as w,k as p,q as x,u as s,C as $,n as q,O as k,e as A,D as F,c as O,F as R,E as W}from"./index-BxuKpZ1b.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as N,a as _,b as j,c as T}from"./VCard-TkA4NB2g.js";import{V as E}from"./VTextarea-CkvC74CZ.js";import{V as I}from"./VSpacer-DH6S88JW.js";import{V as B}from"./VDialog-B11mrxhi.js";import{_ as z}from"./delete-alert-icon-D8wzgUfY.js";import{V as L,a as U}from"./VRow-BTIbGMxG.js";/* empty css              */const M={__name:"create",emits:["add-to-list"],setup(C,{emit:v}){const l=f({id:"",unitCode:"",unitName:"",description:""}),i=v,u=f(!1);function r(){l.value.id=crypto.randomUUID(),k.save(l.value).then(()=>{i("add-to-list",{...l.value}),l.value.id="",l.value.unitCode="",l.value.unitName="",l.value.description="",u.value=!1})}function c(){l.value.id="",l.value.unitCode="",l.value.unitName="",l.value.description="",u.value=!1}return(V,n)=>(y(),g(B,{modelValue:s(u),"onUpdate:modelValue":n[6]||(n[6]=e=>q(u)?u.value=e:null),"max-width":"500"},{activator:a(({props:e})=>[t(m,$(e,{title:"新增",color:"success"}),{default:a(()=>[...n[7]||(n[7]=[p("+新增",-1)])]),_:1},16)]),default:a(({isActive:e})=>[t(N,{class:"review-border"},{default:a(()=>[t(_,{class:"d-flex justify-space-between align-center"},{default:a(()=>[n[9]||(n[9]=b("span",{class:"text-blue"},"新增單位",-1)),t(m,{icon:"",variant:"text",onClick:n[0]||(n[0]=o=>c())},{default:a(()=>[t(w,null,{default:a(()=>[...n[8]||(n[8]=[p("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),t(j,null,{default:a(()=>[t(x,{"hide-details":"auto",modelValue:s(l).unitCode,"onUpdate:modelValue":n[1]||(n[1]=o=>s(l).unitCode=o),density:"compact",label:"角色編號","prepend-inner-icon":"mdi-music-accidental-sharp",variant:"solo",required:"",class:"mb-5"},{label:a(()=>[...n[10]||(n[10]=[p(" 單位編號 ",-1)])]),_:1},8,["modelValue"]),t(x,{"hide-details":"auto",modelValue:s(l).unitName,"onUpdate:modelValue":n[2]||(n[2]=o=>s(l).unitName=o),density:"compact",label:"角色名稱","prepend-inner-icon":"mdi-account",variant:"solo",required:"",class:"mb-5"},{label:a(()=>[...n[11]||(n[11]=[p(" 單位名稱 ",-1)])]),_:1},8,["modelValue"]),t(E,{modelValue:s(l).description,"onUpdate:modelValue":n[3]||(n[3]=o=>s(l).description=o),label:"描述",density:"compact",variant:"solo",required:"",placeholder:"描述"},null,8,["modelValue"])]),_:1}),t(T,null,{default:a(()=>[t(I),t(m,{text:"取消",variant:"outlined",color:"grey-darken-2",onClick:n[4]||(n[4]=o=>c())}),t(m,{text:"確認",variant:"outlined",color:"primary",onClick:n[5]||(n[5]=o=>r())})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},P=D(M,[["__scopeId","data-v-b3d175df"]]),S={__name:"edit",props:{unit:{type:Object,required:!0,default:()=>({id:"",unitCode:"",unitName:"",description:""})}},emits:["edit-unit"],setup(C,{emit:v}){const l=C,i=f({id:"",unitCode:"",unitName:"",description:""});A(()=>{i.value.id=l.unit.id,i.value.unitCode=l.unit.unitCode,i.value.unitName=l.unit.unitName,i.value.description=l.unit.description});const u=f(!1),r=v;function c(){k.update({id:i.value.id},i.value).then(()=>{r("edit-unit",{...i.value}),u.value=!1}).catch(n=>{alert("編輯失敗，請重新整理後再試一次"),u.value=!1})}function V(){i.value.id=l.unit.id,i.value.unitCode=l.unit.unitCode,i.value.unitName=l.unit.unitName,i.value.description=l.unit.description,u.value=!1}return(n,e)=>(y(),g(B,{modelValue:s(u),"onUpdate:modelValue":e[6]||(e[6]=o=>q(u)?u.value=o:null),"max-width":"500"},{activator:a(({props:o})=>[t(m,$(o,{title:"編輯",icon:"mdi-pencil",size:"small",variant:"text"}),null,16)]),default:a(({isActive:o})=>[t(N,{class:"review-border"},{default:a(()=>[t(_,{class:"d-flex justify-space-between align-center"},{default:a(()=>[e[8]||(e[8]=b("span",{class:"text-blue"},"編輯單位",-1)),t(m,{icon:"",variant:"text",onClick:e[0]||(e[0]=d=>V())},{default:a(()=>[t(w,null,{default:a(()=>[...e[7]||(e[7]=[p("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),t(j,null,{default:a(()=>[t(x,{"hide-details":"auto",modelValue:s(i).unitCode,"onUpdate:modelValue":e[1]||(e[1]=d=>s(i).unitCode=d),density:"compact",label:"角色編號","prepend-inner-icon":"mdi-music-accidental-sharp",variant:"solo",required:"",class:"mb-5"},{label:a(()=>[...e[9]||(e[9]=[p(" 單位編號 ",-1)])]),_:1},8,["modelValue"]),t(x,{"hide-details":"auto",modelValue:s(i).unitName,"onUpdate:modelValue":e[2]||(e[2]=d=>s(i).unitName=d),density:"compact",label:"角色名稱","prepend-inner-icon":"mdi-account",variant:"solo",required:"",class:"mb-5"},{label:a(()=>[...e[10]||(e[10]=[p(" 單位名稱 ",-1)])]),_:1},8,["modelValue"]),t(E,{modelValue:s(i).description,"onUpdate:modelValue":e[3]||(e[3]=d=>s(i).description=d),label:"描述",density:"compact",variant:"solo",required:"",placeholder:"描述"},null,8,["modelValue"])]),_:1}),t(T,null,{default:a(()=>[t(I),t(m,{text:"取消",variant:"outlined",color:"grey-darken-2",onClick:e[4]||(e[4]=d=>V())}),t(m,{text:"確認",variant:"outlined",color:"primary",onClick:e[5]||(e[5]=d=>c())})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},G=D(S,[["__scopeId","data-v-2b0fe447"]]),H={__name:"delete",props:{unit:{type:Object,required:!0,default:()=>({id:"",unitCode:"",name:"",info:""})}},emits:["delete-unit"],setup(C,{emit:v}){const l=C,i=v,u=f({id:"",unitCode:"",name:"",info:""});A(()=>{u.value.id=l.unit.id});const r=f(!1);function c(){k.delete({id:u.value.id}).then(()=>{u.value.id="",i("delete-unit",u.value.id),r.value=!1}).catch(n=>{alert("刪除失敗，請重新整理後再試一次"),r.value=!1})}function V(){r.value=!1}return(n,e)=>(y(),g(B,{modelValue:s(r),"onUpdate:modelValue":e[3]||(e[3]=o=>q(r)?r.value=o:null),"max-width":"500"},{activator:a(({props:o})=>[t(m,$(o,{title:"刪除",icon:"mdi-trash-can",size:"small",variant:"text"}),null,16)]),default:a(({isActive:o})=>[t(N,null,{default:a(()=>[t(_,{class:"d-flex justify-space-between align-center"},{default:a(()=>[e[5]||(e[5]=b("span",{class:"text-blue"},null,-1)),t(m,{icon:"",variant:"text",onClick:e[0]||(e[0]=d=>V())},{default:a(()=>[t(w,null,{default:a(()=>[...e[4]||(e[4]=[p("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),t(j,null,{default:a(()=>[...e[6]||(e[6]=[b("div",{class:"delete-info"},[b("img",{src:z,alt:"Delete Alert Icon",class:"delete-alert"}),b("span",null,[p("是否確認"),b("span",{class:"text-red"},"刪除"),p("?")])],-1)])]),_:1}),t(T,{class:"d-flex justify-center mb-5"},{default:a(()=>[t(m,{text:"取消",variant:"outlined",color:"grey-darken-2",onClick:e[1]||(e[1]=d=>V())}),t(I,{style:{flex:"0.25"}}),t(m,{text:"確認",variant:"outlined",color:"primary",onClick:e[2]||(e[2]=d=>c())})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},J=D(H,[["__scopeId","data-v-4572d8fb"]]),ae={__name:"list",setup(C){const v=f([]);A(()=>{n()});const l=f(""),i=F(()=>v.value.filter(e=>!l.value||e.unitCode&&e.unitCode.includes(l.value)||e.name&&e.name.includes(l.value)||e.info&&e.info.includes(l.value))),u=f([{title:"單位編號",key:"unitCode"},{title:"單位名稱",key:"unitName"},{title:"描述",key:"description"},{title:"編輯",key:"edit",sortable:!1},{title:"刪除",key:"delete",sortable:!1}]);function r(){n()}function c(){n()}function V(){n()}function n(){k.get().then(e=>{v.value=e.data})}return(e,o)=>(y(),O(R,null,[t(L,{class:"mt-1"},{default:a(()=>[t(U,{cols:"4"},{default:a(()=>[t(x,{label:"搜尋",modelValue:l.value,"onUpdate:modelValue":o[0]||(o[0]=d=>l.value=d),density:"compact",variant:"outlined"},null,8,["modelValue"])]),_:1}),t(U,{cols:"4"}),t(U,{cols:"4",class:"d-flex justify-end"},{default:a(()=>[t(P,{onAddToList:r})]),_:1})]),_:1}),t(N,{class:"rounded-lg elevation-3"},{default:a(()=>[t(W,{headers:u.value,items:i.value,density:"comfortable",class:"cyan-header"},{"item.edit":a(({item:d})=>[t(G,{unit:d,onEditUnit:c},null,8,["unit"])]),"item.delete":a(({item:d})=>[t(J,{unit:d,onDeleteUnit:V},null,8,["unit"])]),_:1},8,["headers","items"])]),_:1})],64))}};export{ae as default};
