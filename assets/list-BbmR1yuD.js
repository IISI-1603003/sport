import{f as v,h as C,j,o as f,w as a,e as t,d,m,b as x,x as q,u as i,t as k,y as D,n as A,a as L,z as W,F as E,s as M}from"./index-DpGNt5hz.js";import{_ as P,g as G,s as H}from"./delete-alert-icon-C4WYVWpg.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as T,a as N,b as z,c as I}from"./VCard--Nq_kkEf.js";import{V as c,a as J}from"./VBtn-BZiUtPCt.js";import{V as O}from"./index-309Juuoi.js";import{V as R}from"./VTextField-4xziC6WH.js";import{V as $,a as K}from"./VSelect--AdMTAnE.js";import{V as Q}from"./VTextarea-BahHaAuz.js";import{V as U}from"./VSpacer-_60UwJ_9.js";import{V as S}from"./VDialog-BZsxHTut.js";import{V as X,a as F}from"./VRow-B4U4oohL.js";import{V as Y,a as Z}from"./VToolbar-D6H1RfuZ.js";import{V as _}from"./VDataTable-ijuuF-K0.js";import"./VAvatar-CQ5nYGH2.js";import"./index-9b9l0r-k.js";import"./forwardRefs-C-p-xPEC.js";import"./VList-9JfJBPQA.js";import"./VOverlay-Dvz7xzcU.js";import"./scopeId-7Q84Te7R.js";/* empty css              */const h={class:"mt-4"},ee={key:0,class:"mt-4"},le={key:1},te={__name:"review",props:{user:{type:Object,required:!0,default:()=>({id:"",email:"",name:"",phone:"",unit:"",createTime:"",review:"",reason:"",rejectReason:"",roles:[]})}},setup(p){const r=p,V=v(["運動科學中心","健康促進與運動","廠商-資拓","體育器材研發","運動營養學","運動心理學","體適能測試","運動生物力學","運動傷害預防","運動恢復技術","健身房經營管理","團隊運動訓練","個人健身教練培訓","社區運動活動","運動科技創新"]),b=v(["一般使用者","管理員","測試人員","師父","徒弟"]),s=v({id:"",review:"",rejectReason:"",roles:[]});C(()=>{s.value.review=r.user.review,s.value.rejectReason=r.user.rejectReason,s.value.unit=r.user.unit});const u=v(!1);function g(){s.value.id=r.user.id,r.user.review=s.value.review,r.user.rejectReason=s.value.rejectReason,r.user.unit=s.value.unit,r.user.roles=s.value.roles,console.log("送出審核資料:",s.value),u.value=!1}function y(){s.value.review=r.user.review,s.value.rejectReason=r.user.rejectReason,s.value.unit=r.user.unit,s.value.roles=r.user.roles,u.value=!1}return(n,e)=>(f(),j(S,{modelValue:i(u),"onUpdate:modelValue":e[9]||(e[9]=l=>A(u)?u.value=l:null),"max-width":"500"},{activator:a(({props:l})=>[t(c,D(l,{title:"審核狀態",size:"small",color:"warning",text:"審核"}),null,16)]),default:a(({isActive:l})=>[t(T,{class:"review-border"},{default:a(()=>[t(N,{class:"d-flex justify-space-between align-center"},{default:a(()=>[e[11]||(e[11]=d("span",{class:"text-blue"},"審核狀態",-1)),t(c,{icon:"",variant:"text",onClick:e[0]||(e[0]=o=>y())},{default:a(()=>[t(O,null,{default:a(()=>[...e[10]||(e[10]=[m("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),t(z,null,{default:a(()=>[t(R,{"hide-details":"auto",modelValue:p.user.email,"onUpdate:modelValue":e[1]||(e[1]=o=>p.user.email=o),density:"compact",label:"帳號/信箱","prepend-inner-icon":"mdi-email",variant:"solo",required:"",class:"mb-5",readonly:""},{label:a(()=>[...e[12]||(e[12]=[m(" 帳號/信箱 ",-1)])]),_:1},8,["modelValue"]),t(R,{"hide-details":"auto",modelValue:p.user.name,"onUpdate:modelValue":e[2]||(e[2]=o=>p.user.name=o),density:"compact",label:"使用者名稱","prepend-inner-icon":"mdi-account",variant:"solo",required:"",class:"mb-5",readonly:""},{label:a(()=>[...e[13]||(e[13]=[m(" 使用者名稱 ",-1)])]),_:1},8,["modelValue"]),t($,{"hide-details":"auto",modelValue:i(s).unit,"onUpdate:modelValue":e[3]||(e[3]=o=>i(s).unit=o),density:"compact",label:"單位","prepend-inner-icon":"mdi-domain",variant:"underlined",required:"",class:"mb-5",items:i(V)},{label:a(()=>[...e[14]||(e[14]=[m(" 單位 ",-1)])]),_:1},8,["modelValue","items"]),d("div",null,[e[15]||(e[15]=d("strong",null,"申請原因:",-1)),m(" "+k(p.user.reason),1)]),d("div",null,[e[16]||(e[16]=d("strong",null,"申請時間:",-1)),m(" "+k(p.user.createTime),1)]),d("div",h,[e[19]||(e[19]=d("strong",null,"審核狀態:",-1)),t(J,{class:"mx-4",modelValue:i(s).review,"onUpdate:modelValue":e[4]||(e[4]=o=>i(s).review=o),mandatory:""},{default:a(()=>[t(c,{class:"review-button mx-4",value:"啟用",color:"success",variant:"tonal"},{default:a(()=>[...e[17]||(e[17]=[m("啟用",-1)])]),_:1}),t(c,{class:"review-button mx-4",value:"退件",color:"error",variant:"tonal"},{default:a(()=>[...e[18]||(e[18]=[m("退件",-1)])]),_:1})]),_:1},8,["modelValue"])]),i(s).review==="退件"?(f(),x("div",ee,[t(Q,{modelValue:i(s).rejectReason,"onUpdate:modelValue":e[5]||(e[5]=o=>i(s).rejectReason=o),label:"退件原因",density:"compact",variant:"solo",required:"",placeholder:"請輸入退件原因"},null,8,["modelValue"])])):q("",!0),i(s).review==="啟用"?(f(),x("div",le,[t($,{modelValue:i(s).roles,"onUpdate:modelValue":e[6]||(e[6]=o=>i(s).roles=o),items:i(b),label:"角色",variant:"underlined",chips:"",multiple:""},null,8,["modelValue","items"])])):q("",!0)]),_:1}),t(I,null,{default:a(()=>[t(U),t(c,{text:"取消",variant:"outlined",color:"grey-darken-2",onClick:e[7]||(e[7]=o=>y())}),t(c,{text:"確認",variant:"outlined",color:"primary",onClick:e[8]||(e[8]=o=>g())})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},se=B(te,[["__scopeId","data-v-0069311e"]]),ae={class:"mt-4"},re={key:0},oe={key:1},ne={__name:"edit",props:{user:{type:Object,required:!0,default:()=>({id:"",email:"",name:"",phone:"",unit:"",createTime:"",review:"",reason:"",rejectReason:"",roles:[]})}},setup(p){const r=p,V=v(["運動科學中心","健康促進與運動","廠商-資拓","體育器材研發","運動營養學","運動心理學","體適能測試","運動生物力學","運動傷害預防","運動恢復技術","健身房經營管理","團隊運動訓練","個人健身教練培訓","社區運動活動","運動科技創新"]),b=v(["一般使用者","管理員","測試人員","師父","徒弟"]),s=v({id:"",review:"",unit:"",roles:[]});C(()=>{s.value.review=r.user.review,s.value.unit=r.user.unit,s.value.roles=r.user.roles});const u=v(!1);function g(){s.value.id=r.user.id,r.user.review=s.value.review,r.user.unit=s.value.unit,r.user.roles=s.value.roles,console.log("送出編輯資料:",s.value),u.value=!1}function y(){s.value.review=r.user.review,s.value.unit=r.user.unit,s.value.roles=r.user.roles,u.value=!1}function n(){s.value.review=s.value.review=="停用"?"啟用":"停用"}return(e,l)=>(f(),j(S,{modelValue:i(u),"onUpdate:modelValue":l[8]||(l[8]=o=>A(u)?u.value=o:null),"max-width":"500"},{activator:a(({props:o})=>[t(c,D(o,{title:"編輯",icon:"mdi-pencil",size:"small",variant:"text"}),null,16)]),default:a(({isActive:o})=>[t(T,{class:"review-border"},{default:a(()=>[t(N,{class:"d-flex justify-space-between align-center"},{default:a(()=>[l[10]||(l[10]=d("span",{class:"text-blue"},"編輯人員",-1)),t(c,{icon:"",variant:"text",onClick:l[0]||(l[0]=w=>y())},{default:a(()=>[t(O,null,{default:a(()=>[...l[9]||(l[9]=[m("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),t(z,null,{default:a(()=>[t(R,{"hide-details":"auto",modelValue:p.user.email,"onUpdate:modelValue":l[1]||(l[1]=w=>p.user.email=w),density:"compact",label:"帳號/信箱","prepend-inner-icon":"mdi-email",variant:"solo",required:"",class:"mb-5",readonly:""},{label:a(()=>[...l[11]||(l[11]=[m(" 帳號/信箱 ",-1)])]),_:1},8,["modelValue"]),t(R,{"hide-details":"auto",modelValue:p.user.name,"onUpdate:modelValue":l[2]||(l[2]=w=>p.user.name=w),density:"compact",label:"使用者名稱","prepend-inner-icon":"mdi-account",variant:"solo",required:"",class:"mb-5",readonly:""},{label:a(()=>[...l[12]||(l[12]=[m(" 使用者名稱 ",-1)])]),_:1},8,["modelValue"]),t($,{"hide-details":"auto",modelValue:i(s).unit,"onUpdate:modelValue":l[3]||(l[3]=w=>i(s).unit=w),density:"compact",label:"單位","prepend-inner-icon":"mdi-domain",variant:"underlined",required:"",class:"mb-5",items:i(V)},{label:a(()=>[...l[13]||(l[13]=[m(" 單位 ",-1)])]),_:1},8,["modelValue","items"]),d("div",ae,[l[16]||(l[16]=d("strong",null,"狀態:",-1)),t(c,{class:"review-button-edit mx-4",color:i(s).review==="啟用"?"success":"error",variant:"tonal",onClick:l[4]||(l[4]=w=>n())},{default:a(()=>[i(s).review==="啟用"?(f(),x("span",re,[...l[14]||(l[14]=[d("span",{class:"review-button-content"},"啟用",-1),d("span",{class:"review-button-circle"},"●",-1)])])):(f(),x("span",oe,[...l[15]||(l[15]=[d("span",{class:"review-button-circle"},"●",-1),d("span",{class:"review-button-content"},"停用",-1)])]))]),_:1},8,["color"])]),t($,{modelValue:i(s).roles,"onUpdate:modelValue":l[5]||(l[5]=w=>i(s).roles=w),items:i(b),label:"角色",variant:"underlined",chips:"",multiple:""},null,8,["modelValue","items"])]),_:1}),t(I,null,{default:a(()=>[t(U),t(c,{text:"取消",variant:"outlined",color:"grey-darken-2",onClick:l[6]||(l[6]=w=>y())}),t(c,{text:"確認",variant:"outlined",color:"primary",onClick:l[7]||(l[7]=w=>g())})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},ie=B(ne,[["__scopeId","data-v-026cb05c"]]),ue={__name:"delete",props:{user:{type:Object,required:!0,default:()=>({id:"",email:"",name:"",phone:"",unit:"",createTime:"",review:"",reason:"",rejectReason:"",roles:[]})}},emits:["delete-user"],setup(p,{emit:r}){const V=p,b=r,s=v({id:"",review:"",unit:"",roles:[]});C(()=>{s.value.review=V.user.review,s.value.unit=V.user.unit,s.value.roles=V.user.roles});const u=v(!1);function g(){b("delete-user",V.user.id),u.value=!1}function y(){u.value=!1}return(n,e)=>(f(),j(S,{modelValue:i(u),"onUpdate:modelValue":e[3]||(e[3]=l=>A(u)?u.value=l:null),"max-width":"500"},{activator:a(({props:l})=>[t(c,D(l,{title:"刪除",icon:"mdi-trash-can",size:"small",variant:"text"}),null,16)]),default:a(({isActive:l})=>[t(T,null,{default:a(()=>[t(N,{class:"d-flex justify-space-between align-center"},{default:a(()=>[e[5]||(e[5]=d("span",{class:"text-blue"},null,-1)),t(c,{icon:"",variant:"text",onClick:e[0]||(e[0]=o=>y())},{default:a(()=>[t(O,null,{default:a(()=>[...e[4]||(e[4]=[m("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),t(z,null,{default:a(()=>[...e[6]||(e[6]=[d("div",{class:"delete-info"},[d("img",{src:P,alt:"Delete Alert Icon",class:"delete-alert"}),d("span",null,[m("是否確認"),d("span",{class:"text-red"},"刪除"),m("?")])],-1)])]),_:1}),t(I,{class:"d-flex justify-center mb-5"},{default:a(()=>[t(c,{text:"取消",variant:"outlined",color:"grey-darken-2",onClick:e[1]||(e[1]=o=>y())}),t(U,{style:{flex:"0.25"}}),t(c,{text:"確認",variant:"outlined",color:"primary",onClick:e[2]||(e[2]=o=>g())})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},de=B(ue,[["__scopeId","data-v-e7c48700"]]),me={key:1,style:{color:"red"}},ve={key:2,style:{color:"green"}},pe={key:3,style:{color:"gray"}},fe={key:4},Oe={__name:"list",setup(p){const r=v([]);C(()=>{var n=G("users");n?r.value=n:L.get("api/users").then(e=>{r.value=e.data,H("users",r.value,60)})});const V=v(""),b=v(""),s=W(()=>r.value.filter(n=>{const e=!V.value||n.name&&n.name.includes(V.value)||n.userName&&n.userName.includes(V.value)||n.email&&n.email.includes(V.value),l=!b.value||n.roles&&n.roles.includes(b.value);return e&&l}).sort((n,e)=>n.review==="待審核"&&e.review!=="待審核"?-1:n.review!=="待審核"&&e.review==="待審核"?1:new Date(e.createTime)-new Date(n.createTime))),u=v([{title:"使用者",key:"name"},{title:"帳號/E-mail",key:"email"},{title:"角色",key:"role"},{title:"單位",key:"unit"},{title:"狀態",key:"status",sortable:!1},{title:"編輯",key:"edit",sortable:!1},{title:"刪除",key:"delete",sortable:!1}]),g=v(["一般使用者","管理員","測試人員","師父","徒弟"]);v(),v({name:"",email:"",unit:"",phone:"",reason:""});function y(n){r.value=r.value.filter(e=>e.id!==n)}return(n,e)=>(f(),x(E,null,[t(X,{class:"mt-1"},{default:a(()=>[t(F,{cols:"4"},{default:a(()=>[t($,{label:"角色篩選",modelValue:b.value,"onUpdate:modelValue":e[0]||(e[0]=l=>b.value=l),items:g.value,variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","items"])]),_:1}),t(U),t(F,{cols:"4"},{default:a(()=>[t(R,{label:"搜尋",modelValue:V.value,"onUpdate:modelValue":e[1]||(e[1]=l=>V.value=l),density:"compact",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),t(T,null,{default:a(()=>[t(Y,null,{default:a(()=>[t(Z,null,{default:a(()=>[m(k(n.$root.subTitle),1)]),_:1})]),_:1}),t(_,{headers:u.value,items:s.value,density:"comfortable"},{"item.role":a(({item:l})=>[(f(!0),x(E,null,M(l.roles,o=>(f(),j(K,{key:o,class:"ma-1",color:"primary","text-color":"white",size:"small"},{default:a(()=>[m(k(o),1)]),_:2},1024))),128))]),"item.status":a(({item:l})=>[l.review==="待審核"?(f(),j(se,{key:0,user:l},null,8,["user"])):l.review==="退件"?(f(),x("span",me,k(l.review),1)):l.review==="啟用"?(f(),x("span",ve,k(l.review),1)):l.review==="停用"?(f(),x("span",pe,k(l.review),1)):(f(),x("span",fe,k(l.review),1))]),"item.edit":a(({item:l})=>[l.review!=="待審核"?(f(),j(ie,{key:0,user:l},null,8,["user"])):q("",!0)]),"item.delete":a(({item:l})=>[t(de,{user:l,onDeleteUser:y},null,8,["user"])]),_:1},8,["headers","items"])]),_:1})],64))}};export{Oe as default};
