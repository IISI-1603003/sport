import{e as u,f as P,s as _,j as E,w as n,q as I,u as s,k as L,r as M,o as w,b as m,a as x,d as o,F as T,y as j,m as r,z as v,t as b,V as N,p as z,h as D}from"./index-CAaNREQq.js";import{a as k}from"./functions-D4rvsJVY.js";import{p as C,a as R,n as $,e as A,u as G}from"./rules-Bm4BX98a.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as J}from"./VForm-IHaiDyVq.js";const K={class:"label-item"},O={class:"label-item"},Q={__name:"registerStep2",setup(W){const V=_(),d=u(!1),c=u(!0),p=u(!1),f=u(!1),a=u({userName:"",name:"",email:"",gender:"",unit:"",reason:"",pw:"",pwConfirm:""}),i=u({userName:"",name:"",gender:"",email:"",unit:""}),q={userName:"帳號/員工編號",name:"姓名",gender:"性別",email:"信箱",unit:"單位"};P(()=>{const t=V.currentRoute.value.query;i.value.userName=t.userName||"",i.value.name=t.name||"",i.value.gender=t.gender,i.value.email=t.email||"",i.value.unit=t.unit,a.value.userName=t.userName,a.value.name=t.name,a.value.email=t.email,a.value.gender=t.gender,a.value.unit=t.unit});const B=t=>q[t]||t;function S(){p.value=!p.value}function U(){f.value=!f.value}const F=async()=>{const t={pw:C,pwConfirm:e=>R(a.value.pw,e),userName:G,email:A,name:$};for(const e in t){const g=t[e];if(a.value[e]!==void 0){const l=g(a.value[e]);if(l!==!0){alert(`${l}`);return}}}d.value=!0;try{await D.signUp({userName:a.value.userName,name:a.value.name,email:a.value.email,gender:a.value.gender,unit:a.value.unit,reason:a.value.reason,pw:a.value.pw},{headers:{}}).then(e=>{V.push({path:"/sign-in/registerSuccess",query:{}}),d.value=!1}).catch(e=>{k(e),d.value=!1})}catch(e){k(e)}finally{d.value=!1}};return(t,e)=>{const g=M("router-link");return w(),E(J,{onSubmit:L(F,["prevent"]),modelValue:s(c),"onUpdate:modelValue":e[3]||(e[3]=l=>I(c)?c.value=l:null),class:"mx-auto register-form"},{default:n(()=>[e[10]||(e[10]=m("h2",{class:"text-center mb-3"},"一般帳號註冊",-1)),(w(!0),x(T,null,j(s(i),(l,y)=>(w(),x("div",{key:y,class:"label-container text-start mt-3"},[m("span",K,v(B(y)),1),e[4]||(e[4]=r()),m("span",O,v(l),1)]))),128)),o(b,{"hide-details":"auto",modelValue:s(a).reason,"onUpdate:modelValue":e[0]||(e[0]=l=>s(a).reason=l),density:"compact",label:"申請原因","prepend-inner-icon":"mdi-information",variant:"solo",required:"",class:"register-item mb-2"},{label:n(()=>[...e[5]||(e[5]=[r(" 申請原因 ",-1)])]),_:1},8,["modelValue"]),o(b,{"hide-details":"auto",modelValue:s(a).pw,"onUpdate:modelValue":e[1]||(e[1]=l=>s(a).pw=l),type:s(p)?"text":"password",density:"compact",label:"密碼","prepend-inner-icon":"mdi-lock",variant:"solo",required:"",class:"register-item mb-2",rules:[s(C)]},{label:n(()=>[...e[6]||(e[6]=[m("span",{class:"text-danger"},"*",-1),r("密碼 ",-1)])]),"append-inner":n(()=>[o(N,{onClick:S,class:"cursor-pointer"},{default:n(()=>[r(v(s(p)?"mdi-eye":"mdi-eye-off"),1)]),_:1})]),_:1},8,["modelValue","type","rules"]),o(b,{"hide-details":"auto",modelValue:s(a).pwConfirm,"onUpdate:modelValue":e[2]||(e[2]=l=>s(a).pwConfirm=l),type:s(f)?"text":"password",density:"compact",label:"確認密碼","prepend-inner-icon":"mdi-lock-check",variant:"solo",required:"",rules:[l=>s(R)(s(a).pw,l)],class:"register-item mb-2"},{label:n(()=>[...e[7]||(e[7]=[m("span",{class:"text-danger"},"*",-1),r("確認密碼 ",-1)])]),"append-inner":n(()=>[o(N,{onClick:U,class:"cursor-pointer"},{default:n(()=>[r(v(s(f)?"mdi-eye":"mdi-eye-off"),1)]),_:1})]),_:1},8,["modelValue","type","rules"]),o(z,{type:"submit",variant:"flat",color:"primary",block:"",class:"mt-5",loading:s(d)},{default:n(()=>[...e[8]||(e[8]=[r(" 註冊 ",-1)])]),_:1},8,["loading"]),e[11]||(e[11]=m("div",{class:"or"},"或",-1)),o(g,{to:"/sign-in",class:"text-decoration-none"},{default:n(()=>[...e[9]||(e[9]=[r("回登入",-1)])]),_:1})]),_:1},8,["modelValue"])}}},ae=H(Q,[["__scopeId","data-v-f603ab4c"]]);export{ae as default};
