import{d as m,e as I,f as V,h as B,w as a,i as b,r as U,o as k,a as e,b as n,j as g,V as v,k as l,u as s,v as x,c as N,l as _,m as y}from"./index-Dfwmr34z.js";import{a as q}from"./auth-eb5PpWEc.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as D}from"./VForm-Dq5Ksm3-.js";const M={class:"d-flex align-center ga-3"},S={class:"d-flex align-center ga-3"},T={class:"d-flex align-center ga-3"},$=["src"],j={class:"or-container"},E={__name:"index",setup(F){const{signIn:w}=q(),p=m(!1),i=m({username:"1144",p:"Tiss2025@test123"}),f=m(),d=m({guid:null,code:null});I(async()=>{c()});const c=async()=>{let{data:r}=await V.captcha(),t=btoa(new Uint8Array(r).reduce((u,o)=>u+String.fromCharCode(o),""));f.value=`data:image/png;base64,${t}`},C=async()=>{p.value||(p.value=!0,V.signIn(i.value,{headers:{code:d.value.code}}).then(r=>{w(r.data)}).catch(r=>{alert(r.response.data||"系統異常，請稍後再試。"),c()}).finally(()=>{p.value=!1}))};return(r,t)=>{const u=U("router-link");return k(),B(D,{onSubmit:b(C,["prevent"])},{default:a(()=>[t[13]||(t[13]=e("h2",{class:"text-center"},"登入",-1)),e("div",M,[n(v,null,{default:a(()=>[...t[5]||(t[5]=[l("mdi-account",-1)])]),_:1}),g(e("input",{type:"text",class:"input",required:"","onUpdate:modelValue":t[0]||(t[0]=o=>s(i).username=o)},null,512),[[x,s(i).username]])]),e("div",S,[n(v,null,{default:a(()=>[...t[6]||(t[6]=[l("mdi-lock",-1)])]),_:1}),g(e("input",{type:"password",class:"input",required:"","onUpdate:modelValue":t[1]||(t[1]=o=>s(i).p=o)},null,512),[[x,s(i).p]])]),n(u,{to:"/sign-in/forget",class:"float-right text-decoration-none"},{default:a(()=>[...t[7]||(t[7]=[l(" 忘記密碼 ",-1)])]),_:1}),t[14]||(t[14]=e("br",null,null,-1)),e("div",T,[g(e("input",{id:"captcha",ref:"captchaRef",type:"text","onUpdate:modelValue":t[2]||(t[2]=o=>s(d).code=o),onInput:t[3]||(t[3]=o=>s(d).code=s(d).code.toUpperCase()),placeholder:"輸入驗證碼",class:"input input-bordered flex-grow-1",required:""},null,544),[[x,s(d).code]]),s(f)?(k(),N("img",{key:0,src:s(f),alt:"captcha",class:"ga-3",style:{"max-width":"150px"}},null,8,$)):_("",!0),n(v,{onClick:t[4]||(t[4]=b(o=>c(),["prevent"]))},{default:a(()=>[...t[8]||(t[8]=[l("mdi-refresh",-1)])]),_:1})]),n(y,{type:"submit",variant:"flat",color:"primary",block:"",class:"mt-5",loading:s(p)},{default:a(()=>[...t[9]||(t[9]=[l(" 登入 ",-1)])]),_:1},8,["loading"]),t[15]||(t[15]=e("div",{class:"or"},"或",-1)),e("div",j,[n(y,{color:"secondary",class:"or-item my-1"},{default:a(()=>[n(u,{to:"/sign-in/register",class:"text-decoration-none"},{default:a(()=>[...t[10]||(t[10]=[l(" 一般帳號註冊 ",-1)])]),_:1})]),_:1}),t[12]||(t[12]=e("div",{class:"ml-3"},null,-1)),n(y,{color:"success",class:"or-item my-1"},{default:a(()=>[n(u,{to:"/sign-in/registerAD",class:"text-decoration-none"},{default:a(()=>[...t[11]||(t[11]=[l(" AD帳號註冊 ",-1)])]),_:1})]),_:1})])]),_:1})}}},J=A(E,[["__scopeId","data-v-a934f736"]]);export{J as default};
