import{u as $,b as z,c as M,i as N,S as Q}from"./index-B9xyScrC.js";import{_ as C,t as j}from"./tiredContainer-DpzRAiln.js";import{K as T,e as m,H as g,f as V,Q as k,N as A,a as _,o as p,b as y,F as S,l as q,ar as W,u as o,d as u,aR as Z,y as E,w as h,m as I,z as Y,p as G,j as R,aU as D,V as J,M as L}from"./index-1UwmURaf.js";import{C as b,_ as w}from"./noData-NDQobSB3.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as P,a as H}from"./VRow--M4qGh76.js";import"./VSnackbar-BcVvtD_g.js";import"./layout-_iiDziM-.js";import"./VCard-BC1Mzk_n.js";/* empty css              */$(z);$(M);const X={__name:"tiredChart",setup(O){const s=T("responseTired"),n=m(null);let t=null;const c=g(()=>s.value&&s.value.length>0),l=g(()=>{if(!c.value)return null;const a=s.value.map(i=>i.date),v=s.value.map(i=>i.hb),r=s.value.map(i=>i.bun),f=s.value.map(i=>i.ck);return{tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{data:["Hb","BUN","CK"],top:0},grid:{left:"3%",right:"4%",bottom:"10%",containLabel:!0},xAxis:{type:"category",data:a,axisLabel:{rotate:45}},yAxis:[{type:"value",name:"Hb/BUN",position:"left"},{type:"value",name:"CK",position:"right"}],dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100}],series:[{name:"Hb",type:"line",data:v,smooth:!0,itemStyle:{color:"#ff6b9d"},lineStyle:{color:"#ff6b9d"}},{name:"BUN",type:"line",data:r,smooth:!0,itemStyle:{color:"#3b82f6"},lineStyle:{color:"#3b82f6"}},{name:"CK",type:"bar",data:f,yAxisIndex:1,itemStyle:{color:"#a855f7"}}]}}),d=()=>{t&&(t.clear(),t.setOption({title:{text:"暫無資料",left:"center",top:"middle",textStyle:{color:"#888",fontSize:22}},graphic:[{type:"text",left:"center",top:"55%",style:{text:"請選擇條件後查詢",fill:"#aaa",font:"16px sans-serif"}}]}))},e=()=>{n.value&&(t&&t.dispose(),t=N(n.value),c.value&&l.value?t.setOption(l.value):d())};return V(async()=>{await k(),e()}),A(l,()=>{t&&l.value&&c.value?t.setOption(l.value):d()}),A(()=>s.value,async()=>{await k(),e()},{deep:!0}),(a,v)=>(p(),_(S,null,[v[0]||(v[0]=y("h3",null,"歷次檢測",-1)),y("div",{ref_key:"chartRef",ref:n,style:{width:"100%",height:"400px"}},null,512)],64))}},ee={class:"text-warning text-body-2 ml-1"},te={class:"body-indicators"},ae={__name:"bodyContainer",setup(O){const s=T("responseBody",m([])),n=g(()=>s.value.length<8),t=g(()=>s.value.map(e=>e.體重).filter(e=>e!=null)),c=g(()=>s.value.map(e=>e.體脂率).filter(e=>e!=null)),l=g(()=>s.value.map(e=>e.水份重).filter(e=>e!=null)),d=g(()=>s.value.map(e=>e.去脂重).filter(e=>e!=null));return(e,a)=>(p(),_(S,null,[q(y("p",ee,"Q2~Q4測驗次數不足8次，僅供參考",512),[[W,o(n)]]),y("div",te,[u(C,{title:"體重",data:o(t),color:("CHART_COLORS"in e?e.CHART_COLORS:o(b))[0]},null,8,["data","color"]),u(C,{title:"體脂率",data:o(c),color:("CHART_COLORS"in e?e.CHART_COLORS:o(b))[1]},null,8,["data","color"]),u(C,{title:"總水份",data:o(l),color:("CHART_COLORS"in e?e.CHART_COLORS:o(b))[2]},null,8,["data","color"]),u(C,{title:"去脂重",data:o(d),color:("CHART_COLORS"in e?e.CHART_COLORS:o(b))[3]},null,8,["data","color"])])],64))}},se=U(ae,[["__scopeId","data-v-861c8776"]]),le={class:"indicator-buttons"},oe={__name:"bodyChart",setup(O){const s=T("responseBody",m([])),n=m(null);let t=null;const c=[{key:"體重",label:"體重"},{key:"體脂率",label:"體脂率"},{key:"肌肉量",label:"肌肉量"},{key:"脂肪重",label:"脂肪重"},{key:"水份比例",label:"水份比例"},{key:"水份重",label:"水份重"}],l=m(["體重","體脂率"]),d=g(()=>s.value.map(r=>({...r,水份比例:r.體重&&r.水份重?((1-(r.體重-r.水份重)/r.體重)*100).toFixed(1):0}))),e=r=>{const f=l.value.indexOf(r);f>-1?l.value.splice(f,1):l.value.length<2&&l.value.push(r)},a=()=>{if(!n.value||d.value.length===0)return;t&&t.dispose(),t=N(n.value);const r=d.value.map(x=>x.date),f=l.value.map((x,B)=>{const F=d.value.map(K=>parseFloat(K[x])||0);return{name:x,type:"line",yAxisIndex:v(x),data:F,lineStyle:{color:b[B%b.length]},itemStyle:{color:b[B%b.length]}}}),i={tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{data:l.value,top:0},grid:{left:"3%",right:"4%",bottom:"10%",containLabel:!0},xAxis:{type:"category",data:r,axisLabel:{rotate:45}},yAxis:[{type:"value",name:"重量 (kg)",position:"left"},{type:"value",name:"比例 (%)",position:"right"}],dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:0,end:100}],series:f};t.setOption(i)},v=r=>["體脂率","水份比例"].includes(r)?1:0;return A([l,d],()=>{k(()=>{a()})},{deep:!0}),V(()=>{k(()=>{a()})}),Z(()=>{t&&t.dispose()}),(r,f)=>(p(),_("div",null,[f[0]||(f[0]=y("h3",null,"組成變化追蹤",-1)),y("div",le,[(p(),_(S,null,E(c,i=>u(G,{key:i.key,color:o(l).includes(i.key)?"primary":"default",variant:o(l).includes(i.key)?"flat":"outlined",size:"small",onClick:x=>e(i.key),class:"ma-1"},{default:h(()=>[I(Y(i.label),1)]),_:2},1032,["color","variant","onClick"])),64))]),y("div",{ref_key:"chartContainer",ref:n,class:"chart-container"},null,512)]))}},ne=U(oe,[["__scopeId","data-v-f2fbe42d"]]),re={key:0,class:"pa-4"},ie={key:0,class:"box bg-white"},ue={key:0,class:"box bg-white"},be={__name:"tiredBody",setup(O){const s=m(""),n=m({}),t=m({}),c=m("");L("responseTired",n),L("responseBody",t);const l=async e=>{try{const a=await D.getPhysiologyIndicatorTired(s.value,e);n.value=a.data||{};const v=await D.getPhysiologyIndicatorBody(s.value,e);t.value=v.data||{}}catch(a){console.error("獲取數據失敗:",a),n.value={},t.value={}}},d=async e=>{const a=e.queryString;s.value=e.selectedUserId,await l(a),n.value?.length===0||t.value?.length===0?c.value=`${e.selectedUserName}在所選日期範圍內${e.sDate}~${e.eDate}無資料。`:c.value=""};return(e,a)=>(p(),_(S,null,[u(Q,{onSearch:d},{icon:h(()=>[u(J,null,{default:h(()=>[...a[0]||(a[0]=[I("mdi-heart-pulse",-1)])]),_:1})]),title:h(()=>[...a[1]||(a[1]=[I(" 生理監控 ",-1)])]),dashboardTypes:h(()=>[...a[2]||(a[2]=[y("select",{class:"select"},[y("option",null,"疲勞監控與身體組成分析")],-1)])]),_:1}),o(n)?.length>0&&o(t)?.length>0?(p(),_("section",re,[u(P,null,{default:h(()=>[u(H,{cols:"6"},{default:h(()=>[o(n).length>0?(p(),_("div",ie,[a[3]||(a[3]=y("h2",null,"疲勞監控",-1)),u(j),u(X)])):(p(),R(w,{key:1,message:o(c)},null,8,["message"]))]),_:1}),u(H,{cols:"6"},{default:h(()=>[o(t).length>0?(p(),_("div",ue,[a[4]||(a[4]=y("h2",null,"身體組成監控 ",-1)),u(se),u(ne)])):(p(),R(w,{key:1,message:o(c)},null,8,["message"]))]),_:1})]),_:1})])):(p(),R(w,{key:1,message:o(c)},null,8,["message"]))],64))}};export{be as default};
