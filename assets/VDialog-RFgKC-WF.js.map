{"version":3,"file":"VDialog-RFgKC-WF.js","sources":["../../node_modules/vuetify/lib/components/VDialog/VDialog.js"],"sourcesContent":["import { createVNode as _createVNode, mergeProps as _mergeProps } from \"vue\";\n// Styles\nimport \"./VDialog.css\";\n\n// Components\nimport { VDialogTransition } from \"../transitions/index.js\";\nimport { VDefaultsProvider } from \"../VDefaultsProvider/index.js\";\nimport { VOverlay } from \"../VOverlay/index.js\";\nimport { makeVOverlayProps } from \"../VOverlay/VOverlay.js\"; // Composables\nimport { forwardRefs } from \"../../composables/forwardRefs.js\";\nimport { useProxiedModel } from \"../../composables/proxiedModel.js\";\nimport { useScopeId } from \"../../composables/scopeId.js\"; // Utilities\nimport { mergeProps, nextTick, onBeforeUnmount, ref, watch } from 'vue';\nimport { focusableChildren, genericComponent, IN_BROWSER, propsFactory, useRender } from \"../../util/index.js\"; // Types\nexport const makeVDialogProps = propsFactory({\n  fullscreen: Boolean,\n  retainFocus: {\n    type: Boolean,\n    default: true\n  },\n  scrollable: Boolean,\n  ...makeVOverlayProps({\n    origin: 'center center',\n    scrollStrategy: 'block',\n    transition: {\n      component: VDialogTransition\n    },\n    zIndex: 2400\n  })\n}, 'VDialog');\nexport const VDialog = genericComponent()({\n  name: 'VDialog',\n  props: makeVDialogProps(),\n  emits: {\n    'update:modelValue': value => true,\n    afterEnter: () => true,\n    afterLeave: () => true\n  },\n  setup(props, _ref) {\n    let {\n      emit,\n      slots\n    } = _ref;\n    const isActive = useProxiedModel(props, 'modelValue');\n    const {\n      scopeId\n    } = useScopeId();\n    const overlay = ref();\n    async function onFocusin(e) {\n      const before = e.relatedTarget;\n      const after = e.target;\n      await nextTick();\n      if (isActive.value && before !== after && overlay.value?.contentEl &&\n      // We're the topmost dialog\n      overlay.value?.globalTop &&\n      // It isn't the document or the dialog body\n      ![document, overlay.value.contentEl].includes(after) &&\n      // It isn't inside the dialog body\n      !overlay.value.contentEl.contains(after)) {\n        const focusable = focusableChildren(overlay.value.contentEl);\n        focusable[0]?.focus();\n      }\n    }\n    function onKeydown(e) {\n      if (e.key !== 'Tab' || !overlay.value?.contentEl) return;\n      const focusable = focusableChildren(overlay.value.contentEl);\n      if (!focusable.length) return;\n      const firstElement = focusable[0];\n      const lastElement = focusable[focusable.length - 1];\n      const active = document.activeElement;\n      if (e.shiftKey && active === firstElement) {\n        e.preventDefault();\n        lastElement.focus();\n      } else if (!e.shiftKey && active === lastElement) {\n        e.preventDefault();\n        firstElement.focus();\n      }\n    }\n    onBeforeUnmount(() => {\n      document.removeEventListener('focusin', onFocusin);\n      document.removeEventListener('keydown', onKeydown);\n    });\n    if (IN_BROWSER) {\n      watch(() => isActive.value && props.retainFocus, val => {\n        if (val) {\n          document.addEventListener('focusin', onFocusin, {\n            once: true\n          });\n          document.addEventListener('keydown', onKeydown);\n        } else {\n          document.removeEventListener('focusin', onFocusin);\n          document.removeEventListener('keydown', onKeydown);\n        }\n      }, {\n        immediate: true\n      });\n    }\n    function onAfterEnter() {\n      emit('afterEnter');\n      if ((props.scrim || props.retainFocus) && overlay.value?.contentEl && !overlay.value.contentEl.contains(document.activeElement)) {\n        overlay.value.contentEl.focus({\n          preventScroll: true\n        });\n      }\n    }\n    function onAfterLeave() {\n      emit('afterLeave');\n    }\n    watch(isActive, async val => {\n      if (!val) {\n        await nextTick();\n        overlay.value.activatorEl?.focus({\n          preventScroll: true\n        });\n      }\n    });\n    useRender(() => {\n      const overlayProps = VOverlay.filterProps(props);\n      const activatorProps = mergeProps({\n        'aria-haspopup': 'dialog'\n      }, props.activatorProps);\n      const contentProps = mergeProps({\n        tabindex: -1\n      }, props.contentProps);\n      return _createVNode(VOverlay, _mergeProps({\n        \"ref\": overlay,\n        \"class\": ['v-dialog', {\n          'v-dialog--fullscreen': props.fullscreen,\n          'v-dialog--scrollable': props.scrollable\n        }, props.class],\n        \"style\": props.style\n      }, overlayProps, {\n        \"modelValue\": isActive.value,\n        \"onUpdate:modelValue\": $event => isActive.value = $event,\n        \"aria-modal\": \"true\",\n        \"activatorProps\": activatorProps,\n        \"contentProps\": contentProps,\n        \"height\": !props.fullscreen ? props.height : undefined,\n        \"width\": !props.fullscreen ? props.width : undefined,\n        \"maxHeight\": !props.fullscreen ? props.maxHeight : undefined,\n        \"maxWidth\": !props.fullscreen ? props.maxWidth : undefined,\n        \"role\": \"dialog\",\n        \"onAfterEnter\": onAfterEnter,\n        \"onAfterLeave\": onAfterLeave\n      }, scopeId), {\n        activator: slots.activator,\n        default: function () {\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n          return _createVNode(VDefaultsProvider, {\n            \"root\": \"VDialog\"\n          }, {\n            default: () => [slots.default?.(...args)]\n          });\n        }\n      });\n    });\n    return forwardRefs({}, overlay);\n  }\n});\n//# sourceMappingURL=VDialog.js.map"],"names":["makeVDialogProps","propsFactory","makeVOverlayProps","VDialogTransition","VDialog","genericComponent","value","props","_ref","emit","slots","isActive","useProxiedModel","scopeId","useScopeId","overlay","ref","onFocusin","e","before","after","nextTick","focusableChildren","onKeydown","focusable","firstElement","lastElement","active","onBeforeUnmount","IN_BROWSER","watch","val","onAfterEnter","onAfterLeave","useRender","overlayProps","VOverlay","activatorProps","mergeProps","contentProps","_createVNode","_mergeProps","$event","_len","args","_key","VDefaultsProvider","forwardRefs"],"mappings":"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","x_google_ignoreList":[0]}