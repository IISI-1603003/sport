import{f as m,h as $,j,o as p,w as a,e as t,d,m as f,b as x,y as q,u as n,t as g,z as D,n as A,a as L,A as W,F as E,s as M}from"./index-DqmTDoDs.js";import{_ as P,g as G,s as H}from"./delete-alert-icon-C4WYVWpg.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as U,a as N,b as z,c as I}from"./VCard-CgHR1yKO.js";import{V as c,a as J}from"./VBtn-piz4QD9w.js";import{V as O}from"./index-DqUa_ESF.js";import{V as R}from"./VTextField-DAyEXajC.js";import{V as C,a as K}from"./VSelect-Dxefn8kq.js";import{V as Q}from"./VTextarea-D8f_bUN4.js";import{V as T}from"./VSpacer-DEGOIKRM.js";import{V as S}from"./VDialog-1KMYd9pd.js";import{V as X,a as F}from"./VRow-DeIXmLbU.js";import{V as Y}from"./VDataTable-9B-cyb49.js";import"./VAvatar-Du42SJ0L.js";import"./index-CVc2CCsc.js";import"./forwardRefs-hYDfs0pe.js";import"./VList-B4Eljeyq.js";import"./VOverlay-knTbxnoM.js";import"./scopeId-DMsoizje.js";/* empty css              */const Z={class:"mt-4"},_={key:0,class:"mt-4"},h={key:1},ee={__name:"review",props:{user:{type:Object,required:!0,default:()=>({id:"",email:"",name:"",phone:"",unit:"",createTime:"",review:"",reason:"",rejectReason:"",roles:[]})}},setup(v){const r=v,V=m(["運動科學中心","健康促進與運動","廠商-資拓","體育器材研發","運動營養學","運動心理學","體適能測試","運動生物力學","運動傷害預防","運動恢復技術","健身房經營管理","團隊運動訓練","個人健身教練培訓","社區運動活動","運動科技創新"]),y=m(["一般使用者","管理員","測試人員","師父","徒弟"]),s=m({id:"",review:"",rejectReason:"",roles:[]});$(()=>{s.value.review=r.user.review,s.value.rejectReason=r.user.rejectReason,s.value.unit=r.user.unit});const u=m(!1);function k(){s.value.id=r.user.id,r.user.review=s.value.review,r.user.rejectReason=s.value.rejectReason,r.user.unit=s.value.unit,r.user.roles=s.value.roles,console.log("送出審核資料:",s.value),u.value=!1}function b(){s.value.review=r.user.review,s.value.rejectReason=r.user.rejectReason,s.value.unit=r.user.unit,s.value.roles=r.user.roles,u.value=!1}return(i,e)=>(p(),j(S,{modelValue:n(u),"onUpdate:modelValue":e[9]||(e[9]=l=>A(u)?u.value=l:null),"max-width":"500"},{activator:a(({props:l})=>[t(c,D(l,{title:"審核狀態",size:"small",color:"warning",text:"審核"}),null,16)]),default:a(({isActive:l})=>[t(U,{class:"review-border"},{default:a(()=>[t(N,{class:"d-flex justify-space-between align-center"},{default:a(()=>[e[11]||(e[11]=d("span",{class:"text-blue"},"審核狀態",-1)),t(c,{icon:"",variant:"text",onClick:e[0]||(e[0]=o=>b())},{default:a(()=>[t(O,null,{default:a(()=>[...e[10]||(e[10]=[f("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),t(z,null,{default:a(()=>[t(R,{"hide-details":"auto",modelValue:v.user.email,"onUpdate:modelValue":e[1]||(e[1]=o=>v.user.email=o),density:"compact",label:"帳號/信箱","prepend-inner-icon":"mdi-email",variant:"solo",required:"",class:"mb-5",readonly:""},{label:a(()=>[...e[12]||(e[12]=[f(" 帳號/信箱 ",-1)])]),_:1},8,["modelValue"]),t(R,{"hide-details":"auto",modelValue:v.user.name,"onUpdate:modelValue":e[2]||(e[2]=o=>v.user.name=o),density:"compact",label:"使用者名稱","prepend-inner-icon":"mdi-account",variant:"solo",required:"",class:"mb-5",readonly:""},{label:a(()=>[...e[13]||(e[13]=[f(" 使用者名稱 ",-1)])]),_:1},8,["modelValue"]),t(C,{"hide-details":"auto",modelValue:n(s).unit,"onUpdate:modelValue":e[3]||(e[3]=o=>n(s).unit=o),density:"compact",label:"單位","prepend-inner-icon":"mdi-domain",variant:"underlined",required:"",class:"mb-5",items:n(V)},{label:a(()=>[...e[14]||(e[14]=[f(" 單位 ",-1)])]),_:1},8,["modelValue","items"]),d("div",null,[e[15]||(e[15]=d("strong",null,"申請原因:",-1)),f(" "+g(v.user.reason),1)]),d("div",null,[e[16]||(e[16]=d("strong",null,"申請時間:",-1)),f(" "+g(v.user.createTime),1)]),d("div",Z,[e[19]||(e[19]=d("strong",null,"審核狀態:",-1)),t(J,{class:"mx-4",modelValue:n(s).review,"onUpdate:modelValue":e[4]||(e[4]=o=>n(s).review=o),mandatory:""},{default:a(()=>[t(c,{class:"review-button mx-4",value:"啟用",color:"success",variant:"tonal"},{default:a(()=>[...e[17]||(e[17]=[f("啟用",-1)])]),_:1}),t(c,{class:"review-button mx-4",value:"退件",color:"error",variant:"tonal"},{default:a(()=>[...e[18]||(e[18]=[f("退件",-1)])]),_:1})]),_:1},8,["modelValue"])]),n(s).review==="退件"?(p(),x("div",_,[t(Q,{modelValue:n(s).rejectReason,"onUpdate:modelValue":e[5]||(e[5]=o=>n(s).rejectReason=o),label:"退件原因",density:"compact",variant:"solo",required:"",placeholder:"請輸入退件原因"},null,8,["modelValue"])])):q("",!0),n(s).review==="啟用"?(p(),x("div",h,[t(C,{modelValue:n(s).roles,"onUpdate:modelValue":e[6]||(e[6]=o=>n(s).roles=o),items:n(y),label:"角色",variant:"underlined",chips:"",multiple:""},null,8,["modelValue","items"])])):q("",!0)]),_:1}),t(I,null,{default:a(()=>[t(T),t(c,{text:"取消",variant:"outlined",color:"grey-darken-2",onClick:e[7]||(e[7]=o=>b())}),t(c,{text:"確認",variant:"outlined",color:"primary",onClick:e[8]||(e[8]=o=>k())})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},le=B(ee,[["__scopeId","data-v-0069311e"]]),te={class:"mt-4"},se={key:0},ae={key:1},re={__name:"edit",props:{user:{type:Object,required:!0,default:()=>({id:"",email:"",name:"",phone:"",unit:"",createTime:"",review:"",reason:"",rejectReason:"",roles:[]})}},setup(v){const r=v,V=m(["運動科學中心","健康促進與運動","廠商-資拓","體育器材研發","運動營養學","運動心理學","體適能測試","運動生物力學","運動傷害預防","運動恢復技術","健身房經營管理","團隊運動訓練","個人健身教練培訓","社區運動活動","運動科技創新"]),y=m(["一般使用者","管理員","測試人員","師父","徒弟"]),s=m({id:"",review:"",unit:"",roles:[]});$(()=>{s.value.review=r.user.review,s.value.unit=r.user.unit,s.value.roles=r.user.roles});const u=m(!1);function k(){s.value.id=r.user.id,r.user.review=s.value.review,r.user.unit=s.value.unit,r.user.roles=s.value.roles,console.log("送出編輯資料:",s.value),u.value=!1}function b(){s.value.review=r.user.review,s.value.unit=r.user.unit,s.value.roles=r.user.roles,u.value=!1}function i(){s.value.review=s.value.review=="停用"?"啟用":"停用"}return(e,l)=>(p(),j(S,{modelValue:n(u),"onUpdate:modelValue":l[8]||(l[8]=o=>A(u)?u.value=o:null),"max-width":"500"},{activator:a(({props:o})=>[t(c,D(o,{title:"編輯",icon:"mdi-pencil",size:"small",variant:"text"}),null,16)]),default:a(({isActive:o})=>[t(U,{class:"review-border"},{default:a(()=>[t(N,{class:"d-flex justify-space-between align-center"},{default:a(()=>[l[10]||(l[10]=d("span",{class:"text-blue"},"編輯人員",-1)),t(c,{icon:"",variant:"text",onClick:l[0]||(l[0]=w=>b())},{default:a(()=>[t(O,null,{default:a(()=>[...l[9]||(l[9]=[f("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),t(z,null,{default:a(()=>[t(R,{"hide-details":"auto",modelValue:v.user.email,"onUpdate:modelValue":l[1]||(l[1]=w=>v.user.email=w),density:"compact",label:"帳號/信箱","prepend-inner-icon":"mdi-email",variant:"solo",required:"",class:"mb-5",readonly:""},{label:a(()=>[...l[11]||(l[11]=[f(" 帳號/信箱 ",-1)])]),_:1},8,["modelValue"]),t(R,{"hide-details":"auto",modelValue:v.user.name,"onUpdate:modelValue":l[2]||(l[2]=w=>v.user.name=w),density:"compact",label:"使用者名稱","prepend-inner-icon":"mdi-account",variant:"solo",required:"",class:"mb-5",readonly:""},{label:a(()=>[...l[12]||(l[12]=[f(" 使用者名稱 ",-1)])]),_:1},8,["modelValue"]),t(C,{"hide-details":"auto",modelValue:n(s).unit,"onUpdate:modelValue":l[3]||(l[3]=w=>n(s).unit=w),density:"compact",label:"單位","prepend-inner-icon":"mdi-domain",variant:"underlined",required:"",class:"mb-5",items:n(V)},{label:a(()=>[...l[13]||(l[13]=[f(" 單位 ",-1)])]),_:1},8,["modelValue","items"]),d("div",te,[l[16]||(l[16]=d("strong",null,"狀態:",-1)),t(c,{class:"review-button-edit mx-4",color:n(s).review==="啟用"?"success":"error",variant:"tonal",onClick:l[4]||(l[4]=w=>i())},{default:a(()=>[n(s).review==="啟用"?(p(),x("span",se,[...l[14]||(l[14]=[d("span",{class:"review-button-content"},"啟用",-1),d("span",{class:"review-button-circle"},"●",-1)])])):(p(),x("span",ae,[...l[15]||(l[15]=[d("span",{class:"review-button-circle"},"●",-1),d("span",{class:"review-button-content"},"停用",-1)])]))]),_:1},8,["color"])]),t(C,{modelValue:n(s).roles,"onUpdate:modelValue":l[5]||(l[5]=w=>n(s).roles=w),items:n(y),label:"角色",variant:"underlined",chips:"",multiple:""},null,8,["modelValue","items"])]),_:1}),t(I,null,{default:a(()=>[t(T),t(c,{text:"取消",variant:"outlined",color:"grey-darken-2",onClick:l[6]||(l[6]=w=>b())}),t(c,{text:"確認",variant:"outlined",color:"primary",onClick:l[7]||(l[7]=w=>k())})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},oe=B(re,[["__scopeId","data-v-026cb05c"]]),ne={__name:"delete",props:{user:{type:Object,required:!0,default:()=>({id:"",email:"",name:"",phone:"",unit:"",createTime:"",review:"",reason:"",rejectReason:"",roles:[]})}},emits:["delete-user"],setup(v,{emit:r}){const V=v,y=r,s=m({id:"",review:"",unit:"",roles:[]});$(()=>{s.value.review=V.user.review,s.value.unit=V.user.unit,s.value.roles=V.user.roles});const u=m(!1);function k(){y("delete-user",V.user.id),u.value=!1}function b(){u.value=!1}return(i,e)=>(p(),j(S,{modelValue:n(u),"onUpdate:modelValue":e[3]||(e[3]=l=>A(u)?u.value=l:null),"max-width":"500"},{activator:a(({props:l})=>[t(c,D(l,{title:"刪除",icon:"mdi-trash-can",size:"small",variant:"text"}),null,16)]),default:a(({isActive:l})=>[t(U,null,{default:a(()=>[t(N,{class:"d-flex justify-space-between align-center"},{default:a(()=>[e[5]||(e[5]=d("span",{class:"text-blue"},null,-1)),t(c,{icon:"",variant:"text",onClick:e[0]||(e[0]=o=>b())},{default:a(()=>[t(O,null,{default:a(()=>[...e[4]||(e[4]=[f("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),t(z,null,{default:a(()=>[...e[6]||(e[6]=[d("div",{class:"delete-info"},[d("img",{src:P,alt:"Delete Alert Icon",class:"delete-alert"}),d("span",null,[f("是否確認"),d("span",{class:"text-red"},"刪除"),f("?")])],-1)])]),_:1}),t(I,{class:"d-flex justify-center mb-5"},{default:a(()=>[t(c,{text:"取消",variant:"outlined",color:"grey-darken-2",onClick:e[1]||(e[1]=o=>b())}),t(T,{style:{flex:"0.25"}}),t(c,{text:"確認",variant:"outlined",color:"primary",onClick:e[2]||(e[2]=o=>k())})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},ie=B(ne,[["__scopeId","data-v-e7c48700"]]),ue={key:1,style:{color:"red"}},de={key:2,style:{color:"green"}},me={key:3,style:{color:"gray"}},ve={key:4},Ne={__name:"list",setup(v){const r=m([]);$(()=>{var i=G("users");i?r.value=i:L.get("api/users").then(e=>{r.value=e.data,H("users",r.value,60)})});const V=m(""),y=m(""),s=W(()=>r.value.filter(i=>{const e=!V.value||i.name&&i.name.includes(V.value)||i.userName&&i.userName.includes(V.value)||i.email&&i.email.includes(V.value),l=!y.value||i.roles&&i.roles.includes(y.value);return e&&l}).sort((i,e)=>i.review==="待審核"&&e.review!=="待審核"?-1:i.review!=="待審核"&&e.review==="待審核"?1:new Date(e.createTime)-new Date(i.createTime))),u=m([{title:"使用者",key:"name"},{title:"帳號/E-mail",key:"email"},{title:"角色",key:"role"},{title:"單位",key:"unit"},{title:"狀態",key:"status",sortable:!1},{title:"編輯",key:"edit",sortable:!1},{title:"刪除",key:"delete",sortable:!1}]),k=m(["一般使用者","管理員","測試人員","師父","徒弟"]);m(),m({name:"",email:"",unit:"",phone:"",reason:""});function b(i){r.value=r.value.filter(e=>e.id!==i)}return(i,e)=>(p(),x(E,null,[t(X,{class:"mt-1"},{default:a(()=>[t(F,{cols:"4"},{default:a(()=>[t(C,{label:"角色篩選",modelValue:y.value,"onUpdate:modelValue":e[0]||(e[0]=l=>y.value=l),items:k.value,variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","items"])]),_:1}),t(T),t(F,{cols:"4"},{default:a(()=>[t(R,{label:"搜尋",modelValue:V.value,"onUpdate:modelValue":e[1]||(e[1]=l=>V.value=l),density:"compact",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),t(U,{class:"rounded-lg elevation-3"},{default:a(()=>[t(Y,{headers:u.value,items:s.value,density:"comfortable",class:"cyan-header"},{"item.role":a(({item:l})=>[(p(!0),x(E,null,M(l.roles,o=>(p(),j(K,{key:o,class:"ma-1",color:"primary","text-color":"white",size:"small"},{default:a(()=>[f(g(o),1)]),_:2},1024))),128))]),"item.status":a(({item:l})=>[l.review==="待審核"?(p(),j(le,{key:0,user:l},null,8,["user"])):l.review==="退件"?(p(),x("span",ue,g(l.review),1)):l.review==="啟用"?(p(),x("span",de,g(l.review),1)):l.review==="停用"?(p(),x("span",me,g(l.review),1)):(p(),x("span",ve,g(l.review),1))]),"item.edit":a(({item:l})=>[l.review!=="待審核"?(p(),j(oe,{key:0,user:l},null,8,["user"])):q("",!0)]),"item.delete":a(({item:l})=>[t(ie,{user:l,onDeleteUser:b},null,8,["user"])]),_:1},8,["headers","items"])]),_:1})],64))}};export{Ne as default};
