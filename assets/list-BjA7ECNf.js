import{f as m,h as $,j,o as p,w as a,e as t,d,n as V,V as q,m as f,b as x,B as D,s as C,x as R,u as o,t as g,C as L,D as A,p as B,a as W,E as G,F as S,G as H,z as M,H as P}from"./index-DsLPX3BI.js";import{_ as J,g as K,s as Q}from"./delete-alert-icon-C4WYVWpg.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as U,a as z,b as E,c as I}from"./VCard-CL4EWFtp.js";import{V as X}from"./VTextarea-DHxxKqJA.js";import{V as T}from"./VSpacer-C1XAD_mX.js";import{V as O}from"./VDialog-nugxKd2C.js";import{V as Y,a as F}from"./VRow-NzVItThu.js";/* empty css              */const Z={class:"mt-4"},_={key:0,class:"mt-4"},h={key:1},ee={__name:"review",props:{user:{type:Object,required:!0,default:()=>({id:"",email:"",name:"",phone:"",unit:"",createTime:"",review:"",reason:"",rejectReason:"",roles:[]})}},setup(v){const r=v,c=m(["運動科學中心","健康促進與運動","廠商-資拓","體育器材研發","運動營養學","運動心理學","體適能測試","運動生物力學","運動傷害預防","運動恢復技術","健身房經營管理","團隊運動訓練","個人健身教練培訓","社區運動活動","運動科技創新"]),b=m(["一般使用者","管理員","測試人員","師父","徒弟"]),s=m({id:"",review:"",rejectReason:"",roles:[]});$(()=>{s.value.review=r.user.review,s.value.rejectReason=r.user.rejectReason,s.value.unit=r.user.unit});const u=m(!1);function k(){s.value.id=r.user.id,r.user.review=s.value.review,r.user.rejectReason=s.value.rejectReason,r.user.unit=s.value.unit,r.user.roles=s.value.roles,console.log("送出審核資料:",s.value),u.value=!1}function y(){s.value.review=r.user.review,s.value.rejectReason=r.user.rejectReason,s.value.unit=r.user.unit,s.value.roles=r.user.roles,u.value=!1}return(i,e)=>(p(),j(O,{modelValue:o(u),"onUpdate:modelValue":e[9]||(e[9]=l=>B(u)?u.value=l:null),"max-width":"500"},{activator:a(({props:l})=>[t(V,A(l,{title:"審核狀態",size:"small",color:"warning",text:"審核"}),null,16)]),default:a(({isActive:l})=>[t(U,{class:"review-border"},{default:a(()=>[t(z,{class:"d-flex justify-space-between align-center"},{default:a(()=>[e[11]||(e[11]=d("span",{class:"text-blue"},"審核狀態",-1)),t(V,{icon:"",variant:"text",onClick:e[0]||(e[0]=n=>y())},{default:a(()=>[t(q,null,{default:a(()=>[...e[10]||(e[10]=[f("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),t(E,null,{default:a(()=>[t(C,{"hide-details":"auto",modelValue:v.user.email,"onUpdate:modelValue":e[1]||(e[1]=n=>v.user.email=n),density:"compact",label:"帳號/信箱","prepend-inner-icon":"mdi-email",variant:"solo",required:"",class:"mb-5",readonly:""},{label:a(()=>[...e[12]||(e[12]=[f(" 帳號/信箱 ",-1)])]),_:1},8,["modelValue"]),t(C,{"hide-details":"auto",modelValue:v.user.name,"onUpdate:modelValue":e[2]||(e[2]=n=>v.user.name=n),density:"compact",label:"使用者名稱","prepend-inner-icon":"mdi-account",variant:"solo",required:"",class:"mb-5",readonly:""},{label:a(()=>[...e[13]||(e[13]=[f(" 使用者名稱 ",-1)])]),_:1},8,["modelValue"]),t(R,{"hide-details":"auto",modelValue:o(s).unit,"onUpdate:modelValue":e[3]||(e[3]=n=>o(s).unit=n),density:"compact",label:"單位","prepend-inner-icon":"mdi-domain",variant:"underlined",required:"",class:"mb-5",items:o(c)},{label:a(()=>[...e[14]||(e[14]=[f(" 單位 ",-1)])]),_:1},8,["modelValue","items"]),d("div",null,[e[15]||(e[15]=d("strong",null,"申請原因:",-1)),f(" "+g(v.user.reason),1)]),d("div",null,[e[16]||(e[16]=d("strong",null,"申請時間:",-1)),f(" "+g(v.user.createTime),1)]),d("div",Z,[e[19]||(e[19]=d("strong",null,"審核狀態:",-1)),t(L,{class:"mx-4",modelValue:o(s).review,"onUpdate:modelValue":e[4]||(e[4]=n=>o(s).review=n),mandatory:""},{default:a(()=>[t(V,{class:"review-button mx-4",value:"啟用",color:"success",variant:"tonal"},{default:a(()=>[...e[17]||(e[17]=[f("啟用",-1)])]),_:1}),t(V,{class:"review-button mx-4",value:"退件",color:"error",variant:"tonal"},{default:a(()=>[...e[18]||(e[18]=[f("退件",-1)])]),_:1})]),_:1},8,["modelValue"])]),o(s).review==="退件"?(p(),x("div",_,[t(X,{modelValue:o(s).rejectReason,"onUpdate:modelValue":e[5]||(e[5]=n=>o(s).rejectReason=n),label:"退件原因",density:"compact",variant:"solo",required:"",placeholder:"請輸入退件原因"},null,8,["modelValue"])])):D("",!0),o(s).review==="啟用"?(p(),x("div",h,[t(R,{modelValue:o(s).roles,"onUpdate:modelValue":e[6]||(e[6]=n=>o(s).roles=n),items:o(b),label:"角色",variant:"underlined",chips:"",multiple:""},null,8,["modelValue","items"])])):D("",!0)]),_:1}),t(I,null,{default:a(()=>[t(T),t(V,{text:"取消",variant:"outlined",color:"grey-darken-2",onClick:e[7]||(e[7]=n=>y())}),t(V,{text:"確認",variant:"outlined",color:"primary",onClick:e[8]||(e[8]=n=>k())})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},le=N(ee,[["__scopeId","data-v-0069311e"]]),te={class:"mt-4"},se={key:0},ae={key:1},re={__name:"edit",props:{user:{type:Object,required:!0,default:()=>({id:"",email:"",name:"",phone:"",unit:"",createTime:"",review:"",reason:"",rejectReason:"",roles:[]})}},setup(v){const r=v,c=m(["運動科學中心","健康促進與運動","廠商-資拓","體育器材研發","運動營養學","運動心理學","體適能測試","運動生物力學","運動傷害預防","運動恢復技術","健身房經營管理","團隊運動訓練","個人健身教練培訓","社區運動活動","運動科技創新"]),b=m(["一般使用者","管理員","測試人員","師父","徒弟"]),s=m({id:"",review:"",unit:"",roles:[]});$(()=>{s.value.review=r.user.review,s.value.unit=r.user.unit,s.value.roles=r.user.roles});const u=m(!1);function k(){s.value.id=r.user.id,r.user.review=s.value.review,r.user.unit=s.value.unit,r.user.roles=s.value.roles,console.log("送出編輯資料:",s.value),u.value=!1}function y(){s.value.review=r.user.review,s.value.unit=r.user.unit,s.value.roles=r.user.roles,u.value=!1}function i(){s.value.review=s.value.review=="停用"?"啟用":"停用"}return(e,l)=>(p(),j(O,{modelValue:o(u),"onUpdate:modelValue":l[8]||(l[8]=n=>B(u)?u.value=n:null),"max-width":"500"},{activator:a(({props:n})=>[t(V,A(n,{title:"編輯",icon:"mdi-pencil",size:"small",variant:"text"}),null,16)]),default:a(({isActive:n})=>[t(U,{class:"review-border"},{default:a(()=>[t(z,{class:"d-flex justify-space-between align-center"},{default:a(()=>[l[10]||(l[10]=d("span",{class:"text-blue"},"編輯人員",-1)),t(V,{icon:"",variant:"text",onClick:l[0]||(l[0]=w=>y())},{default:a(()=>[t(q,null,{default:a(()=>[...l[9]||(l[9]=[f("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),t(E,null,{default:a(()=>[t(C,{"hide-details":"auto",modelValue:v.user.email,"onUpdate:modelValue":l[1]||(l[1]=w=>v.user.email=w),density:"compact",label:"帳號/信箱","prepend-inner-icon":"mdi-email",variant:"solo",required:"",class:"mb-5",readonly:""},{label:a(()=>[...l[11]||(l[11]=[f(" 帳號/信箱 ",-1)])]),_:1},8,["modelValue"]),t(C,{"hide-details":"auto",modelValue:v.user.name,"onUpdate:modelValue":l[2]||(l[2]=w=>v.user.name=w),density:"compact",label:"使用者名稱","prepend-inner-icon":"mdi-account",variant:"solo",required:"",class:"mb-5",readonly:""},{label:a(()=>[...l[12]||(l[12]=[f(" 使用者名稱 ",-1)])]),_:1},8,["modelValue"]),t(R,{"hide-details":"auto",modelValue:o(s).unit,"onUpdate:modelValue":l[3]||(l[3]=w=>o(s).unit=w),density:"compact",label:"單位","prepend-inner-icon":"mdi-domain",variant:"underlined",required:"",class:"mb-5",items:o(c)},{label:a(()=>[...l[13]||(l[13]=[f(" 單位 ",-1)])]),_:1},8,["modelValue","items"]),d("div",te,[l[16]||(l[16]=d("strong",null,"狀態:",-1)),t(V,{class:"review-button-edit mx-4",color:o(s).review==="啟用"?"success":"error",variant:"tonal",onClick:l[4]||(l[4]=w=>i())},{default:a(()=>[o(s).review==="啟用"?(p(),x("span",se,[...l[14]||(l[14]=[d("span",{class:"review-button-content"},"啟用",-1),d("span",{class:"review-button-circle"},"●",-1)])])):(p(),x("span",ae,[...l[15]||(l[15]=[d("span",{class:"review-button-circle"},"●",-1),d("span",{class:"review-button-content"},"停用",-1)])]))]),_:1},8,["color"])]),t(R,{modelValue:o(s).roles,"onUpdate:modelValue":l[5]||(l[5]=w=>o(s).roles=w),items:o(b),label:"角色",variant:"underlined",chips:"",multiple:""},null,8,["modelValue","items"])]),_:1}),t(I,null,{default:a(()=>[t(T),t(V,{text:"取消",variant:"outlined",color:"grey-darken-2",onClick:l[6]||(l[6]=w=>y())}),t(V,{text:"確認",variant:"outlined",color:"primary",onClick:l[7]||(l[7]=w=>k())})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},ne=N(re,[["__scopeId","data-v-026cb05c"]]),oe={__name:"delete",props:{user:{type:Object,required:!0,default:()=>({id:"",email:"",name:"",phone:"",unit:"",createTime:"",review:"",reason:"",rejectReason:"",roles:[]})}},emits:["delete-user"],setup(v,{emit:r}){const c=v,b=r,s=m({id:"",review:"",unit:"",roles:[]});$(()=>{s.value.review=c.user.review,s.value.unit=c.user.unit,s.value.roles=c.user.roles});const u=m(!1);function k(){b("delete-user",c.user.id),u.value=!1}function y(){u.value=!1}return(i,e)=>(p(),j(O,{modelValue:o(u),"onUpdate:modelValue":e[3]||(e[3]=l=>B(u)?u.value=l:null),"max-width":"500"},{activator:a(({props:l})=>[t(V,A(l,{title:"刪除",icon:"mdi-trash-can",size:"small",variant:"text"}),null,16)]),default:a(({isActive:l})=>[t(U,null,{default:a(()=>[t(z,{class:"d-flex justify-space-between align-center"},{default:a(()=>[e[5]||(e[5]=d("span",{class:"text-blue"},null,-1)),t(V,{icon:"",variant:"text",onClick:e[0]||(e[0]=n=>y())},{default:a(()=>[t(q,null,{default:a(()=>[...e[4]||(e[4]=[f("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),t(E,null,{default:a(()=>[...e[6]||(e[6]=[d("div",{class:"delete-info"},[d("img",{src:J,alt:"Delete Alert Icon",class:"delete-alert"}),d("span",null,[f("是否確認"),d("span",{class:"text-red"},"刪除"),f("?")])],-1)])]),_:1}),t(I,{class:"d-flex justify-center mb-5"},{default:a(()=>[t(V,{text:"取消",variant:"outlined",color:"grey-darken-2",onClick:e[1]||(e[1]=n=>y())}),t(T,{style:{flex:"0.25"}}),t(V,{text:"確認",variant:"outlined",color:"primary",onClick:e[2]||(e[2]=n=>k())})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},ie=N(oe,[["__scopeId","data-v-e7c48700"]]),ue={key:1,style:{color:"red"}},de={key:2,style:{color:"green"}},me={key:3,style:{color:"gray"}},ve={key:4},ge={__name:"list",setup(v){const r=m([]);$(()=>{var i=K("users");i?r.value=i:W.get("api/users").then(e=>{r.value=e.data,Q("users",r.value,60)})});const c=m(""),b=m(""),s=G(()=>r.value.filter(i=>{const e=!c.value||i.name&&i.name.includes(c.value)||i.userName&&i.userName.includes(c.value)||i.email&&i.email.includes(c.value),l=!b.value||i.roles&&i.roles.includes(b.value);return e&&l}).sort((i,e)=>i.review==="待審核"&&e.review!=="待審核"?-1:i.review!=="待審核"&&e.review==="待審核"?1:new Date(e.createTime)-new Date(i.createTime))),u=m([{title:"使用者",key:"name"},{title:"帳號/E-mail",key:"email"},{title:"角色",key:"role"},{title:"單位",key:"unit"},{title:"狀態",key:"status",sortable:!1},{title:"編輯",key:"edit",sortable:!1},{title:"刪除",key:"delete",sortable:!1}]),k=m(["一般使用者","管理員","測試人員","師父","徒弟"]);m(),m({name:"",email:"",unit:"",phone:"",reason:""});function y(i){r.value=r.value.filter(e=>e.id!==i)}return(i,e)=>(p(),x(S,null,[t(Y,{class:"mt-1"},{default:a(()=>[t(F,{cols:"4"},{default:a(()=>[t(R,{label:"角色篩選",modelValue:b.value,"onUpdate:modelValue":e[0]||(e[0]=l=>b.value=l),items:k.value,variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","items"])]),_:1}),t(T),t(F,{cols:"4"},{default:a(()=>[t(C,{label:"搜尋",modelValue:c.value,"onUpdate:modelValue":e[1]||(e[1]=l=>c.value=l),density:"compact",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),t(U,{class:"rounded-lg elevation-3"},{default:a(()=>[t(H,{headers:u.value,items:s.value,density:"comfortable",class:"cyan-header"},{"item.role":a(({item:l})=>[(p(!0),x(S,null,M(l.roles,n=>(p(),j(P,{key:n,class:"ma-1",color:"primary","text-color":"white",size:"small"},{default:a(()=>[f(g(n),1)]),_:2},1024))),128))]),"item.status":a(({item:l})=>[l.review==="待審核"?(p(),j(le,{key:0,user:l},null,8,["user"])):l.review==="退件"?(p(),x("span",ue,g(l.review),1)):l.review==="啟用"?(p(),x("span",de,g(l.review),1)):l.review==="停用"?(p(),x("span",me,g(l.review),1)):(p(),x("span",ve,g(l.review),1))]),"item.edit":a(({item:l})=>[l.review!=="待審核"?(p(),j(ne,{key:0,user:l},null,8,["user"])):D("",!0)]),"item.delete":a(({item:l})=>[t(ie,{user:l,onDeleteUser:y},null,8,["user"])]),_:1},8,["headers","items"])]),_:1})],64))}};export{ge as default};
