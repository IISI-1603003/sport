import{R as _,d as r,e as E,p as I,h as L,w as n,n as M,u as s,i as T,r as D,o as w,a as d,c as x,b as i,F as $,t as j,k as o,x as v,q as V,V as N,m as z,f as A}from"./index-BxuKpZ1b.js";import{a as k}from"./functions-D4rvsJVY.js";import{p as C,a as R,n as G,e as H,u as J}from"./rules-Bm4BX98a.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as O}from"./VForm-BYMSUQox.js";const Q={class:"label-item"},W={class:"label-item"},X={__name:"registerStep2",setup(Y){const b=I(),{executeRecaptcha:q}=_.useReCaptcha(),p=r(!1),g=r(!0);r("");const f=r(!1),c=r(!1);r(["運動科學中心","健康促進與運動","廠商-資拓","體育器材研發","運動營養學","運動心理學","體適能測試","運動生物力學","運動傷害預防","運動恢復技術","健身房經營管理","團隊運動訓練","個人健身教練培訓","社區運動活動","運動科技創新"]);const a=r({userName:"",name:"",email:"",gender:"",unit:"",reason:"",pw:"",pwConfirm:""}),u=r({userName:"",name:"",gender:"",email:"",unit:""}),U={userName:"帳號/員工編號",name:"姓名",gender:"性別",email:"信箱",unit:"單位"};E(()=>{const t=b.currentRoute.value.query;u.value.userName=t.userName||"",u.value.name=t.name||"",u.value.gender=t.gender,u.value.email=t.email||"",u.value.unit=t.unit,a.value.userName=t.userName,a.value.name=t.name,a.value.email=t.email,a.value.gender=t.gender,a.value.unit=t.unit});const B=t=>U[t]||t;function P(){f.value=!f.value}function S(){c.value=!c.value}const F=async()=>{const t={pw:C,pwConfirm:e=>R(a.value.pw,e),userName:J,email:H,name:G};for(const e in t){const m=t[e];if(a.value[e]!==void 0){const l=m(a.value[e]);if(l!==!0){alert(`${l}`);return}}}p.value=!0;try{const e=await q("signUp");await A.signUp({userName:a.value.userName,name:a.value.name,email:a.value.email,gender:a.value.gender,unit:a.value.unit,reason:a.value.reason,pw:a.value.pw},{headers:{token:e}}).then(m=>{b.push({path:"/sign-in/registerSuccess",query:{}}),p.value=!1}).catch(m=>{k(m),p.value=!1})}catch(e){k(e)}finally{p.value=!1}};return(t,e)=>{const m=D("router-link");return w(),L(O,{onSubmit:T(F,["prevent"]),modelValue:s(g),"onUpdate:modelValue":e[3]||(e[3]=l=>M(g)?g.value=l:null),class:"mx-auto register-form"},{default:n(()=>[e[10]||(e[10]=d("h2",{class:"text-center mb-3"},"一般帳號註冊",-1)),(w(!0),x($,null,j(s(u),(l,y)=>(w(),x("div",{key:y,class:"label-container text-start mt-3"},[d("span",Q,v(B(y)),1),e[4]||(e[4]=o()),d("span",W,v(l),1)]))),128)),i(V,{"hide-details":"auto",modelValue:s(a).reason,"onUpdate:modelValue":e[0]||(e[0]=l=>s(a).reason=l),density:"compact",label:"申請原因","prepend-inner-icon":"mdi-information",variant:"solo",required:"",class:"register-item mb-2"},{label:n(()=>[...e[5]||(e[5]=[o(" 申請原因 ",-1)])]),_:1},8,["modelValue"]),i(V,{"hide-details":"auto",modelValue:s(a).pw,"onUpdate:modelValue":e[1]||(e[1]=l=>s(a).pw=l),type:s(f)?"text":"password",density:"compact",label:"密碼","prepend-inner-icon":"mdi-lock",variant:"solo",required:"",class:"register-item mb-2",rules:[s(C)]},{label:n(()=>[...e[6]||(e[6]=[d("span",{class:"text-danger"},"*",-1),o("密碼 ",-1)])]),"append-inner":n(()=>[i(N,{onClick:P,class:"cursor-pointer"},{default:n(()=>[o(v(s(f)?"mdi-eye":"mdi-eye-off"),1)]),_:1})]),_:1},8,["modelValue","type","rules"]),i(V,{"hide-details":"auto",modelValue:s(a).pwConfirm,"onUpdate:modelValue":e[2]||(e[2]=l=>s(a).pwConfirm=l),type:s(c)?"text":"password",density:"compact",label:"確認密碼","prepend-inner-icon":"mdi-lock-check",variant:"solo",required:"",rules:[l=>s(R)(s(a).pw,l)],class:"register-item mb-2"},{label:n(()=>[...e[7]||(e[7]=[d("span",{class:"text-danger"},"*",-1),o("確認密碼 ",-1)])]),"append-inner":n(()=>[i(N,{onClick:S,class:"cursor-pointer"},{default:n(()=>[o(v(s(c)?"mdi-eye":"mdi-eye-off"),1)]),_:1})]),_:1},8,["modelValue","type","rules"]),i(z,{type:"submit",variant:"flat",color:"primary",block:"",class:"mt-5",loading:s(p)},{default:n(()=>[...e[8]||(e[8]=[o(" 註冊 ",-1)])]),_:1},8,["loading"]),e[11]||(e[11]=d("div",{class:"or"},"或",-1)),i(m,{to:"/sign-in",class:"text-decoration-none"},{default:n(()=>[...e[9]||(e[9]=[o("回登入",-1)])]),_:1})]),_:1},8,["modelValue"])}}},se=K(X,[["__scopeId","data-v-cefe475f"]]);export{se as default};
