import{m as b,V as x,a as m}from"./VOverlay-DPnezZc_.js";import{f as y}from"./forwardRefs-B9O2pm3w.js";import{J as D,K as L,M as w,f as A,am as B,an as F,E as v,U as S,ao as I,y as u,e as g}from"./index-YoOYIYhl.js";import{u as R}from"./scopeId-DMVw-0Yq.js";import{u as T,l as O}from"./index-C7nfzMpl.js";const U=L({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...b({origin:"center center",scrollStrategy:"block",transition:{component:x},zIndex:2400})},"VDialog"),k=D()({name:"VDialog",props:U(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,E){let{emit:f,slots:d}=E;const c=w(e,"modelValue"),{scopeId:h}=R(),t=A();function i(n){const s=n.relatedTarget,l=n.target;if(s!==l&&t.value?.contentEl&&t.value?.globalTop&&![document,t.value.contentEl].includes(l)&&!t.value.contentEl.contains(l)){const a=I(t.value.contentEl);if(!a.length)return;const r=a[0],o=a[a.length-1];s===r?o.focus():r.focus()}}B(()=>{document.removeEventListener("focusin",i)}),F&&v(()=>c.value&&e.retainFocus,n=>{n?document.addEventListener("focusin",i):document.removeEventListener("focusin",i)},{immediate:!0});function V(){f("afterEnter"),(e.scrim||e.retainFocus)&&t.value?.contentEl&&!t.value.contentEl.contains(document.activeElement)&&t.value.contentEl.focus({preventScroll:!0})}function P(){f("afterLeave")}return v(c,async n=>{n||(await S(),t.value.activatorEl?.focus({preventScroll:!0}))}),T(()=>{const n=m.filterProps(e),s=u({"aria-haspopup":"dialog"},e.activatorProps),l=u({tabindex:-1},e.contentProps);return g(m,u({ref:t,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},n,{modelValue:c.value,"onUpdate:modelValue":a=>c.value=a,"aria-modal":"true",activatorProps:s,contentProps:l,height:e.fullscreen?void 0:e.height,width:e.fullscreen?void 0:e.width,maxHeight:e.fullscreen?void 0:e.maxHeight,maxWidth:e.fullscreen?void 0:e.maxWidth,role:"dialog",onAfterEnter:V,onAfterLeave:P},h),{activator:d.activator,default:function(){for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return g(O,{root:"VDialog"},{default:()=>[d.default?.(...r)]})}})}),y({},t)}});export{k as V};
