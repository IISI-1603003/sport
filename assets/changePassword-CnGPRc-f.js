import{f as u,j as w,w as l,o as P,e as s,m as r,V as T,q as F,u as a,n as g,t as v,z as k,p as C,as as U,at as c,au as V,a as B}from"./index-Bz3xUFWk.js";import{V as I}from"./VContainer-D4unix6V.js";import{V as N,a as S}from"./VRow-CxeqdztZ.js";import{V as _,a as A,b as x,c as M,e as R}from"./VCard-DERAAftr.js";import{V as j}from"./VForm-C7V5gtkH.js";import{V as q}from"./VAlert-DGF1DODO.js";import{V as z}from"./VSpacer-CPXMEMtb.js";/* empty css              */const X={__name:"changePassword",setup(D){const y=u(),n=u(!1),p=u(!1),i=u(""),m=u(""),o=u({currentPassword:"",newPassword:"",confirmPassword:""}),f={required:t=>!!t||"此欄位為必填",minLength:t=>t&&t.length>=8||"密碼長度至少8個字元",passwordMatch:t=>t===o.value.newPassword||"密碼確認不相符"},L=async()=>{if(n.value){p.value=!0,i.value="",m.value="";try{await B.put("/api/profile/change-password",{currentPassword:o.value.currentPassword,newPassword:o.value.newPassword}),m.value="密碼已成功變更",b()}catch(t){i.value=t.response?.data?.message||"密碼變更失敗"}finally{p.value=!1}}},b=()=>{o.value={currentPassword:"",newPassword:"",confirmPassword:""},y.value?.reset(),i.value="",m.value=""};return(t,e)=>(P(),w(I,{fluid:""},{default:l(()=>[s(N,null,{default:l(()=>[s(S,{cols:"12",md:"6","offset-md":"3"},{default:l(()=>[s(_,null,{default:l(()=>[s(A,null,{default:l(()=>[s(T,{class:"me-2"},{default:l(()=>[...e[4]||(e[4]=[r("mdi-key-change",-1)])]),_:1}),e[5]||(e[5]=r(" 密碼修改 ",-1))]),_:1}),s(x,null,{default:l(()=>[s(j,{ref_key:"form",ref:y,modelValue:a(n),"onUpdate:modelValue":e[3]||(e[3]=d=>F(n)?n.value=d:null)},{default:l(()=>[s(v,{modelValue:a(o).currentPassword,"onUpdate:modelValue":e[0]||(e[0]=d=>a(o).currentPassword=d),label:"目前密碼",type:"password",rules:[f.required],variant:"outlined",class:"mb-4"},null,8,["modelValue","rules"]),s(v,{modelValue:a(o).newPassword,"onUpdate:modelValue":e[1]||(e[1]=d=>a(o).newPassword=d),label:"新密碼",type:"password",rules:[f.required,f.minLength],variant:"outlined",class:"mb-4"},null,8,["modelValue","rules"]),s(v,{modelValue:a(o).confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=d=>a(o).confirmPassword=d),label:"確認新密碼",type:"password",rules:[f.required,f.passwordMatch],variant:"outlined",class:"mb-4"},null,8,["modelValue","rules"]),a(i)?(P(),w(q,{key:0,type:"error",class:"mb-4"},{default:l(()=>[r(k(a(i)),1)]),_:1})):g("",!0),a(m)?(P(),w(q,{key:1,type:"success",class:"mb-4"},{default:l(()=>[r(k(a(m)),1)]),_:1})):g("",!0)]),_:1},8,["modelValue"])]),_:1}),s(M,null,{default:l(()=>[s(z),s(C,{onClick:b},{default:l(()=>[...e[6]||(e[6]=[r("清除",-1)])]),_:1}),s(C,{color:"primary",disabled:!a(n)||a(p),loading:a(p),onClick:L},{default:l(()=>[...e[7]||(e[7]=[r(" 變更密碼 ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1}),s(_,{class:"mt-4"},{default:l(()=>[s(R,null,{default:l(()=>[...e[8]||(e[8]=[r("密碼安全建議",-1)])]),_:1}),s(x,null,{default:l(()=>[s(U,{density:"compact"},{default:l(()=>[s(c,{"prepend-icon":"mdi-check-circle",color:"success"},{default:l(()=>[s(V,null,{default:l(()=>[...e[9]||(e[9]=[r("密碼長度至少8個字元",-1)])]),_:1})]),_:1}),s(c,{"prepend-icon":"mdi-check-circle",color:"success"},{default:l(()=>[s(V,null,{default:l(()=>[...e[10]||(e[10]=[r("包含大小寫字母",-1)])]),_:1})]),_:1}),s(c,{"prepend-icon":"mdi-check-circle",color:"success"},{default:l(()=>[s(V,null,{default:l(()=>[...e[11]||(e[11]=[r("包含數字",-1)])]),_:1})]),_:1}),s(c,{"prepend-icon":"mdi-check-circle",color:"success"},{default:l(()=>[s(V,null,{default:l(()=>[...e[12]||(e[12]=[r("包含特殊符號",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{X as default};
//# sourceMappingURL=changePassword-CnGPRc-f.js.map
